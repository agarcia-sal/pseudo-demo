```
BEGIN
    // Read input from standard input
    inputString = read input from stdin
    // Remove leading and trailing whitespace
    inputString = trim inputString
    
    // Replace 'dot' with '.' and 'at' with '@'
    inputString = replace 'dot' with '.' in inputString
    inputString = replace 'at' with '@' in inputString
    
    // If the first character is '.', prepend 'dot'
    IF first character of inputString is '.' THEN
        inputString = 'dot' + substring of inputString from index 1 to end
    ENDIF
    
    // Initialize variables
    countAt = 0
    resultCharacters = empty list
    length = 0

    // If the first character is '@', prepend 'at'
    IF first character of inputString is '@' THEN
        inputString = 'at' + substring of inputString from index 1 to end
    ENDIF
    
    // Loop through each character in the modified inputString
    FOR each character in inputString DO
        IF character is '@' THEN
            // If '@' has been encountered before, append 'at' instead of another '@'
            IF countAt > 0 THEN
                append 'at' to resultCharacters
                countAt = 1
            ELSE
                append '@' to resultCharacters
                countAt = 1
            ENDIF
        ELSE
            // Add non-'@' characters to result
            append character to resultCharacters
        ENDIF
    ENDFOR
    
    // Join the list of characters to form the final output string
    finalString = join resultCharacters into a single string
    
    // Handle trailing '.' in the final string by replacing it with 'dot'
    IF last character of finalString is '.' THEN
        finalString = substring of finalString from index 0 to second last + 'dot'
    ENDIF
    
    // Print the resulting string
    print finalString
END
```
