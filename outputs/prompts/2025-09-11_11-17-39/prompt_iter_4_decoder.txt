Translate the given pseudocode into fully functional, idiomatic, and efficient Python code that preserves all class names, method names, and overall structure exactly as in the pseudocode. If the pseudocode references classes like `TreeNode` or `ListNode`, include their definitions with standard Python type hints and handle typical input representations (e.g., lists representing trees or linked lists) by providing appropriate helper functions to convert those inputs to the required data structures. Clearly handle common cases, such as `null` inputs in tree or linked list lists by mapping them to Python's `None`.

Your code must be optimized to run within a 5-second time limit and only use standard Python libraries or well-known packages available in a typical Python 3 environment. Ensure correctness, readability, and idiomatic style throughout. 

Provide only the complete runnable Python code enclosed within a single markdown code block labeled ```python```. Do not include any extra explanations, text, or comments outside the code block. Avoid printing or running test casesâ€”only deliver the solution code.