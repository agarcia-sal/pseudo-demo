```
FUNCTION encode(message)
    SET vowels TO "aeiouAEIOU"
    INITIALIZE vowels_replace AS DICTIONARY MAPPING each vowel TO CHARACTER two positions after vowel in alphabet
    SET message TO message WITH CASE OF EACH LETTER SWAPPED
    INITIALIZE encoded_message AS EMPTY LIST
    FOR each character IN message
        IF character IS IN vowels
            APPEND vowels_replace[character] TO encoded_message
        ELSE
            APPEND character TO encoded_message
    JOIN encoded_message INTO string
    RETURN string
END FUNCTION
```