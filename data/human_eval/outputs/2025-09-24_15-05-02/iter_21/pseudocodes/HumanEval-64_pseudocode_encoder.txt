```
FUNCTION vowels_count(string)
    SET vowels TO "aeiouAEIOU"
    SET number_of_vowels TO 0
    FOR each character IN string
        IF character IS IN vowels
            INCREMENT number_of_vowels BY 1
    IF LAST character OF string IS 'y' OR 'Y'
        INCREMENT number_of_vowels BY 1
    RETURN number_of_vowels
END FUNCTION
```