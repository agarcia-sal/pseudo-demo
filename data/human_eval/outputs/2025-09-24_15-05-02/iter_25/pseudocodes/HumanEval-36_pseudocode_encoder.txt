```
FUNCTION fizz_buzz(integer n)
    SET ns TO empty list
    FOR i FROM 0 TO n MINUS 1
        IF (i MODULO 11 EQUALS 0) OR (i MODULO 13 EQUALS 0)
            APPEND i TO ns
    SET s TO concatenation of string conversion of each element IN ns
    SET ans TO 0
    FOR each character c IN s
        INCREMENT ans BY (1 IF c EQUALS '7' ELSE 0)
    RETURN ans
END FUNCTION
```