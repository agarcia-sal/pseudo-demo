```
FUNCTION sort_array(arr)
    RETURN sorted(sorted(arr) BY value ASCENDING) BY count of '1' bits in binary representation ASCENDING
END FUNCTION
```