```
FUNCTION fib4(n)
    SET base_values TO [0, 0, 2, 0]
    IF n < 4 THEN
        RETURN base_values[n]
    END IF

    FOR index FROM 4 TO n
        SET next_value TO base_values[-1] + base_values[-2] + base_values[-3] + base_values[-4]
        APPEND next_value TO base_values
        REMOVE first element FROM base_values
    END FOR

    RETURN base_values[-1]
END FUNCTION
```