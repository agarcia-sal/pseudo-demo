```
freq = array of 0s size max(lst)+1
for x in lst: freq[x] += 1
ans = -1
for i in 1 to len(freq)-1: if freq[i] >= i: ans = i
return ans
```