```
FUNCTION max_fill(grid, capacity)
    RETURN SUM OF CEILING OF (SUM OF arr DIVIDED BY capacity) FOR EACH arr IN grid
END FUNCTION
```