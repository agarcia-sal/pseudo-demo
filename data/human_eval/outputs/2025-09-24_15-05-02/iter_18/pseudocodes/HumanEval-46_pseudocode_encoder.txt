```
FUNCTION fib4(n)
    SET results TO [0, 0, 2, 0]
    IF n < 4 THEN
        RETURN results[n]
    FOR i FROM 4 TO n
        APPEND (results[-1] + results[-2] + results[-3] + results[-4]) TO results
        REMOVE results[0]
    RETURN results[-1]
END FUNCTION
```