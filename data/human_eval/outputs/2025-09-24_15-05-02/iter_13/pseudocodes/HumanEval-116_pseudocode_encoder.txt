```
FUNCTION sort_array(arr)
    SET sorted_by_value TO sorted(arr)
    SET sorted_by_ones TO sorted(sorted_by_value, key=FUNCTION(x) RETURN COUNT OF '1' IN BINARY REPRESENTATION OF x)
    RETURN sorted_by_ones
END FUNCTION
```