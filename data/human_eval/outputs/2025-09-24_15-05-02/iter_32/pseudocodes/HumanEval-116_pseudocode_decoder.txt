```
FUNCTION sort_array(array_of_integers)
    RETURN sorted(sorted(array_of_integers), key FUNCTION(number)
        RETURN COUNT OF CHARACTER '1' IN BINARY REPRESENTATION OF number WITHOUT PREFIX
    END FUNCTION)
END FUNCTION
```