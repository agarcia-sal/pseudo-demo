FUNCTION max_fill(grid, capacity)
    SET total_raises TO 0
    FOR each well_row IN grid
        SET water_units TO 0
        FOR each unit IN well_row
            INCREMENT water_units BY unit
        SET raises_for_well TO CEILING OF (water_units DIVIDED BY capacity)
        INCREMENT total_raises BY raises_for_well
    RETURN total_raises
END FUNCTION