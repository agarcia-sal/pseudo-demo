FUNCTION encode(message)
    SET vowels TO "aeiouAEIOU"
    INITIALIZE vowels_replace AS empty dictionary
    FOR each vowel_character IN vowels
        SET vowels_replace[vowel_character] TO CHARACTER WITH ASCII CODE (ASCII CODE OF vowel_character PLUS 2)
    SET message TO message WITH ALL LETTERS' CASES SWAPPED
    INITIALIZE encoded_message AS empty string
    FOR each character IN message
        IF character IS IN vowels_replace
            APPEND vowels_replace[character] TO encoded_message
        ELSE
            APPEND character TO encoded_message
    RETURN encoded_message
END FUNCTION