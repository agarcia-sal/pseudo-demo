FUNCTION fib4(n)
    SET results TO [0, 0, 2, 0]
    IF n LESS THAN 4
        RETURN results[n]
    FOR index FROM 4 TO n
        SET next_value TO results[3] PLUS results[2] PLUS results[1] PLUS results[0]
        APPEND next_value TO results
        REMOVE first element FROM results
    RETURN results[3]
END FUNCTION