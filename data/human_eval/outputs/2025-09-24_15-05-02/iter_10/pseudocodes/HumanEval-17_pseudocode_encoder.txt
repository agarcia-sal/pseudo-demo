FUNCTION parse_music(music_string)
    SET note_map TO DICTIONARY WITH KEYS 'o' = 4, 'o|' = 2, '.|' = 1
    SET tokens TO SPLIT music_string BY ' '
    SET result TO EMPTY LIST
    FOR each token IN tokens
        IF token IS NOT EMPTY
            APPEND note_map[token] TO result
    RETURN result
END FUNCTION