```
FUNCTION fib4(n)
    SET results TO LIST [0, 0, 2, 0]
    IF n LESS THAN 4 THEN
        RETURN results AT INDEX n
    END IF

    FOR i FROM 4 TO n INCLUSIVE
        SET next_value TO results AT LAST INDEX + results AT SECOND LAST INDEX + results AT THIRD LAST INDEX + results AT FOURTH LAST INDEX
        APPEND next_value TO results
        REMOVE FIRST ELEMENT FROM results
    END FOR

    RETURN results AT LAST INDEX
END FUNCTION
```