FUNCTION parse_music WITH PARAMETER music_string
    SET note_map TO DICTIONARY WITH KEYS 'o' MAPPED TO 4, 'o|' MAPPED TO 2, '.|' MAPPED TO 1
    SET note_list TO EMPTY LIST
    FOR EACH x IN SPLIT music_string BY SPACE
        IF x IS NOT EMPTY
            APPEND note_map AT KEY x TO note_list
    RETURN note_list