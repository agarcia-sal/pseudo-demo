FUNCTION closest_integer(value)
    IMPORT floor FROM math
    IMPORT ceil FROM math

    IF value CONTAINS exactly one '.' THEN
        WHILE last character of value IS '0' DO
            SET value TO value WITHOUT last character
        END WHILE
    END IF

    SET num TO float(value)

    IF last two characters of value ARE '.5' THEN
        IF num IS GREATER THAN 0 THEN
            SET res TO ceil(num)
        ELSE
            SET res TO floor(num)
        END IF
    ELSE IF length of value IS GREATER THAN 0 THEN
        SET res TO integer rounded value of num
    ELSE
        SET res TO 0
    END IF

    RETURN res
END FUNCTION