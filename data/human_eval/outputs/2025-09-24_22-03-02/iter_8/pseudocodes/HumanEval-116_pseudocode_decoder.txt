FUNCTION sort_array(arr)
    RETURN sorted(sorted(arr)) BY number_of_ones_in_binary_representation

FUNCTION number_of_ones_in_binary_representation(x)
    SET binary_string TO binary_representation_of(x) WITHOUT prefix '0b'
    SET count_ones TO count_of_character('1') IN binary_string
    RETURN count_ones