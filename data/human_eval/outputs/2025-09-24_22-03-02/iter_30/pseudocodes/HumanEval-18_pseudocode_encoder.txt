FUNCTION how_many_times WITH PARAMETERS string AS string, substring AS string RETURNS integer
    SET times EQUALS 0
    SET length_string EQUALS CALL length ON string
    SET length_substring EQUALS CALL length ON substring
    SET limit EQUALS length_string MINUS length_substring PLUS 1
    FOR i IN RANGE FROM 0 TO limit MINUS 1
        SET current_slice EQUALS EMPTY STRING
        FOR j IN RANGE FROM i TO i PLUS length_substring MINUS 1
            SET current_slice EQUALS CONCATENATE current_slice WITH string[j]
        END FOR
        IF current_slice EQUALS substring THEN
            SET times EQUALS times PLUS 1
        END IF
    END FOR
    RETURN times