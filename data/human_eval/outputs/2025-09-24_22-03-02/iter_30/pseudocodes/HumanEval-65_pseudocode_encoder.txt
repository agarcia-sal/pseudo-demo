FUNCTION circular_shift WITH PARAMETERS x, shift
    SET s EQUALS CALL str WITH ARGUMENTS x
    SET length EQUALS CALL len WITH ARGUMENTS s
    IF shift GREATER THAN length THEN
        SET result EQUALS EMPTY STRING
        FOR i FROM length MINUS 1 DOWNTO 0 STEP MINUS 1 DO
            SET result EQUALS CONCATENATE result WITH s AT INDEX i
        END FOR
        RETURN result
    ELSE
        SET first_part EQUALS EMPTY STRING
        SET second_part EQUALS EMPTY STRING
        SET start_index EQUALS length MINUS shift
        FOR i FROM start_index TO length MINUS 1 DO
            SET second_part EQUALS CONCATENATE second_part WITH s AT INDEX i
        END FOR
        FOR i FROM 0 TO start_index MINUS 1 DO
            SET first_part EQUALS CONCATENATE first_part WITH s AT INDEX i
        END FOR
        RETURN CONCATENATE second_part WITH first_part
    END IF