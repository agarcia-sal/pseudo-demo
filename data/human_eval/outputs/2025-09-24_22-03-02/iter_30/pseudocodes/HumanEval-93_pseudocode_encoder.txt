FUNCTION encode WITH PARAMETER message
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    SET index TO 0
    SET length_of_vowels TO LENGTH OF vowels
    WHILE index LESS THAN length_of_vowels
        SET current_char TO CHARACTER AT INDEX index IN vowels
        SET ascii_value TO CALL FUNCTION ord WITH ARGUMENT current_char
        SET replaced_char_code TO ascii_value PLUS 2
        SET replaced_char TO CALL FUNCTION chr WITH ARGUMENT replaced_char_code
        SET DICTIONARY ENTRY vowels_replace AT KEY current_char TO replaced_char
        SET index TO index PLUS 1
    END WHILE
    SET swapped_message TO CALL METHOD swapcase ON message WITH NO ARGUMENTS
    SET result_list TO LIST WITH ELEMENTS EMPTY
    SET message_length TO LENGTH OF swapped_message
    SET i TO 0
    WHILE i LESS THAN message_length
        SET current_char TO CHARACTER AT INDEX i IN swapped_message
        IF current_char IN vowels
            APPEND vowels_replace AT KEY current_char TO result_list
        ELSE
            APPEND current_char TO result_list
        END IF
        SET i TO i PLUS 1
    END WHILE
    SET result_string TO EMPTY STRING
    SET j TO 0
    SET result_list_length TO LENGTH OF result_list
    WHILE j LESS THAN result_list_length
        SET result_string TO result_string CONCATENATE CHARACTER AT INDEX j IN result_list
        SET j TO j PLUS 1
    END WHILE
    RETURN result_string
END FUNCTION