FUNCTION is_happy WITH PARAMETER s
    IF CALL length ON s LESS THAN 3 THEN
        RETURN False
    END IF

    SET n TO CALL length ON s
    SET i TO 0
    WHILE i LESS THAN n MINUS 2 DO
        IF CALL element AT INDEX i ON s EQUALS CALL element AT INDEX i PLUS 1 ON s OR CALL element AT INDEX i PLUS 1 ON s EQUALS CALL element AT INDEX i PLUS 2 ON s OR CALL element AT INDEX i ON s EQUALS CALL element AT INDEX i PLUS 2 ON s THEN
            RETURN False
        END IF
        INCREMENT i BY 1
    END WHILE

    RETURN True
END FUNCTION