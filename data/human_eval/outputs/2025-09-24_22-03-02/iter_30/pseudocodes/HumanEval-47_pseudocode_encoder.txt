FUNCTION median WITH PARAMETER l AS LIST
    SET l TO CALL sorted WITH ARGUMENTS l
    SET length TO CALL len WITH ARGUMENTS l
    SET remainder TO length MODULO 2
    IF remainder EQUALS 1 THEN
        SET middle_index TO length DIVIDED BY 2
        RETURN l AT INDEX middle_index
    ELSE
        SET middle_index_1 TO (length DIVIDED BY 2) MINUS 1
        SET middle_index_2 TO length DIVIDED BY 2
        SET sum_value TO l AT INDEX middle_index_1 PLUS l AT INDEX middle_index_2
        SET median_value TO sum_value DIVIDED BY 2.0
        RETURN median_value
    END IF
END FUNCTION