FUNCTION sort_array WITH PARAMETER array
    IF LENGTH OF array EQUALS 0 THEN
        RETURN LIST WITH ELEMENTS EMPTY
    ELSE
        SET sum_first_last TO array AT INDEX 0 PLUS array AT INDEX LENGTH OF array MINUS 1
        SET is_even TO sum_first_last MODULO 2 EQUALS 0
        SET copy_array TO LIST WITH ELEMENTS EMPTY
        FOR index FROM 0 TO LENGTH OF array MINUS 1 DO
            APPEND array AT INDEX index TO copy_array
        END FOR
        IF is_even THEN
            FOR i FROM 0 TO LENGTH OF copy_array MINUS 2 DO
                FOR j FROM 0 TO LENGTH OF copy_array MINUS i MINUS 2 DO
                    IF copy_array AT INDEX j LESS THAN copy_array AT INDEX j PLUS 1 THEN
                        SET temp TO copy_array AT INDEX j
                        SET copy_array AT INDEX j TO copy_array AT INDEX j PLUS 1
                        SET copy_array AT INDEX j PLUS 1 TO temp
                    END IF
                END FOR
            END FOR
        ELSE
            FOR i FROM 0 TO LENGTH OF copy_array MINUS 2 DO
                FOR j FROM 0 TO LENGTH OF copy_array MINUS i MINUS 2 DO
                    IF copy_array AT INDEX j GREATER THAN copy_array AT INDEX j PLUS 1 THEN
                        SET temp TO copy_array AT INDEX j
                        SET copy_array AT INDEX j TO copy_array AT INDEX j PLUS 1
                        SET copy_array AT INDEX j PLUS 1 TO temp
                    END IF
                END FOR
            END FOR
        END IF
        RETURN copy_array
    END IF