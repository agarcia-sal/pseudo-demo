FUNCTION how_many_times WITH PARAMETERS string, substring RETURNS INTEGER
    SET times EQUALS 0
    SET string_length EQUALS CALL length OF string
    SET substring_length EQUALS CALL length OF substring
    SET max_index EQUALS string_length MINUS substring_length PLUS 1
    FOR i FROM 0 TO max_index MINUS 1 INCLUSIVE
        SET match_substring TO EMPTY LIST WITH ELEMENTS
        FOR j FROM 0 TO substring_length MINUS 1 INCLUSIVE
            APPEND element AT INDEX i PLUS j OF string TO match_substring
        END FOR
        SET substring_chars TO EMPTY LIST WITH ELEMENTS
        FOR k FROM 0 TO substring_length MINUS 1 INCLUSIVE
            APPEND element AT INDEX k OF substring TO substring_chars
        END FOR
        IF match_substring EQUALS substring_chars THEN
            SET times EQUALS times PLUS 1
        END IF
    END FOR
    RETURN times