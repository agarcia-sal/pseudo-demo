FUNCTION sort_array WITH PARAMETER arr
    SET sorted_arr TO CALL sorted WITH ARGUMENTS arr
    DEFINE FUNCTION count_ones WITH PARAMETER x
        SET binary_representation TO CALL bin WITH ARGUMENTS x
        SET sliced_binary TO SUBSTRING OF binary_representation FROM INDEX 2 TO LENGTH OF binary_representation MINUS 1
        SET count TO 0
        FOR i FROM 0 TO LENGTH OF sliced_binary MINUS 1
            IF CHARACTER AT sliced_binary AT INDEX i EQUALS '1'
                SET count TO count PLUS 1
            END IF
        END FOR
        RETURN count
    END FUNCTION
    SET final_sorted_arr TO CALL sorted WITH ARGUMENTS sorted_arr AND KEY count_ones
    RETURN final_sorted_arr
END FUNCTION