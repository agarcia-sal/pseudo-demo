FUNCTION encrypt WITH PARAMETER s
    SET d TO STRING 'abcdefghijklmnopqrstuvwxyz'
    SET out TO EMPTY STRING
    FOR i FROM 0 TO LENGTH OF s MINUS 1
        SET c TO CHARACTER AT INDEX i IN s
        SET in_alphabet TO FALSE
        FOR j FROM 0 TO LENGTH OF d MINUS 1
            IF c EQUALS CHARACTER AT INDEX j IN d THEN
                SET in_alphabet TO TRUE
                SET index_in_d TO j
                BREAK
            END IF
        END FOR
        IF in_alphabet EQUALS TRUE THEN
            SET shifted_index TO (index_in_d PLUS 2 MULTIPLY 2) MODULO 26
            SET shifted_char TO CHARACTER AT INDEX shifted_index IN d
            CONCATENATE shifted_char TO out
        ELSE
            CONCATENATE c TO out
        END IF
    END FOR
    RETURN out