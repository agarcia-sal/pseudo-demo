FUNCTION fib4 WITH PARAMETER n AS INTEGER
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0
    IF n LESS THAN 4 THEN
        RETURN ELEMENT AT INDEX n FROM results
    END IF

    FOR index FROM 4 TO n INCLUSIVE DO
        SET next_value TO SUM OF LAST FOUR ELEMENTS IN results
        APPEND next_value TO results
        REMOVE FIRST ELEMENT FROM results
    END FOR

    RETURN LAST ELEMENT FROM results
END FUNCTION