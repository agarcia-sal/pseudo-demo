FUNCTION encode(message)
    SET vowels TO LIST WITH ELEMENTS 'a', 'e', 'i', 'o', 'u', 'A', 'E', 'I', 'O', 'U'
    SET vowels_replace TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1
        SET current_vowel TO vowels AT index
        SET ascii_value TO CALL ord WITH ARGUMENT current_vowel
        SET replaced_char TO CALL chr WITH ARGUMENT ascii_value PLUS 2
        SET vowels_replace AT current_vowel TO replaced_char
    END FOR
    SET message TO CALL swapcase METHOD ON message
    SET result_characters TO EMPTY LIST
    FOR index FROM 0 TO LENGTH OF message MINUS 1
        SET current_char TO message AT index
        IF current_char IN vowels THEN
            APPEND vowels_replace AT current_char TO result_characters
        ELSE
            APPEND current_char TO result_characters
        END IF
    END FOR
    SET result_string TO CALL join METHOD WITH ARGUMENTS EMPTY STRING AND result_characters
    RETURN result_string
END FUNCTION