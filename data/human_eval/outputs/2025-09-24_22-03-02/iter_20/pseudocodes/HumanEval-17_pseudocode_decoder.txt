FUNCTION parse_music WITH PARAMETER music_string OF TYPE str RETURNS List OF int
    SET note_map TO DICTIONARY WITH KEY 'o' VALUE 4, KEY 'o|' VALUE 2, KEY '.|' VALUE 1
    SET split_list TO CALL music_string SPLIT BY ' '
    SET result_list TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF split_list MINUS 1
        SET x TO split_list AT index
        IF x NOT EQUAL TO EMPTY STRING
            CALL APPEND TO result_list WITH VALUE note_map AT x
        END IF
    END FOR
    RETURN result_list
END FUNCTION