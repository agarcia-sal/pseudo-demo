FUNCTION common(l1 LIST, l2 LIST)
    SET ret TO NEW SET
    SET index1 TO 0
    WHILE index1 LESS THAN LENGTH OF l1
        SET e1 TO l1 AT index1
        SET index2 TO 0
        WHILE index2 LESS THAN LENGTH OF l2
            SET e2 TO l2 AT index2
            IF e1 EQUALS e2
                CALL ret.add WITH ARGUMENT e1
            END IF
            INCREMENT index2 BY 1
        END WHILE
        INCREMENT index1 BY 1
    END WHILE
    SET ret_list TO NEW LIST WITH ELEMENTS EMPTY
    FOR EACH element IN ret
        CALL ret_list.append WITH ARGUMENT element
    END FOR
    SET sorted_list TO CALL sorted WITH ARGUMENT ret_list
    RETURN sorted_list
END FUNCTION