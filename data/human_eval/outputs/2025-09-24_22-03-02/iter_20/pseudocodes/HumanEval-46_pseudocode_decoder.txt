FUNCTION fib4 WITH PARAMETER n OF TYPE int
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0

    IF n LESS THAN 4 THEN
        RETURN ELEMENT AT INDEX n IN results
    END IF

    SET i TO 4
    WHILE i LESS THAN OR EQUAL TO n DO
        SET sum TO ELEMENT AT INDEX (LENGTH OF results MINUS 1) IN results PLUS ELEMENT AT INDEX (LENGTH OF results MINUS 2) IN results PLUS ELEMENT AT INDEX (LENGTH OF results MINUS 3) IN results PLUS ELEMENT AT INDEX (LENGTH OF results MINUS 4) IN results
        APPEND sum TO results
        REMOVE ELEMENT AT INDEX 0 FROM results
        INCREMENT i BY 1
    END WHILE

    RETURN ELEMENT AT INDEX (LENGTH OF results MINUS 1) IN results
END FUNCTION