FUNCTION median WITH PARAMETERS l : list
    SET l TO CALL sorted WITH ARGUMENTS l
    IF CALL len WITH ARGUMENTS l MODULO 2 EQUALS 1 THEN
        SET index TO CALL len WITH ARGUMENTS l DIVIDE BY 2
        RETURN l AT index
    ELSE
        SET left_index TO CALL len WITH ARGUMENTS l DIVIDE BY 2 MINUS 1
        SET right_index TO CALL len WITH ARGUMENTS l DIVIDE BY 2
        SET left_value TO l AT left_index
        SET right_value TO l AT right_index
        SET sum_values TO left_value PLUS right_value
        SET median_value TO sum_values DIVIDE BY 2.0
        RETURN median_value