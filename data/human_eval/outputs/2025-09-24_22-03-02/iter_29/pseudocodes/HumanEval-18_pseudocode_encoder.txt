FUNCTION how_many_times(string: str, substring: str) RETURNS int
    SET times TO 0
    SET string_length TO CALL len WITH ARGUMENTS string
    SET substring_length TO CALL len WITH ARGUMENTS substring
    SET max_index TO string_length MINUS substring_length PLUS 1

    FOR i FROM 0 TO max_index MINUS 1
        SET current_slice TO EMPTY STRING
        FOR j FROM i TO i PLUS substring_length MINUS 1
            SET current_slice TO CONCATENATE current_slice WITH string[j]
        END FOR
        IF current_slice EQUALS substring
            SET times TO times PLUS 1
        END IF
    END FOR

    RETURN times