FUNCTION sort_array WITH PARAMETER array
    SET length TO CALL len WITH ARGUMENTS array
    IF length EQUALS 0
        RETURN LIST WITH ELEMENTS EMPTY
    ELSE
        SET first_element TO array AT INDEX 0
        SET last_element TO array AT INDEX length MINUS 1
        SET sum_first_last TO first_element PLUS last_element
        SET is_sum_even TO CALL MODULO WITH ARGUMENTS sum_first_last AND 2 EQUALS 0
        SET copy_array TO LIST WITH ELEMENTS EMPTY
        FOR index FROM 0 TO length MINUS 1
            APPEND array AT INDEX index TO copy_array
        IF is_sum_even
            CALL sort copy_array WITH ARGUMENT reverse SET TO TRUE
        ELSE
            CALL sort copy_array WITH ARGUMENT reverse SET TO FALSE
        RETURN copy_array