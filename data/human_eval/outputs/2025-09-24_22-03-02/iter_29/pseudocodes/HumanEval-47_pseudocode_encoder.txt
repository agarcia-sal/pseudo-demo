FUNCTION median WITH PARAMETER l OF TYPE list
    SET l TO CALL sorted WITH ARGUMENT l
    IF CALL len WITH ARGUMENT l MODULO 2 EQUALS 1
        RETURN l AT INDEX CALL len WITH ARGUMENT l DIVIDE BY 2
    ELSE
        SET middle_index TO CALL len WITH ARGUMENT l DIVIDE BY 2
        RETURN (l AT INDEX middle_index MINUS 1 PLUS l AT INDEX middle_index) DIVIDE BY 2.0