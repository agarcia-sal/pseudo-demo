FUNCTION select_words WITH PARAMETERS s, n RETURNS list
    SET result TO LIST WITH ELEMENTS EMPTY
    IF s EQUALS EMPTY STRING THEN
        RETURN result
    END IF
    SET words TO CALL s SPLIT WITH ARGUMENTS EMPTY STRING
    SET index_word TO 0
    WHILE index_word LESS THAN LENGTH OF words
        SET word TO words AT INDEX index_word
        SET n_consonants TO 0
        SET index_char TO 0
        WHILE index_char LESS THAN LENGTH OF word
            SET char_lower TO CALL word AT INDEX index_char TO LOWERCASE
            IF char_lower NOT IN LIST WITH ELEMENTS "a", "e", "i", "o", "u" THEN
                SET n_consonants TO n_consonants PLUS 1
            END IF
            INCREMENT index_char BY 1
        END WHILE
        IF n_consonants EQUALS n THEN
            CALL APPEND word TO result
        END IF
        INCREMENT index_word BY 1
    END WHILE
    RETURN result