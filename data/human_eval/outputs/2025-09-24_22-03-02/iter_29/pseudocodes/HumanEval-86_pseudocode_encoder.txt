FUNCTION anti_shuffle WITH PARAMETER s STRING RETURNS STRING
    SET words TO CALL split ON s WITH ARGUMENT ' '
    SET ordered_words TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF words MINUS 1
        SET word TO words AT index
        SET characters TO CALL list WITH ARGUMENT word
        SET sorted_characters TO CALL sorted WITH ARGUMENT characters
        SET ordered_word TO EMPTY STRING
        FOR char_index FROM 0 TO LENGTH OF sorted_characters MINUS 1
            SET ordered_word TO ordered_word CONCATENATE sorted_characters AT char_index
        END FOR
        APPEND ordered_word TO ordered_words
    END FOR
    SET result TO EMPTY STRING
    FOR ordered_index FROM 0 TO LENGTH OF ordered_words MINUS 1
        IF ordered_index GREATER THAN 0 THEN
            SET result TO result CONCATENATE ' '
        END IF
        SET result TO result CONCATENATE ordered_words AT ordered_index
    END FOR
    RETURN result