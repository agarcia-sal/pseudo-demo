FUNCTION median(l LIST)
    SET l TO CALL sorted WITH ARGUMENT l
    IF LENGTH OF l MODULO 2 EQUALS 1
        SET middle_index TO LENGTH OF l DIVIDED BY 2
        RETURN ELEMENT AT INDEX middle_index IN l
    ELSE
        SET middle_left_index TO (LENGTH OF l DIVIDED BY 2) MINUS 1
        SET middle_right_index TO LENGTH OF l DIVIDED BY 2
        SET sum_middle_elements TO ELEMENT AT INDEX middle_left_index IN l PLUS ELEMENT AT INDEX middle_right_index IN l
        RETURN sum_middle_elements DIVIDED BY 2.0