FUNCTION fib4 WITH PARAMETER n AS int
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0
    IF n LESS THAN 4 THEN
        RETURN results AT INDEX n
    END IF
    FOR index IN RANGE FROM 4 TO n INCLUSIVE DO
        SET next_value TO results AT LAST INDEX PLUS results AT SECOND TO LAST INDEX PLUS results AT THIRD TO LAST INDEX PLUS results AT FOURTH TO LAST INDEX
        APPEND next_value TO results
        REMOVE ELEMENT AT INDEX 0 FROM results
    END FOR
    RETURN results AT LAST INDEX
END FUNCTION