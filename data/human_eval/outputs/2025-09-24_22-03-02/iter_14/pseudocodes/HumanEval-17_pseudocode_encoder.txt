FUNCTION parse_music WITH PARAMETER music_string OF TYPE str RETURNS List of int
    SET note_map TO DICTIONARY WITH ELEMENTS 'o' MAPPED TO 4, 'o|' MAPPED TO 2, '.|' MAPPED TO 1
    SET result_list TO EMPTY LIST OF int
    SET split_list TO music_string SPLIT BY STRING " "
    FOR EACH element x IN split_list
        IF x IS NOT EQUAL TO EMPTY STRING
            APPEND note_map[x] TO result_list
    RETURN result_list