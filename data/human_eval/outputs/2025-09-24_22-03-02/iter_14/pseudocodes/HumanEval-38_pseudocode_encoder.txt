FUNCTION encode_cyclic(s: str)
    SET groups TO EMPTY LIST
    SET total_groups TO (CALL length OF s PLUS 2) DIVIDE BY 3
    FOR i IN RANGE FROM 0 TO total_groups MINUS 1
        SET start_index TO 3 MULTIPLY i
        SET end_index TO THE MINIMUM OF (3 MULTIPLY i PLUS 3) AND CALL length OF s
        SET group TO SUBSTRING OF s FROM start_index TO end_index
        APPEND group TO groups
    END FOR
    SET cycled_groups TO EMPTY LIST
    FOR EACH group IN groups
        IF CALL length OF group EQUALS 3 THEN
            SET cycled_group TO CONCATENATE SUBSTRING OF group FROM 1 TO 3 PLUS SUBSTRING OF group FROM 0 TO 1
            APPEND cycled_group TO cycled_groups
        ELSE
            APPEND group TO cycled_groups
        END IF
    END FOR
    SET result TO EMPTY STRING
    FOR EACH element IN cycled_groups
        CONCATENATE element TO result
    END FOR
    RETURN result
END FUNCTION

FUNCTION decode_cyclic(s: str)
    SET once_encoded TO CALL encode_cyclic WITH ARGUMENT s
    SET twice_encoded TO CALL encode_cyclic WITH ARGUMENT once_encoded
    RETURN twice_encoded
END FUNCTION