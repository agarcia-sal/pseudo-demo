FUNCTION fib4 WITH PARAMETER n AS INTEGER
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0

    IF n LESS THAN 4 THEN
        RETURN results AT INDEX n
    END IF

    FOR index FROM 4 TO n INCLUSIVE DO
        SET new_value TO results AT LAST INDEX PLUS results AT SECOND LAST INDEX PLUS results AT THIRD LAST INDEX PLUS results AT FOURTH LAST INDEX
        APPEND new_value TO results
        REMOVE FIRST ELEMENT FROM results
    END FOR

    RETURN results AT LAST INDEX
END FUNCTION