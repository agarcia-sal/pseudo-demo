FUNCTION parse_music WITH PARAMETER music_string AS STRING RETURNS LIST OF INTEGER
    SET note_map TO DICTIONARY WITH KEYS 'o', 'o|', '.|' AND VALUES 4, 2, 1
    SET result_list TO EMPTY LIST
    FOR EACH x IN SPLIT music_string BY ' '
        IF x IS NOT EMPTY
            APPEND note_map[x] TO result_list
    RETURN result_list