FUNCTION closest_integer(value)
    IMPORT floor, ceil FROM math

    IF value CONTAINS EXACTLY ONE '.'
        WHILE value ENDS WITH '0'
            SET value TO value WITHOUT LAST CHARACTER

    SET num TO CONVERT value TO FLOAT

    IF LAST TWO CHARACTERS OF value EQUAL TO '.5'
        IF num GREATER THAN 0
            SET res TO ceil(num)
        ELSE
            SET res TO floor(num)
    ELSE IF LENGTH OF value GREATER THAN 0
        SET res TO ROUND num TO NEAREST INTEGER
    ELSE
        SET res TO 0

    RETURN res