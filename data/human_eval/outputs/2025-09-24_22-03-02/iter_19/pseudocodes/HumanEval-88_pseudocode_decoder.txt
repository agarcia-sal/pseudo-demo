FUNCTION sort_array WITH PARAMETER array
    IF LENGTH OF array EQUALS 0 THEN
        RETURN LIST WITH ELEMENTS EMPTY
    ELSE
        SET sum_first_last TO array AT INDEX 0 PLUS array AT INDEX LENGTH OF array MINUS 1
        SET is_even TO sum_first_last MODULO 2 EQUALS 0
        SET array_copy TO LIST WITH ELEMENTS EMPTY
        FOR index FROM 0 TO LENGTH OF array MINUS 1 DO
            APPEND array AT INDEX index TO array_copy
        IF is_even EQUALS TRUE THEN
            SET sorted_array TO LIST WITH ELEMENTS EMPTY
            WHILE LENGTH OF array_copy GREATER THAN 0 DO
                SET max_element TO array_copy AT INDEX 0
                SET max_index TO 0
                FOR i FROM 1 TO LENGTH OF array_copy MINUS 1 DO
                    IF array_copy AT INDEX i GREATER THAN max_element THEN
                        SET max_element TO array_copy AT INDEX i
                        SET max_index TO i
                APPEND max_element TO sorted_array
                REMOVE ELEMENT AT INDEX max_index FROM array_copy
            RETURN sorted_array
        ELSE
            SET sorted_array TO LIST WITH ELEMENTS EMPTY
            WHILE LENGTH OF array_copy GREATER THAN 0 DO
                SET min_element TO array_copy AT INDEX 0
                SET min_index TO 0
                FOR i FROM 1 TO LENGTH OF array_copy MINUS 1 DO
                    IF array_copy AT INDEX i LESS THAN min_element THEN
                        SET min_element TO array_copy AT INDEX i
                        SET min_index TO i
                APPEND min_element TO sorted_array
                REMOVE ELEMENT AT INDEX min_index FROM array_copy
            RETURN sorted_array