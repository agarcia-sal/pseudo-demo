FUNCTION how_many_times(string STRING, substring STRING) RETURNS INTEGER
    SET times TO 0
    SET length_string TO CALL len WITH ARGUMENT string
    SET length_substring TO CALL len WITH ARGUMENT substring
    SET limit TO length_string MINUS length_substring PLUS 1
    FOR i IN RANGE FROM 0 TO limit MINUS 1
        SET slice TO EMPTY STRING
        FOR j IN RANGE FROM 0 TO length_substring MINUS 1
            CONCATENATE slice WITH string AT POSITION i PLUS j
        IF slice EQUALS substring
            SET times TO times PLUS 1
    RETURN times