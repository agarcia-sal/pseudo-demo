FUNCTION prime_fib(n: INTEGER)
    FUNCTION is_prime(p: INTEGER)
        IF p LESS THAN 2 THEN
            RETURN FALSE
        ENDIF
        SET limit TO MINIMUM OF (CALL int WITH ARGUMENTS CALL math.sqrt WITH ARGUMENTS p) PLUS 1 AND p MINUS 1
        SET k TO 2
        WHILE k LESS THAN limit
            IF p MODULO k EQUALS 0 THEN
                RETURN FALSE
            ENDIF
            INCREMENT k BY 1
        ENDWHILE
        RETURN TRUE
    ENDFUNCTION

    SET f TO LIST WITH ELEMENTS 0 AND 1
    WHILE TRUE
        SET last_index TO LENGTH OF f MINUS 1
        SET second_last_index TO LENGTH OF f MINUS 2
        SET new_value TO f AT last_index PLUS f AT second_last_index
        APPEND new_value TO f
        SET last_index TO LENGTH OF f MINUS 1
        IF CALL is_prime WITH ARGUMENTS f AT last_index THEN
            SET n TO n MINUS 1
        ENDIF
        IF n EQUALS 0 THEN
            RETURN f AT last_index
        ENDIF
    ENDWHILE
ENDFUNCTION