FUNCTION circular_shift(x, shift)  
    SET s TO CALL str WITH ARGUMENT x  
    IF shift GREATER THAN CALL len WITH ARGUMENT s THEN  
        SET result TO EMPTY LIST  
        SET index TO CALL len WITH ARGUMENT s MINUS 1  
        WHILE index GREATER THAN OR EQUAL TO 0 DO  
            APPEND s AT POSITION index TO result  
            DECREMENT index BY 1  
        END WHILE  
        RETURN CALL CONCATENATE WITH ARGUMENTS result  
    ELSE  
        SET length TO CALL len WITH ARGUMENT s  
        SET part1 TO EMPTY LIST  
        SET index TO length MINUS shift  
        WHILE index LESS THAN length DO  
            APPEND s AT POSITION index TO part1  
            INCREMENT index BY 1  
        END WHILE  
        SET part2 TO EMPTY LIST  
        SET index TO 0  
        WHILE index LESS THAN length MINUS shift DO  
            APPEND s AT POSITION index TO part2  
            INCREMENT index BY 1  
        END WHILE  
        RETURN CALL CONCATENATE WITH ARGUMENTS part1 PLUS part2  
    END IF  
END FUNCTION