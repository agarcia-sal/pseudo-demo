FUNCTION sort_array WITH PARAMETER arr
    SET sorted_arr TO CALL sorted WITH ARGUMENT arr
    SET sorted_arr_by_ones TO CALL sorted WITH ARGUMENT sorted_arr AND key FUNCTION AS
        FUNCTION WITH PARAMETER x
            SET binary_representation TO CALL bin WITH ARGUMENT x
            SET binary_representation_trimmed TO SUBSTRING OF binary_representation FROM INDEX 2 TO END
            SET count_ones TO 0
            FOR index FROM 0 TO LENGTH OF binary_representation_trimmed MINUS 1
                IF CHARACTER AT binary_representation_trimmed AT index EQUALS '1' THEN
                    INCREMENT count_ones BY 1
                END IF
            END FOR
            RETURN count_ones
        END FUNCTION
    RETURN sorted_arr_by_ones