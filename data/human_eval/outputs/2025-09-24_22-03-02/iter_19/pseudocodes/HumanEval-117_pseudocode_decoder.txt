FUNCTION select_words WITH PARAMETERS s, n
    SET result TO LIST WITH ELEMENTS EMPTY
    IF s EQUALS EMPTY STRING
        RETURN result
    END IF
    SET words TO LIST WITH ELEMENTS EMPTY
    SET temp_word TO EMPTY STRING
    SET length_s TO LENGTH OF s
    SET index_s TO 0
    WHILE index_s LESS THAN length_s
        SET char TO CHARACTER AT POSITION index_s IN s
        IF char EQUALS SPACE
            IF temp_word NOT EQUALS EMPTY STRING
                APPEND temp_word TO words
                SET temp_word TO EMPTY STRING
            END IF
        ELSE
            CONCATENATE char TO temp_word
        END IF
        INCREMENT index_s BY 1
    END WHILE
    IF temp_word NOT EQUALS EMPTY STRING
        APPEND temp_word TO words
    END IF
    SET index_word TO 0
    SET length_words TO LENGTH OF words
    WHILE index_word LESS THAN length_words
        SET word TO ELEMENT AT POSITION index_word IN words
        SET n_consonants TO 0
        SET index_char TO 0
        SET length_word TO LENGTH OF word
        WHILE index_char LESS THAN length_word
            SET current_char TO CHARACTER AT POSITION index_char IN word
            SET lower_char TO CALL current_char LOWERCASE
            IF lower_char NOT EQUAL TO "a" AND lower_char NOT EQUAL TO "e" AND lower_char NOT EQUAL TO "i" AND lower_char NOT EQUAL TO "o" AND lower_char NOT EQUAL TO "u"
                INCREMENT n_consonants BY 1
            END IF
            INCREMENT index_char BY 1
        END WHILE
        IF n_consonants EQUALS n
            APPEND word TO result
        END IF
        INCREMENT index_word BY 1
    END WHILE
    RETURN result
END FUNCTION