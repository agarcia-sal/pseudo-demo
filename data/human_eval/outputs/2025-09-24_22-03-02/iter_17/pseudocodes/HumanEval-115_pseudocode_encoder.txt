FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_times TO 0
    FOR EACH arr IN grid
        SET sum_units TO 0
        FOR EACH unit IN arr
            INCREMENT sum_units BY unit
        SET required_times TO CALL math.ceil WITH ARGUMENTS sum_units DIVIDED BY capacity
        INCREMENT total_times BY required_times
    RETURN total_times
END FUNCTION