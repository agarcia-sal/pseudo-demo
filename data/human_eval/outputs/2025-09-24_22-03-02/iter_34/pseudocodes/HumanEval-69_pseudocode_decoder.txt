FUNCTION search WITH PARAMETER lst
    SET max_value TO lst AT INDEX zero
    SET index TO zero
    WHILE index LESS THAN LENGTH OF lst
        IF lst AT INDEX index GREATER THAN max_value
            SET max_value TO lst AT INDEX index
        END IF
        INCREMENT index BY one
    END WHILE

    SET frq TO LIST WITH ELEMENTS zero REPEATED max_value PLUS one TIMES

    SET index TO zero
    WHILE index LESS THAN LENGTH OF lst
        SET i TO lst AT INDEX index
        SET frq AT INDEX i TO frq AT INDEX i PLUS one
        INCREMENT index BY one
    END WHILE

    SET ans TO negative one

    SET i TO one
    WHILE i LESS THAN LENGTH OF frq
        IF frq AT INDEX i GREATER THAN OR EQUAL TO i
            SET ans TO i
        END IF
        INCREMENT i BY one
    END WHILE

    RETURN ans