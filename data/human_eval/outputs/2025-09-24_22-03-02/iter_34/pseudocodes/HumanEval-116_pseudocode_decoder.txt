FUNCTION sort_array WITH PARAMETER arr
    SET sorted_arr TO CALL sorted WITH ARGUMENTS arr
    FOR i FROM 0 TO LENGTH OF sorted_arr MINUS 2
        FOR j FROM 0 TO LENGTH OF sorted_arr MINUS 2 MINUS i
            SET binary_string TO CALL bin ON sorted_arr[j] 
            SET binary_substring TO SLICE OF binary_string FROM 2 TO LENGTH OF binary_string MINUS ONE
            SET count_ones_j TO 0
            FOR k FROM 0 TO LENGTH OF binary_substring MINUS ONE
                IF CHARACTER AT binary_substring WITH INDEX k EQUALS '1'
                    INCREMENT count_ones_j BY 1
            END FOR

            SET binary_string_next TO CALL bin ON sorted_arr[j PLUS 1] 
            SET binary_substring_next TO SLICE OF binary_string_next FROM 2 TO LENGTH OF binary_string_next MINUS ONE
            SET count_ones_j_plus_1 TO 0
            FOR l FROM 0 TO LENGTH OF binary_substring_next MINUS ONE
                IF CHARACTER AT binary_substring_next WITH INDEX l EQUALS '1'
                    INCREMENT count_ones_j_plus_1 BY 1
            END FOR

            IF count_ones_j GREATER THAN count_ones_j_plus_1
                SET temp TO sorted_arr[j]
                SET sorted_arr[j] TO sorted_arr[j PLUS 1]
                SET sorted_arr[j PLUS 1] TO temp
            END IF
        END FOR
    END FOR
    RETURN sorted_arr