FUNCTION anti_shuffle WITH PARAMETER s
    SET words TO CALL split ON s WITH ARGUMENT ' '
    SET ordered_words TO LIST WITH ELEMENTS EMPTY
    SET index TO 0
    WHILE index LESS THAN LENGTH OF words
        SET current_word TO words AT index
        SET char_list TO LIST WITH ELEMENTS EMPTY
        SET char_index TO 0
        WHILE char_index LESS THAN LENGTH OF current_word
            APPEND character AT char_index OF current_word TO char_list
            SET char_index TO char_index PLUS 1
        END WHILE
        SET sorted_chars TO CALL sort ON char_list
        SET new_word TO EMPTY STRING
        SET sorted_index TO 0
        WHILE sorted_index LESS THAN LENGTH OF sorted_chars
            SET new_word TO new_word CONCATENATE sorted_chars AT sorted_index
            SET sorted_index TO sorted_index PLUS 1
        END WHILE
        APPEND new_word TO ordered_words
        SET index TO index PLUS 1
    END WHILE
    SET result TO EMPTY STRING
    SET words_count TO LENGTH OF ordered_words
    SET result_index TO 0
    WHILE result_index LESS THAN words_count
        SET result TO result CONCATENATE ordered_words AT result_index
        IF result_index LESS THAN words_count MINUS 1
            SET result TO result CONCATENATE ' '
        END IF
        SET result_index TO result_index PLUS 1
    END WHILE
    RETURN result
END FUNCTION