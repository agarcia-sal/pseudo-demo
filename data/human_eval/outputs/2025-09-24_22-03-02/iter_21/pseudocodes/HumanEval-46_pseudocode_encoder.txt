FUNCTION fib4 WITH PARAMETER n AS int
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0
    IF n LESS THAN 4 THEN
        RETURN ELEMENT AT INDEX n IN results
    END IF

    FOR i IN RANGE FROM 4 TO n INCLUSIVE DO
        SET new_value TO ELEMENT AT INDEX LENGTH OF results MINUS 1 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 2 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 3 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 4 IN results
        CALL APPEND new_value TO results
        CALL REMOVE ELEMENT AT INDEX 0 FROM results
    END FOR

    RETURN ELEMENT AT INDEX LENGTH OF results MINUS 1 IN results
END FUNCTION