FUNCTION median(l: list)  
    SET l TO CALL sorted WITH ARGUMENTS l  
    IF CALL len WITH ARGUMENTS l MODULO 2 EQUALS 1 THEN  
        SET index TO CALL len WITH ARGUMENTS l DIVIDED BY 2  
        RETURN l AT index  
    ELSE  
        SET index1 TO CALL len WITH ARGUMENTS l DIVIDED BY 2 MINUS 1  
        SET index2 TO CALL len WITH ARGUMENTS l DIVIDED BY 2  
        SET value1 TO l AT index1  
        SET value2 TO l AT index2  
        SET median_value TO (value1 PLUS value2) DIVIDED BY 2.0  
        RETURN median_value  
    END IF  
END FUNCTION