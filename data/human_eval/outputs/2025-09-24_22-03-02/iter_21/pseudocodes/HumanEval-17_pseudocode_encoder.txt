FUNCTION parse_music WITH PARAMETER music_string OF TYPE str RETURNS List OF int
    SET note_map TO DICTIONARY WITH KEYS AND VALUES 'o' MAPPED TO 4, 'o|' MAPPED TO 2, '.|' MAPPED TO 1
    SET result_list TO LIST WITH ELEMENTS EMPTY
    SET split_list TO CALL music_string.split WITH ARGUMENTS ' '
    FOR EACH index_i FROM 0 TO LENGTH OF split_list MINUS 1 INCLUSIVE
        SET x TO split_list AT INDEX index_i
        IF x NOT EQUAL TO EMPTY STRING
            SET value TO CALL note_map.get WITH ARGUMENTS x
            APPEND value TO result_list
    RETURN result_list