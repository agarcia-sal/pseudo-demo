FUNCTION encode WITH PARAMETER message
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO EMPTY LIST
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1 INCLUSIVE
        SET key TO CALL vowels AT index
        SET value TO CALL CHAR WITH ARGUMENTS CALL ORD WITH ARGUMENTS key PLUS 2
        APPEND TUPLE WITH ELEMENTS key AND value TO vowels_replace
    END FOR
    SET vowels_replace TO CALL DICTIONARY WITH ARGUMENT vowels_replace
    SET message TO CALL METHOD swapcase ON message WITH NO ARGUMENTS
    SET result_list TO EMPTY LIST
    FOR index FROM 0 TO LENGTH OF message MINUS 1 INCLUSIVE
        SET current_char TO CALL message AT index
        IF CALL vowels_replace CONTAINS KEY current_char THEN
            APPEND CALL vowels_replace AT current_char TO result_list
        ELSE
            APPEND current_char TO result_list
        END IF
    END FOR
    SET result_string TO CALL METHOD join ON STRING EMPTY WITH ARGUMENT result_list
    RETURN result_string
END FUNCTION