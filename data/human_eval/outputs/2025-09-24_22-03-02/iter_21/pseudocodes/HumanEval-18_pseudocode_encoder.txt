FUNCTION how_many_times WITH PARAMETERS string STRING, substring STRING RETURNS INTEGER
    SET times TO 0
    SET limit TO LENGTH OF string MINUS LENGTH OF substring PLUS 1
    FOR i IN RANGE FROM 0 TO limit MINUS 1 INCLUSIVE
        SET current_slice TO EMPTY STRING
        FOR j IN RANGE FROM i TO i PLUS LENGTH OF substring MINUS 1 INCLUSIVE
            SET current_slice TO CONCATENATE current_slice WITH CHARACTER AT POSITION j OF string
        IF current_slice EQUALS substring
            SET times TO times PLUS 1
    RETURN times