FUNCTION parse_music WITH PARAMETER music_string AS STRING RETURNS LIST OF INTEGER
    SET note_map TO DICTIONARY WITH
        'o' MAPPED TO 4
        'o|' MAPPED TO 2
        '.|' MAPPED TO 1

    SET note_strings TO RESULT OF SPLITTING music_string BY SPACE CHARACTER

    SET beats_list TO EMPTY LIST
    FOR EACH note_string IN note_strings
        IF note_string IS NOT EMPTY
            APPEND note_map VALUE FOR note_string TO beats_list
        END IF
    END FOR

    RETURN beats_list
END FUNCTION