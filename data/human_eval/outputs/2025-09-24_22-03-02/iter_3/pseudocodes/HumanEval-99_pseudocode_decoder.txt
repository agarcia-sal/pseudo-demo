FUNCTION closest_integer(value)
    IMPORT floor, ceil FROM math

    IF value CONTAINS '.' EXACTLY ONCE THEN
        WHILE value ENDS WITH '0' DO
            SET value TO value WITHOUT LAST CHARACTER
        END WHILE
    END IF

    SET num TO CONVERT value TO FLOAT

    IF LAST TWO CHARACTERS OF value EQUAL '.5' THEN
        IF num GREATER THAN 0 THEN
            SET res TO ceil(num)
        ELSE
            SET res TO floor(num)
        END IF
    ELSE IF LENGTH OF value GREATER THAN 0 THEN
        SET res TO CONVERT ROUND(num) TO INTEGER
    ELSE
        SET res TO 0
    END IF

    RETURN res
END FUNCTION