FUNCTION fib4(n)
    SET results TO LIST WITH ELEMENTS 0 COMMA 0 COMMA 2 COMMA 0
    IF n LESS THAN 4
        RETURN ELEMENT AT INDEX n IN results
    FOR index FROM 4 TO n INCLUSIVE
        SET new_value TO ELEMENT AT INDEX LENGTH OF results MINUS 1 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 2 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 3 IN results PLUS ELEMENT AT INDEX LENGTH OF results MINUS 4 IN results
        APPEND new_value TO results
        REMOVE ELEMENT AT INDEX 0 IN results
    RETURN ELEMENT AT INDEX LENGTH OF results MINUS 1 IN results