FUNCTION closest_integer(value)
    IMPORT floor, ceil FROM math

    IF value CONTAINS exactly one '.'
        WHILE last character of value IS '0'
            SET value TO value WITHOUT last character

    SET num TO floating point conversion of value

    IF last two characters of value ARE '.5'
        IF num IS greater than 0
            SET res TO ceil of num
        ELSE
            SET res TO floor of num
    ELSE IF length of value IS greater than 0
        SET res TO integer conversion of round of num
    ELSE
        SET res TO 0

    RETURN res