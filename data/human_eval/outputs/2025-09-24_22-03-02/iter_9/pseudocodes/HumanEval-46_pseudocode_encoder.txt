FUNCTION fib4(n AS INTEGER)
    SET results TO [0, 0, 2, 0]
    IF n < 4 THEN
        RETURN results[n]
    ENDIF

    FOR index FROM 4 TO n DO
        SET next_value TO results[last element] + results[second last element] + results[third last element] + results[fourth last element]
        APPEND next_value TO results
        REMOVE first element FROM results
    ENDFOR

    RETURN results[last element]
ENDFUNCTION