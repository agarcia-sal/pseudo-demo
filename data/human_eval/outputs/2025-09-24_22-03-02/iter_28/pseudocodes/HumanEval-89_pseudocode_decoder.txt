FUNCTION encrypt WITH PARAMETER s
    SET d TO 'abcdefghijklmnopqrstuvwxyz'
    SET out TO ''
    FOR i FROM 0 TO LENGTH OF s MINUS 1
        SET c TO s AT INDEX i
        SET found TO FALSE
        FOR j FROM 0 TO LENGTH OF d MINUS 1
            IF c EQUALS d AT INDEX j
                SET found TO TRUE
                SET index_c TO j
                BREAK
            END IF
        END FOR
        IF found EQUALS TRUE
            SET shifted_index TO (index_c PLUS 2 MULTIPLY 2) MODULO 26
            SET shifted_char TO d AT INDEX shifted_index
            SET out TO CONCATENATE out PLUS shifted_char
        ELSE
            SET out TO CONCATENATE out PLUS c
        END IF
    END FOR
    RETURN out