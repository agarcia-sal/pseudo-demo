FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_lowerings TO 0
    FOR index_row FROM 0 TO LENGTH OF grid MINUS 1
        SET arr TO grid AT index_row
        SET sum_of_units TO 0
        FOR index_unit FROM 0 TO LENGTH OF arr MINUS 1
            SET sum_of_units TO sum_of_units PLUS arr AT index_unit
        END FOR
        SET lowered_times TO CALL math.ceil WITH ARGUMENT sum_of_units DIVIDED BY capacity
        SET total_lowerings TO total_lowerings PLUS lowered_times
    END FOR
    RETURN total_lowerings
END FUNCTION