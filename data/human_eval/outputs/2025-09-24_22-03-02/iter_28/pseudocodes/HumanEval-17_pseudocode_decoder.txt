FUNCTION parse_music WITH PARAMETER music_string OF TYPE str RETURNS List OF int
    SET note_map TO DICTIONARY WITH ELEMENTS 'o' MAPPED TO 4, 'o|' MAPPED TO 2, '.|' MAPPED TO 1
    SET split_list TO CALL music_string.split WITH ARGUMENT ' '
    SET result_list TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF split_list MINUS 1
        SET x TO split_list AT index
        IF x NOT EQUAL TO EMPTY STRING
            APPEND note_map AT KEY x TO result_list
        END IF
    END FOR
    RETURN result_list
END FUNCTION