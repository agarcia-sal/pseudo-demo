FUNCTION encode(message)
    SET vowels TO "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1
        SET i TO CHARACTER AT INDEX index IN vowels
        SET char_code TO CALL ORD WITH ARGUMENT i
        SET new_char_code TO char_code PLUS 2
        SET new_char TO CALL CHR WITH ARGUMENT new_char_code
        SET vowels_replace[i] TO new_char
    END FOR
    SET message TO CALL SWAPCASE METHOD ON message WITHOUT ARGUMENTS
    SET result_chars TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF message MINUS 1
        SET i TO CHARACTER AT INDEX index IN message
        IF i IN vowels THEN
            APPEND vowels_replace[i] TO result_chars
        ELSE
            APPEND i TO result_chars
        END IF
    END FOR
    SET result TO EMPTY STRING
    FOR index FROM 0 TO LENGTH OF result_chars MINUS 1
        SET result TO result CONCATENATE result_chars[index]
    END FOR
    RETURN result
END FUNCTION