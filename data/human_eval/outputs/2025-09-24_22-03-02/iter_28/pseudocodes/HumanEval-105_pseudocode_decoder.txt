FUNCTION by_length(arr)
    SET dic TO DICTIONARY WITH ELEMENTS
        1 MAPPED TO "One",
        2 MAPPED TO "Two",
        3 MAPPED TO "Three",
        4 MAPPED TO "Four",
        5 MAPPED TO "Five",
        6 MAPPED TO "Six",
        7 MAPPED TO "Seven",
        8 MAPPED TO "Eight",
        9 MAPPED TO "Nine"
    SET filtered_arr TO LIST WITH ELEMENTS EMPTY
    SET length_arr TO LENGTH OF arr
    FOR i FROM 0 TO length_arr MINUS 1
        SET element TO arr AT INDEX i
        IF element GREATER THAN OR EQUAL TO 1 AND element LESS THAN OR EQUAL TO 9 THEN
            APPEND element TO filtered_arr
        END IF
    END FOR
    SET length_filtered TO LENGTH OF filtered_arr
    FOR j FROM 0 TO length_filtered MINUS 2
        FOR k FROM 0 TO length_filtered MINUS 2 MINUS j
            IF filtered_arr AT INDEX k GREATER THAN filtered_arr AT INDEX k PLUS 1 THEN
                SET temp TO filtered_arr AT INDEX k
                SET filtered_arr AT INDEX k TO filtered_arr AT INDEX k PLUS 1
                SET filtered_arr AT INDEX k PLUS 1 TO temp
            END IF
        END FOR
    END FOR
    SET reversed_arr TO LIST WITH ELEMENTS EMPTY
    SET length_filtered TO LENGTH OF filtered_arr
    FOR m FROM length_filtered MINUS 1 DOWN TO 0
        APPEND filtered_arr AT INDEX m TO reversed_arr
    END FOR
    SET new_arr TO LIST WITH ELEMENTS EMPTY
    SET length_reversed TO LENGTH OF reversed_arr
    FOR n FROM 0 TO length_reversed MINUS 1
        SET number TO reversed_arr AT INDEX n
        IF dic CONTAINS KEY number THEN
            APPEND dic AT KEY number TO new_arr
        END IF
    END FOR
    RETURN new_arr
END FUNCTION