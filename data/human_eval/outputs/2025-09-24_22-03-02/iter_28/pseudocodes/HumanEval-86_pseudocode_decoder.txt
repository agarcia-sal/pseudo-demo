FUNCTION anti_shuffle WITH PARAMETER s  
    SET words TO LIST WITH ELEMENTS EMPTY  
    SET index TO 0  
    WHILE index LESS THAN LENGTH OF s  
        SET current_word TO EMPTY STRING  
        WHILE index LESS THAN LENGTH OF s AND CHARACTER AT s WITH INDEX index NOT EQUAL TO SPACE  
            CONCATENATE current_word WITH CHARACTER AT s WITH INDEX index  
            INCREMENT index BY 1  
        END WHILE  
        APPEND current_word TO words  
        IF index LESS THAN LENGTH OF s AND CHARACTER AT s WITH INDEX index EQUALS SPACE  
            APPEND SINGLE SPACE STRING TO words  
            INCREMENT index BY 1  
        END IF  
    END WHILE  
    SET result TO EMPTY STRING  
    SET i TO 0  
    WHILE i LESS THAN LENGTH OF words  
        IF words AT INDEX i EQUALS SINGLE SPACE STRING  
            CONCATENATE result WITH SINGLE SPACE STRING  
        ELSE  
            SET chars_list TO LIST WITH ELEMENTS EMPTY  
            SET j TO 0  
            WHILE j LESS THAN LENGTH OF words AT INDEX i  
                APPEND CHARACTER AT words AT INDEX i WITH INDEX j TO chars_list  
                INCREMENT j BY 1  
            END WHILE  
            CALL SORT ON chars_list IN ASCENDING ORDER BASED ON ASCII VALUE  
            SET sorted_word TO EMPTY STRING  
            SET k TO 0  
            WHILE k LESS THAN LENGTH OF chars_list  
                CONCATENATE sorted_word WITH chars_list AT INDEX k  
                INCREMENT k BY 1  
            END WHILE  
            CONCATENATE result WITH sorted_word  
        END IF  
        INCREMENT i BY 1  
    END WHILE  
    RETURN result  
END FUNCTION