FUNCTION encode(message):
    SET vowels TO STRING "aeiouAEIOU"
    CREATE vowels_replace AS EMPTY DICTIONARY
    FOR EACH i IN vowels
        SET unicode_value TO CALL ord WITH ARGUMENT i
        SET replacement_unicode TO unicode_value PLUS 2
        SET replacement_char TO CALL chr WITH ARGUMENT replacement_unicode
        SET vowels_replace AT KEY i TO replacement_char
    SET message TO CALL swapcase METHOD OF message WITH NO ARGUMENTS
    SET encoded_message_chars TO EMPTY LIST
    FOR EACH i IN message
        IF CALL vowels_replace CONTAINS KEY i
            APPEND vowels_replace AT KEY i TO encoded_message_chars
        ELSE
            APPEND i TO encoded_message_chars
    SET encoded_message TO CONCATENATE ALL ELEMENTS OF encoded_message_chars INTO STRING
    RETURN encoded_message