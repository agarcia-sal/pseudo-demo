FUNCTION encrypt WITH PARAMETER s OF TYPE string
    SET d TO string "abcdefghijklmnopqrstuvwxyz"
    SET out TO empty string ""
    FOR EACH c IN s
        IF c IS IN d
            SET original_index TO CALL index OF c IN d
            SET rotated_index TO (original_index PLUS 2 MULTIPLY 2) MODULO 26
            SET rotated_char TO CHARACTER AT rotated_index IN d
            CONCATENATE rotated_char TO out
        ELSE
            CONCATENATE c TO out
    RETURN out