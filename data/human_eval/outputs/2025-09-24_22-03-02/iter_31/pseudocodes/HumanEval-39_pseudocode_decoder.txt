FUNCTION prime_fib WITH PARAMETER n AS INTEGER
    FUNCTION is_prime WITH PARAMETER p AS INTEGER
        IF p LESS THAN 2 THEN
            RETURN FALSE
        END IF
        SET limit TO CALL math.sqrt WITH ARGUMENT p
        SET limit TO CALL int WITH ARGUMENT limit
        SET limit TO limit PLUS 1
        SET upper_bound TO p MINUS 1
        IF limit GREATER THAN upper_bound THEN
            SET limit TO upper_bound
        END IF
        FOR k IN RANGE FROM 2 TO limit MINUS 1
            SET remainder TO p MODULO k
            IF remainder EQUALS 0 THEN
                RETURN FALSE
            END IF
        END FOR
        RETURN TRUE
    END FUNCTION

    SET f TO LIST WITH ELEMENTS 0, 1
    WHILE TRUE
        SET last_index TO LENGTH OF f MINUS 1
        SET second_last_index TO LENGTH OF f MINUS 2
        SET new_fib TO f AT last_index PLUS f AT second_last_index
        CALL APPEND new_fib TO f
        SET last_index TO LENGTH OF f MINUS 1
        SET last_fib TO f AT last_index
        SET prime_check TO CALL is_prime WITH ARGUMENT last_fib
        IF prime_check EQUALS TRUE THEN
            SET n TO n MINUS 1
        END IF
        IF n EQUALS 0 THEN
            RETURN last_fib
        END IF
    END WHILE
END FUNCTION