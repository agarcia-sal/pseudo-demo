FUNCTION search WITH PARAMETER lst
    SET max_value TO 0
    FOR index FROM 0 TO LENGTH OF lst MINUS 1
        IF lst[index] GREATER THAN max_value
            SET max_value TO lst[index]
    END FOR

    SET frq TO LIST WITH ELEMENTS zero REPEATED max_value PLUS 1 TIMES

    FOR index FROM 0 TO LENGTH OF lst MINUS 1
        SET element TO lst[index]
        SET frq[element] TO frq[element] PLUS 1
    END FOR

    SET ans TO -1

    FOR i FROM 1 TO LENGTH OF frq MINUS 1
        IF frq[i] GREATER THAN OR EQUAL TO i
            SET ans TO i
        END IF
    END FOR

    RETURN ans
END FUNCTION