FUNCTION derivative WITH PARAMETER xs OF TYPE list
    SET result TO LIST WITH ELEMENTS EMPTY
    SET index TO 0
    WHILE index LESS THAN LENGTH OF xs
        SET i TO index
        SET x TO ELEMENT AT index IN xs
        SET product TO i MULTIPLY x
        APPEND product TO result
        INCREMENT index BY 1
    END WHILE
    SET sliced_result TO LIST WITH ELEMENTS EMPTY
    SET slice_index TO 1
    WHILE slice_index LESS THAN LENGTH OF result
        APPEND ELEMENT AT slice_index IN result TO sliced_result
        INCREMENT slice_index BY 1
    END WHILE
    RETURN sliced_result
END FUNCTION