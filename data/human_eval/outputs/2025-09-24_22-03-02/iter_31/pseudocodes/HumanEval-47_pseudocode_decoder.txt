FUNCTION median WITH PARAMETER l OF TYPE list
    SET l TO CALL sorted WITH ARGUMENTS l
    SET length TO CALL len WITH ARGUMENTS l
    SET remainder TO length MODULO 2
    IF remainder EQUALS 1 THEN
        SET middleIndex TO length DIVIDED BY 2
        RETURN l AT INDEX middleIndex
    ELSE
        SET middleIndex1 TO (length DIVIDED BY 2) MINUS 1
        SET middleIndex2 TO length DIVIDED BY 2
        SET value1 TO l AT INDEX middleIndex1
        SET value2 TO l AT INDEX middleIndex2
        SET sum TO value1 PLUS value2
        SET result TO sum DIVIDE BY 2.0
        RETURN result
END FUNCTION