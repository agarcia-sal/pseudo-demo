FUNCTION select_words WITH PARAMETERS s, n
    SET result TO LIST WITH ELEMENTS EMPTY
    IF s EQUALS EMPTY STRING
        RETURN result
    SET words TO LIST WITH ELEMENTS EMPTY
    SET start_index TO 0
    SET length_of_s TO LENGTH OF s
    FOR index FROM 0 TO length_of_s MINUS 1
        IF s AT index EQUALS SPACE CHARACTER
            SET word_length TO index MINUS start_index
            IF word_length GREATER THAN 0
                SET word TO SUBSTRING OF s FROM start_index TO index MINUS 1
                APPEND word TO words
            SET start_index TO index PLUS 1
    IF start_index LESS THAN length_of_s
        SET word TO SUBSTRING OF s FROM start_index TO length_of_s MINUS 1
        APPEND word TO words
    FOR index_word FROM 0 TO LENGTH OF words MINUS 1
        SET word TO words AT index_word
        SET n_consonants TO 0
        SET length_of_word TO LENGTH OF word
        FOR index_letter FROM 0 TO length_of_word MINUS 1
            SET letter TO word AT index_letter
            SET letter_lower TO CALL method lower ON letter WITH ARGUMENTS EMPTY
            IF letter_lower NOT EQUAL TO "a" AND letter_lower NOT EQUAL TO "e" AND letter_lower NOT EQUAL TO "i" AND letter_lower NOT EQUAL TO "o" AND letter_lower NOT EQUAL TO "u"
                SET n_consonants TO n_consonants PLUS 1
        IF n_consonants EQUALS n
            APPEND word TO result
    RETURN result