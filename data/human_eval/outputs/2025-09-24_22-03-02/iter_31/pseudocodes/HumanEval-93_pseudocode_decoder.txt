FUNCTION encode WITH PARAMETER message
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    SET index TO 0
    WHILE index LESS THAN LENGTH OF vowels
        SET current_vowel TO vowels AT INDEX index
        SET unicode_value TO CALL ORD WITH ARGUMENT current_vowel
        SET replacement_char_unicode_value TO unicode_value PLUS 2
        SET replacement_char TO CALL CHR WITH ARGUMENT replacement_char_unicode_value
        SET vowels_replace AT KEY current_vowel TO replacement_char
        INCREMENT index BY 1
    END WHILE
    SET swapped_message TO CALL METHOD swapcase ON message WITH NO ARGUMENTS
    SET result_characters TO LIST WITH ELEMENTS EMPTY
    SET index TO 0
    WHILE index LESS THAN LENGTH OF swapped_message
        SET current_char TO swapped_message AT INDEX index
        IF current_char IS IN vowels
            SET replacement_char TO vowels_replace AT KEY current_char
            APPEND replacement_char TO result_characters
        ELSE
            APPEND current_char TO result_characters
        END IF
        INCREMENT index BY 1
    END WHILE
    SET encoded_message TO CALL JOIN WITH ARGUMENTS EMPTY STRING AND result_characters
    RETURN encoded_message
END FUNCTION