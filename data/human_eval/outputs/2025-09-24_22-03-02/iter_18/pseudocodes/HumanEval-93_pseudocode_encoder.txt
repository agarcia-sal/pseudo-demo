FUNCTION encode(message)
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO DICTIONARY EMPTY
    FOR index FROM ZERO TO LENGTH OF vowels MINUS ONE
        SET character TO CALL METHOD vowels AT index
        SET character_code TO CALL FUNCTION ORD WITH ARGUMENT character
        SET replacement_character TO CALL FUNCTION CHR WITH ARGUMENT character_code PLUS TWO
        SET vowels_replace AT KEY character TO replacement_character
    END FOR
    SET message TO CALL METHOD swapcase ON message
    SET encoded_message_characters TO LIST WITH ELEMENTS EMPTY
    FOR index FROM ZERO TO LENGTH OF message MINUS ONE
        SET current_character TO CALL METHOD message AT index
        IF current_character IN vowels THEN
            APPEND vowels_replace AT KEY current_character TO encoded_message_characters
        ELSE
            APPEND current_character TO encoded_message_characters
        END IF
    END FOR
    SET result TO CALL FUNCTION JOIN WITH ARGUMENTS EMPTY STRING AND encoded_message_characters
    RETURN result
END FUNCTION