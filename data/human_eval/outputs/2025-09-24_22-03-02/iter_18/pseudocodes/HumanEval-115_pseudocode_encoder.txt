FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_drops TO 0
    SET index_row TO 0
    WHILE index_row LESS THAN LENGTH OF grid
        SET arr TO grid AT index_row
        SET sum_units TO 0
        SET index_element TO 0
        WHILE index_element LESS THAN LENGTH OF arr
            SET sum_units TO sum_units PLUS arr AT index_element
            INCREMENT index_element BY 1
        END WHILE
        SET drops_for_row TO CALL math.ceil WITH ARGUMENT sum_units DIVIDE BY capacity
        SET total_drops TO total_drops PLUS drops_for_row
        INCREMENT index_row BY 1
    END WHILE
    RETURN total_drops
END FUNCTION