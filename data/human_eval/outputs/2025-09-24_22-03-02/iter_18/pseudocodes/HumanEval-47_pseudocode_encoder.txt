FUNCTION median WITH PARAMETERS l
    SET l TO CALL sorted WITH ARGUMENTS l
    IF CALL len WITH ARGUMENTS l MODULO 2 EQUALS 1 THEN
        SET middle_index TO CALL len WITH ARGUMENTS l DIVIDED BY 2
        RETURN ELEMENT AT middle_index IN l
    ELSE
        SET index1 TO (CALL len WITH ARGUMENTS l DIVIDED BY 2) MINUS 1
        SET index2 TO CALL len WITH ARGUMENTS l DIVIDED BY 2
        SET sum_values TO ELEMENT AT index1 IN l PLUS ELEMENT AT index2 IN l
        RETURN sum_values DIVIDED BY 2.0