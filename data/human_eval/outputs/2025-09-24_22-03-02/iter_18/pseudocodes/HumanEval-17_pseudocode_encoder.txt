FUNCTION parse_music WITH PARAMETER music_string OF TYPE str RETURNS List OF int
    SET note_map TO DICTIONARY WITH ELEMENTS KEY 'o' VALUE 4, KEY 'o|' VALUE 2, KEY '.|' VALUE 1
    SET result TO LIST WITH ELEMENTS EMPTY
    SET split_list TO LIST WITH ELEMENTS EMPTY
    SET index TO 0
    SET length_of_music_string TO LENGTH OF music_string
    WHILE index LESS THAN length_of_music_string
        SET current_char TO CHARACTER AT POSITION index IN music_string
        SET word TO EMPTY STRING
        WHILE index LESS THAN length_of_music_string AND current_char NOT EQUAL TO ' '
            CONCATENATE word WITH current_char
            INCREMENT index BY 1
            IF index LESS THAN length_of_music_string THEN
                SET current_char TO CHARACTER AT POSITION index IN music_string
        IF word NOT EQUAL TO EMPTY STRING THEN
            APPEND word TO split_list
        IF index LESS THAN length_of_music_string AND current_char EQUALS ' ' THEN
            INCREMENT index BY 1
    SET i TO 0
    WHILE i LESS THAN LENGTH OF split_list
        SET x TO ELEMENT AT INDEX i IN split_list
        IF x IN note_map THEN
            APPEND VALUE AT KEY x IN note_map TO result
        INCREMENT i BY 1
    RETURN result