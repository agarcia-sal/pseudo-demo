FUNCTION how_many_times(string : str, substring : str) RETURNS int
    SET times TO 0
    SET string_length TO CALL len WITH ARGUMENTS string
    SET substring_length TO CALL len WITH ARGUMENTS substring
    SET max_index TO string_length MINUS substring_length PLUS 1
    SET i TO 0
    WHILE i LESS THAN max_index
        SET current_slice TO EMPTY STRING
        SET j TO 0
        WHILE j LESS THAN substring_length
            SET current_slice TO current_slice CONCATENATE string AT POSITION i PLUS j
            INCREMENT j BY 1
        END WHILE
        IF current_slice EQUALS substring
            SET times TO times PLUS 1
        END IF
        INCREMENT i BY 1
    END WHILE
    RETURN times