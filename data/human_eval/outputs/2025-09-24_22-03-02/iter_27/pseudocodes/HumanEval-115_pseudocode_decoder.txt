FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_lowers TO 0
    SET index_row TO 0
    WHILE index_row LESS THAN LENGTH OF grid
        SET current_row TO grid AT index_row
        SET sum_units TO 0
        SET index_unit TO 0
        WHILE index_unit LESS THAN LENGTH OF current_row
            SET sum_units TO sum_units PLUS current_row AT index_unit
            INCREMENT index_unit BY 1
        END WHILE
        SET lowers_for_row TO CALL math.ceil WITH ARGUMENT sum_units DIVIDE BY capacity
        SET total_lowers TO total_lowers PLUS lowers_for_row
        INCREMENT index_row BY 1
    END WHILE
    RETURN total_lowers
END FUNCTION