FUNCTION encode(message)
    SET vowels TO "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1
        SET i TO CHARACTER AT vowels AT index
        SET character_code TO CALL ORD WITH ARGUMENT i
        SET new_character_code TO character_code PLUS 2
        SET new_character TO CALL CHR WITH ARGUMENT new_character_code
        SET vowels_replace[i] TO new_character
    END FOR
    SET message TO CALL SWAPCASE METHOD OF message WITH NO ARGUMENTS
    SET encoded_characters TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF message MINUS 1
        SET i TO CHARACTER AT message AT index
        IF i IN vowels THEN
            APPEND vowels_replace[i] TO encoded_characters
        ELSE
            APPEND i TO encoded_characters
        END IF
    END FOR
    SET result TO CONCATENATE ALL ELEMENTS OF encoded_characters INTO A STRING
    RETURN result
END FUNCTION