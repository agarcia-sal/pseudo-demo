FUNCTION anti_shuffle WITH PARAMETER s
    SET split_list TO LIST WITH ELEMENTS EMPTY
    SET length_s TO LENGTH OF s
    SET current_word TO EMPTY STRING
    SET index TO 0
    WHILE index LESS THAN length_s
        IF CHARACTER AT s AT index EQUALS SPACE
            APPEND current_word TO split_list
            APPEND SINGLE SPACE CHARACTER TO split_list
            SET current_word TO EMPTY STRING
        ELSE
            CONCATENATE CHARACTER AT s AT index TO current_word
        INCREMENT index BY 1
    IF current_word NOT EQUAL TO EMPTY STRING
        APPEND current_word TO split_list
    SET result TO EMPTY STRING
    SET i TO 0
    SET total_elements TO LENGTH OF split_list
    WHILE i LESS THAN total_elements
        SET element TO split_list AT i
        IF element EQUALS SINGLE SPACE CHARACTER
            CONCATENATE SINGLE SPACE CHARACTER TO result
        ELSE
            SET char_list TO LIST WITH ELEMENTS EMPTY
            SET j TO 0
            SET length_element TO LENGTH OF element
            WHILE j LESS THAN length_element
                APPEND CHARACTER AT element AT j TO char_list
                INCREMENT j BY 1
            SET k TO 0
            WHILE k LESS THAN LENGTH OF char_list MINUS 1
                SET m TO 0
                WHILE m LESS THAN LENGTH OF char_list MINUS k MINUS 1
                    IF ASCII VALUE OF char_list AT m GREATER THAN ASCII VALUE OF char_list AT m PLUS 1
                        SET temp TO char_list AT m
                        SET char_list AT m TO char_list AT m PLUS 1
                        SET char_list AT m PLUS 1 TO temp
                    INCREMENT m BY 1
                INCREMENT k BY 1
            SET sorted_word TO EMPTY STRING
            SET n TO 0
            WHILE n LESS THAN LENGTH OF char_list
                CONCATENATE char_list AT n TO sorted_word
                INCREMENT n BY 1
            CONCATENATE sorted_word TO result
        INCREMENT i BY 1
    RETURN result