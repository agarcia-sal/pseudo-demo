FUNCTION sort_array WITH PARAMETER arr
    SET sorted_arr TO CALL sorted WITH ARGUMENT arr
    SET sorted_arr TO CALL sorted WITH ARGUMENT sorted_arr AND KEY FUNCTION x
        SET binary_string TO CALL bin WITH ARGUMENT x
        SET binary_substring TO SLICE binary_string FROM INDEX 2 TO END
        SET count_ones TO 0
        SET index TO 0
        WHILE index LESS THAN LENGTH OF binary_substring
            IF CHARACTER AT binary_substring WITH index EQUALS '1'
                INCREMENT count_ones BY 1
            ENDIF
            INCREMENT index BY 1
        ENDWHILE
        RETURN count_ones
    END FUNCTION
    RETURN sorted_arr
END FUNCTION