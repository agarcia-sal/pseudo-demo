FUNCTION parse_music(music_string)
    SET note_map TO DICTIONARY WITH KEYS 'o' MAPPED TO 4, 'o|' MAPPED TO 2, '.|' MAPPED TO 1
    SPLIT music_string BY SPACE INTO note_tokens
    SET beats_list TO EMPTY LIST
    FOR EACH note_token IN note_tokens
        IF note_token IS NOT EMPTY
            APPEND note_map VALUE FOR note_token TO beats_list
    RETURN beats_list