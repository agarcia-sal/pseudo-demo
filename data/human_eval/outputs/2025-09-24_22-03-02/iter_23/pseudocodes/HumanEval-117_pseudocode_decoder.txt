FUNCTION select_words WITH PARAMETERS s, n
    SET result TO LIST WITH ELEMENTS EMPTY
    SET words TO LIST WITH ELEMENTS EMPTY
    SET current_word TO EMPTY STRING
    SET s_length TO LENGTH OF s
    SET index TO 0
    WHILE index LESS THAN s_length
        SET current_char TO CHARACTER AT POSITION index IN s
        IF current_char EQUALS SPACE
            IF current_word NOT EQUAL TO EMPTY STRING
                APPEND current_word TO words
                SET current_word TO EMPTY STRING
            END IF
        ELSE
            CONCATENATE current_char TO current_word
        END IF
        INCREMENT index BY 1
    END WHILE
    IF current_word NOT EQUAL TO EMPTY STRING
        APPEND current_word TO words
    END IF
    SET word_index TO 0
    SET words_count TO LENGTH OF words
    WHILE word_index LESS THAN words_count
        SET word TO ELEMENT AT POSITION word_index IN words
        SET n_consonants TO 0
        SET char_index TO 0
        SET word_length TO LENGTH OF word
        WHILE char_index LESS THAN word_length
            SET char_lower TO CALL LOWERCASE ON CHARACTER AT POSITION char_index IN word
            IF char_lower NOT EQUAL TO "a" AND char_lower NOT EQUAL TO "e" AND char_lower NOT EQUAL TO "i" AND char_lower NOT EQUAL TO "o" AND char_lower NOT EQUAL TO "u"
                INCREMENT n_consonants BY 1
            END IF
            INCREMENT char_index BY 1
        END WHILE
        IF n_consonants EQUALS n
            APPEND word TO result
        END IF
        INCREMENT word_index BY 1
    END WHILE
    RETURN result
END FUNCTION