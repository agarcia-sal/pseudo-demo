FUNCTION encode(message)
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1
        SET character TO CHARACTER AT POSITION index IN vowels
        SET ascii_value TO CALL ORD WITH ARGUMENT character
        SET new_character TO CALL CHR WITH ARGUMENT ascii_value PLUS 2
        SET vowels_replace AT KEY character TO new_character
    END FOR
    SET message TO CALL SWAPCASE METHOD ON message
    SET result_characters TO LIST WITH ELEMENTS EMPTY
    FOR index FROM 0 TO LENGTH OF message MINUS 1
        SET character TO CHARACTER AT POSITION index IN message
        IF character IN vowels THEN
            SET replacement_character TO vowels_replace AT KEY character
            APPEND replacement_character TO result_characters
        ELSE
            APPEND character TO result_characters
        END IF
    END FOR
    SET result TO EMPTY STRING
    FOR index FROM 0 TO LENGTH OF result_characters MINUS 1
        CONCATENATE result WITH CHARACTER AT POSITION index IN result_characters
    END FOR
    RETURN result
END FUNCTION