FUNCTION closest_integer(value)
    IMPORT floor FROM math
    IMPORT ceil FROM math

    IF CALL value.count WITH '.' EQUALS 1
        WHILE value AT INDEX LENGTH OF value MINUS 1 EQUALS '0'
            SET value TO SLICE OF value FROM START TO LENGTH OF value MINUS 1
        END WHILE
    END IF

    SET num TO CALL float WITH value

    IF SLICE OF value FROM LENGTH OF value MINUS 2 TO END EQUALS '.5'
        IF num GREATER THAN 0
            SET res TO CALL ceil WITH num
        ELSE
            SET res TO CALL floor WITH num
        END IF
    ELSE IF LENGTH OF value GREATER THAN 0
        SET res TO CALL round WITH num THEN CONVERT TO int
    ELSE
        SET res TO 0
    END IF

    RETURN res
END FUNCTION