FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_times TO 0
    SET outer_index TO 0
    WHILE outer_index LESS THAN LENGTH OF grid
        SET current_row TO grid AT outer_index
        SET sum_units TO 0
        SET inner_index TO 0
        WHILE inner_index LESS THAN LENGTH OF current_row
            SET sum_units TO sum_units PLUS current_row AT inner_index
            INCREMENT inner_index BY 1
        END WHILE
        SET times_for_row TO CALL math.ceil WITH ARGUMENTS sum_units DIVIDE BY capacity
        SET total_times TO total_times PLUS times_for_row
        INCREMENT outer_index BY 1
    END WHILE
    RETURN total_times
END FUNCTION