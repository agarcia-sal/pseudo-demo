FUNCTION circular_shift(x, shift)
    SET s TO CALL str WITH ARGUMENT x
    IF shift GREATER THAN CALL len WITH ARGUMENT s
        SET result TO EMPTY STRING
        SET index TO CALL len WITH ARGUMENT s MINUS 1
        WHILE index GREATER THAN OR EQUAL TO 0
            SET result TO CONCATENATE result PLUS s AT POSITION index
            DECREMENT index BY 1
        END WHILE
        RETURN result
    ELSE
        SET length TO CALL len WITH ARGUMENT s
        SET first_part TO EMPTY STRING
        SET second_part TO EMPTY STRING
        SET index TO length MINUS shift
        WHILE index LESS THAN length
            SET second_part TO CONCATENATE second_part PLUS s AT POSITION index
            INCREMENT index BY 1
        END WHILE
        SET index TO 0
        WHILE index LESS THAN length MINUS shift
            SET first_part TO CONCATENATE first_part PLUS s AT POSITION index
            INCREMENT index BY 1
        END WHILE
        RETURN CONCATENATE second_part PLUS first_part
    END IF
END FUNCTION