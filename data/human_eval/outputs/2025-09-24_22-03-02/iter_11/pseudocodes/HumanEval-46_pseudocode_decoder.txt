FUNCTION fib4 WITH PARAMETER n
    SET results TO LIST OF 0 COMMA 0 COMMA 2 COMMA 0
    IF n LESS THAN 4
        RETURN results AT INDEX n
    FOR EACH _ IN RANGE FROM 4 TO n PLUS 1
        APPEND TO results THE SUM OF results AT LAST INDEX PLUS results AT SECOND LAST INDEX PLUS results AT THIRD LAST INDEX PLUS results AT FOURTH LAST INDEX
        REMOVE FIRST ELEMENT FROM results
    RETURN last element of results