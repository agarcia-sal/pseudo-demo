FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET total_lowerings TO 0
    FOR EACH arr IN grid
        SET total_units TO 0
        FOR EACH unit IN arr
            SET total_units TO total_units PLUS unit
        SET lowerings TO CALL math.ceil WITH total_units DIVIDE BY capacity
        SET total_lowerings TO total_lowerings PLUS lowerings
    RETURN total_lowerings