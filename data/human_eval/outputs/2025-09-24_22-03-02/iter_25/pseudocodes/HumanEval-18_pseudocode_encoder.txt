FUNCTION how_many_times(string: str, substring: str) RETURNS int
    SET times TO 0
    SET string_length TO CALL len WITH ARGUMENTS string
    SET substring_length TO CALL len WITH ARGUMENTS substring
    SET upper_limit TO string_length MINUS substring_length PLUS 1
    FOR i FROM 0 TO upper_limit MINUS 1
        SET matches_substring TO TRUE
        FOR j FROM 0 TO substring_length MINUS 1
            IF CALL string AT INDEX (i PLUS j) NOT EQUALS CALL substring AT INDEX j
                SET matches_substring TO FALSE
                BREAK
        IF matches_substring EQUALS TRUE
            INCREMENT times BY 1
    RETURN times