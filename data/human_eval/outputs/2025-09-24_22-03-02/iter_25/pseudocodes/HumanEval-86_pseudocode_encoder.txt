FUNCTION anti_shuffle(s STRING) RETURNS STRING
    SET words_list TO LIST WITH ELEMENTS EMPTY
    SET split_words TO LIST WITH ELEMENTS EMPTY
    SET split_words TO CALL s.SPLIT WITH ARGUMENT ' '
    SET index TO 0
    WHILE index LESS THAN LENGTH OF split_words
        SET current_word TO CALL split_words[index]
        SET char_list TO LIST WITH ELEMENTS EMPTY
        SET char_index TO 0
        WHILE char_index LESS THAN LENGTH OF current_word
            CALL APPEND char_list WITH current_word[char_index]
            INCREMENT char_index BY 1
        END WHILE
        CALL char_list SORT ASCENDING BY ASCII VALUE
        SET sorted_word TO EMPTY STRING
        SET char_index TO 0
        WHILE char_index LESS THAN LENGTH OF char_list
            SET sorted_word TO CONCATENATE sorted_word PLUS char_list[char_index]
            INCREMENT char_index BY 1
        END WHILE
        CALL APPEND words_list WITH sorted_word
        INCREMENT index BY 1
    END WHILE
    SET result TO EMPTY STRING
    SET index TO 0
    WHILE index LESS THAN LENGTH OF words_list
        IF index EQUALS 0
            SET result TO words_list[index]
        ELSE
            SET result TO CONCATENATE result PLUS ' ' PLUS words_list[index]
        END IF
        INCREMENT index BY 1
    END WHILE
    RETURN result
END FUNCTION