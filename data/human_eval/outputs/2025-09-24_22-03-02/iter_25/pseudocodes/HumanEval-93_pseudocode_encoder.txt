FUNCTION encode(message)
    SET vowels TO STRING "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    FOR i FROM 0 TO LENGTH OF vowels MINUS 1
        SET current_char TO vowels AT INDEX i
        SET ascii_value TO CALL ord WITH ARGUMENT current_char
        SET new_char_ascii TO ascii_value PLUS 2
        SET new_char TO CALL chr WITH ARGUMENT new_char_ascii
        SET vowels_replace[current_char] TO new_char
    END FOR
    SET swapped_message TO EMPTY STRING
    FOR j FROM 0 TO LENGTH OF message MINUS 1
        SET current_char TO message AT INDEX j
        IF current_char IS GREATER THAN OR EQUAL TO 'a' AND current_char IS LESS THAN OR EQUAL TO 'z' THEN
            SET ascii_value TO CALL ord WITH ARGUMENT current_char
            SET uppercase_ascii TO ascii_value MINUS 32
            SET uppercase_char TO CALL chr WITH ARGUMENT uppercase_ascii
            CONCATENATE uppercase_char TO swapped_message
        ELSE IF current_char IS GREATER THAN OR EQUAL TO 'A' AND current_char IS LESS THAN OR EQUAL TO 'Z' THEN
            SET ascii_value TO CALL ord WITH ARGUMENT current_char
            SET lowercase_ascii TO ascii_value PLUS 32
            SET lowercase_char TO CALL chr WITH ARGUMENT lowercase_ascii
            CONCATENATE lowercase_char TO swapped_message
        ELSE
            CONCATENATE current_char TO swapped_message
        END IF
    END FOR
    SET encoded_message TO EMPTY STRING
    FOR k FROM 0 TO LENGTH OF swapped_message MINUS 1
        SET letter TO swapped_message AT INDEX k
        IF letter IS IN vowels THEN
            SET replacement_char TO vowels_replace[letter]
            CONCATENATE replacement_char TO encoded_message
        ELSE
            CONCATENATE letter TO encoded_message
        END IF
    END FOR
    RETURN encoded_message
END FUNCTION