FUNCTION median(l AS list)
    SET l_sorted TO LIST WITH ELEMENTS EMPTY
    SET l_length TO 0
    FOR i FROM 0 TO LENGTH OF l MINUS 1
        APPEND l[i] TO l_sorted
    END FOR
    CALL l_sorted SORT IN ASCENDING ORDER
    SET l TO l_sorted
    SET l_length TO LENGTH OF l
    SET l_mod_2 TO l_length MODULO 2
    IF l_mod_2 EQUALS 1 THEN
        SET middle_index TO l_length DIVIDED BY 2
        RETURN l[middle_index]
    ELSE
        SET middle_low_index TO (l_length DIVIDED BY 2) MINUS 1
        SET middle_high_index TO (l_length DIVIDED BY 2)
        SET middle_sum TO l[middle_low_index] PLUS l[middle_high_index]
        SET median_value TO middle_sum DIVIDED BY 2.0
        RETURN median_value
    END IF
END FUNCTION