FUNCTION search WITH PARAMETER lst
    SET max_value TO lst AT INDEX 0
    FOR index FROM 1 TO LENGTH OF lst MINUS 1
        IF lst AT INDEX index GREATER THAN max_value
            SET max_value TO lst AT INDEX index
    SET frq TO LIST WITH ELEMENTS 0 REPEATED max_value PLUS 1 TIMES
    FOR index FROM 0 TO LENGTH OF lst MINUS 1
        SET current_element TO lst AT INDEX index
        SET frq AT INDEX current_element TO frq AT INDEX current_element PLUS 1
    SET ans TO -1
    FOR i FROM 1 TO LENGTH OF frq MINUS 1
        IF frq AT INDEX i GREATER THAN OR EQUAL TO i
            SET ans TO i
    RETURN ans