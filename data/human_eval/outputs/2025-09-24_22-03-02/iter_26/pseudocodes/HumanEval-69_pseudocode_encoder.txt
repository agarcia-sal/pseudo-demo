FUNCTION search(lst)
    SET frq TO LIST WITH ELEMENTS EMPTY
    SET max_value TO 0
    FOR index FROM 0 TO LENGTH OF lst MINUS 1
        SET element TO ELEMENT AT index IN lst
        IF element GREATER THAN max_value
            SET max_value TO element
    FOR index FROM 0 TO max_value
        APPEND 0 TO frq
    FOR index FROM 0 TO LENGTH OF lst MINUS 1
        SET element TO ELEMENT AT index IN lst
        SET frq_element TO ELEMENT AT element IN frq
        SET frq_element TO frq_element PLUS 1
        SET ELEMENT AT element IN frq TO frq_element
    SET ans TO -1
    FOR i FROM 1 TO LENGTH OF frq MINUS 1
        SET frq_i TO ELEMENT AT i IN frq
        IF frq_i GREATER THAN OR EQUAL TO i
            SET ans TO i
    RETURN ans
END FUNCTION