FUNCTION anti_shuffle(s)
    SET result_words TO LIST WITH ELEMENTS EMPTY
    SET words TO CALL split METHOD OF s WITH ARGUMENT ' '
    FOR index FROM 0 TO LENGTH OF words MINUS 1
        SET current_word TO ELEMENT AT index IN words
        SET char_list TO LIST WITH ELEMENTS EMPTY
        FOR char_index FROM 0 TO LENGTH OF current_word MINUS 1
            SET char TO ELEMENT AT char_index IN current_word
            APPEND char TO char_list
        SET sorted_char_list TO CALL sorted WITH ARGUMENT char_list
        SET sorted_word TO EMPTY STRING
        FOR sorted_char_index FROM 0 TO LENGTH OF sorted_char_list MINUS 1
            CONCATENATE ELEMENT AT sorted_char_index IN sorted_char_list TO sorted_word
        APPEND sorted_word TO result_words
    SET joined_string TO EMPTY STRING
    FOR result_index FROM 0 TO LENGTH OF result_words MINUS 1
        IF result_index GREATER THAN 0
            CONCATENATE SINGLE SPACE CHARACTER TO joined_string
        CONCATENATE ELEMENT AT result_index IN result_words TO joined_string
    RETURN joined_string
END FUNCTION