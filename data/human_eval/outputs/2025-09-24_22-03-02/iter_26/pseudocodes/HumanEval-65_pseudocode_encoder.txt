FUNCTION circular_shift(x, shift)
    SET s TO CALL str WITH ARGUMENTS x
    IF shift GREATER THAN LENGTH OF s
        SET reversed_string TO EMPTY STRING
        SET index TO LENGTH OF s MINUS 1
        WHILE index GREATER THAN OR EQUAL TO 0
            SET reversed_string TO CONCATENATE reversed_string WITH ELEMENT AT index IN s
            DECREMENT index BY 1
        RETURN reversed_string
    ELSE
        SET right_part TO EMPTY STRING
        SET start_right TO LENGTH OF s MINUS shift
        SET index_right TO start_right
        WHILE index_right LESS THAN LENGTH OF s
            SET right_part TO CONCATENATE right_part WITH ELEMENT AT index_right IN s
            INCREMENT index_right BY 1
        SET left_part TO EMPTY STRING
        SET index_left TO 0
        WHILE index_left LESS THAN start_right
            SET left_part TO CONCATENATE left_part WITH ELEMENT AT index_left IN s
            INCREMENT index_left BY 1
        SET result TO CONCATENATE right_part WITH left_part
        RETURN result
END FUNCTION