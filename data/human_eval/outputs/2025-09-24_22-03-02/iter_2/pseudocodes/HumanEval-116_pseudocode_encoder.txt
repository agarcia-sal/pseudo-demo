FUNCTION sort_array(arr)
    SET sorted_by_value TO SORT(arr)
    SET sorted_by_ones TO SORT(sorted_by_value, KEY FUNCTION(element)
        RETURN COUNT_CHARACTERS(CONVERT_TO_BINARY_STRING(element), '1')
    )
    RETURN sorted_by_ones
END FUNCTION