FUNCTION fib4 WITH PARAMETER n AS INTEGER
    SET results TO LIST OF [0, 0, 2, 0]
    IF n LESS THAN 4 THEN
        RETURN results AT INDEX n
    END IF

    FOR index FROM 4 TO n INCLUSIVE
        SET next_value TO results AT INDEX -1 PLUS results AT INDEX -2 PLUS results AT INDEX -3 PLUS results AT INDEX -4
        APPEND next_value TO results
        REMOVE FIRST ELEMENT FROM results
    END FOR

    RETURN LAST ELEMENT OF results
END FUNCTION