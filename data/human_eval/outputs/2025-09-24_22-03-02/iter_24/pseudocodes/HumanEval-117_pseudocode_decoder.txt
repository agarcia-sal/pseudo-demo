FUNCTION select_words(s, n)  
    SET result TO LIST WITH ELEMENTS EMPTY  
    SET words TO LIST WITH ELEMENTS EMPTY  
    SET current_word TO EMPTY STRING  
    SET index TO 0  
    WHILE index LESS THAN LENGTH OF s  
        SET char TO s AT index  
        IF char EQUALS SPACE  
            IF LENGTH OF current_word GREATER THAN 0  
                APPEND current_word TO words  
                SET current_word TO EMPTY STRING  
            END IF  
        ELSE  
            CONCATENATE current_word WITH char  
        END IF  
        INCREMENT index BY 1  
    END WHILE  
    IF LENGTH OF current_word GREATER THAN 0  
        APPEND current_word TO words  
    END IF  
    SET word_index TO 0  
    WHILE word_index LESS THAN LENGTH OF words  
        SET word TO words AT word_index  
        SET n_consonants TO 0  
        SET char_index TO 0  
        WHILE char_index LESS THAN LENGTH OF word  
            SET letter TO word AT char_index  
            SET letter_lower TO CALL letter.lower WITH NO ARGUMENTS  
            IF letter_lower NOT IN LIST WITH ELEMENTS "a", "e", "i", "o", "u"  
                INCREMENT n_consonants BY 1  
            END IF  
            INCREMENT char_index BY 1  
        END WHILE  
        IF n_consonants EQUALS n  
            APPEND word TO result  
        END IF  
        INCREMENT word_index BY 1  
    END WHILE  
    RETURN result  
END FUNCTION