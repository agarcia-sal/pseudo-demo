FUNCTION fib4(n: int)
    SET results TO LIST WITH ELEMENTS 0, 0, 2, 0
    IF n LESS THAN 4
        RETURN results AT INDEX n
    END IF
    FOR i FROM 4 TO n
        SET new_value TO results AT INDEX 3 PLUS results AT INDEX 2 PLUS results AT INDEX 1 PLUS results AT INDEX 0
        CALL results APPEND WITH ARGUMENTS new_value
        CALL results REMOVE ELEMENT AT INDEX 0
    END FOR
    RETURN results AT INDEX 3
END FUNCTION