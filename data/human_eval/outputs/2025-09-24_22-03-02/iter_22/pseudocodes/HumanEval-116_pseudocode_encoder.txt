FUNCTION sort_array(arr)
    SET n TO LENGTH OF arr
    CALL SORT arr WITH COMPARATOR COMPARE_FUNCTION

    FUNCTION COMPARE_FUNCTION(x, y)
        SET bin_x TO CALL CONVERT_TO_BINARY_STRING_WITHOUT_PREFIX WITH ARGUMENT x
        SET count_ones_x TO CALL COUNT_CHARACTER_IN_STRING WITH ARGUMENTS bin_x, '1'
        SET bin_y TO CALL CONVERT_TO_BINARY_STRING_WITHOUT_PREFIX WITH ARGUMENT y
        SET count_ones_y TO CALL COUNT_CHARACTER_IN_STRING WITH ARGUMENTS bin_y, '1'
        IF count_ones_x LESS THAN count_ones_y
            RETURN TRUE
        ELSE IF count_ones_x EQUALS count_ones_y
            RETURN x LESS THAN y
        ELSE
            RETURN FALSE
        END IF
    END FUNCTION

    FUNCTION CONVERT_TO_BINARY_STRING_WITHOUT_PREFIX(num)
        IF num LESS THAN 0
            SET abs_num TO 0 MINUS num
        ELSE
            SET abs_num TO num
        END IF
        SET binary_string TO EMPTY STRING
        IF abs_num EQUALS 0
            SET binary_string TO "0"
        ELSE
            WHILE abs_num GREATER THAN 0
                SET remainder TO abs_num MODULO 2
                SET abs_num TO abs_num DIVIDED BY 2
                SET remainder_char TO CHARACTER REPRESENTATION OF remainder
                SET binary_string TO remainder_char CONCATENATED WITH binary_string
            END WHILE
        END IF
        RETURN binary_string
    END FUNCTION

    FUNCTION COUNT_CHARACTER_IN_STRING(string, character)
        SET count TO 0
        SET i TO 0
        WHILE i LESS THAN LENGTH OF string
            IF CHARACTER AT INDEX i IN string EQUALS character
                INCREMENT count BY 1
            END IF
            INCREMENT i BY 1
        END WHILE
        RETURN count
    END FUNCTION

    RETURN arr
END FUNCTION