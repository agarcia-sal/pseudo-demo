FUNCTION median(l: list)
    SET l TO CALL sorted WITH ARGUMENTS l
    IF CALL len WITH ARGUMENTS l MODULO 2 EQUALS 1 THEN
        SET index TO CALL len WITH ARGUMENTS l DIVIDE BY 2
        RETURN l AT index
    ELSE
        SET mid1 TO CALL len WITH ARGUMENTS l DIVIDE BY 2 MINUS 1
        SET mid2 TO CALL len WITH ARGUMENTS l DIVIDE BY 2
        SET sum TO l AT mid1 PLUS l AT mid2
        RETURN sum DIVIDE BY 2.0
    END IF
END FUNCTION