FUNCTION max_fill(grid, capacity)
    SET total_lowerings TO 0
    FOR i FROM 0 TO LENGTH OF grid MINUS 1
        SET current_row TO grid AT i
        SET sum_units TO 0
        FOR j FROM 0 TO LENGTH OF current_row MINUS 1
            SET sum_units TO sum_units PLUS current_row AT j
        END FOR
        IF sum_units MODULO capacity EQUALS 0
            SET lowers_for_row TO sum_units DIVIDE BY capacity
        ELSE
            SET lowers_for_row TO (sum_units DIVIDE BY capacity) PLUS 1
        END IF
        SET total_lowerings TO total_lowerings PLUS lowers_for_row
    END FOR
    RETURN total_lowerings
END FUNCTION