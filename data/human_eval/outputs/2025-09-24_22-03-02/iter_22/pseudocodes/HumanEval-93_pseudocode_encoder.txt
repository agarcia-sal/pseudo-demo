FUNCTION encode(message : STRING) RETURNS STRING
    SET vowels TO "aeiouAEIOU"
    SET vowels_replace TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH OF vowels MINUS 1
        SET letter TO vowels AT index
        SET ascii_value TO CALL ord WITH ARGUMENTS letter
        SET replacement_ascii TO ascii_value PLUS 2
        SET replacement_letter TO CALL chr WITH ARGUMENTS replacement_ascii
        SET vowels_replace AT KEY letter TO replacement_letter
    END FOR
    SET message TO CALL swapcase METHOD OF message WITH NO ARGUMENTS
    SET encoded_message TO EMPTY LIST
    FOR index FROM 0 TO LENGTH OF message MINUS 1
        SET current_char TO message AT index
        IF current_char IN vowels THEN
            SET replacement_char TO vowels_replace AT KEY current_char
            APPEND replacement_char TO encoded_message
        ELSE
            APPEND current_char TO encoded_message
        END IF
    END FOR
    SET result TO EMPTY STRING
    FOR index FROM 0 TO LENGTH OF encoded_message MINUS 1
        SET result TO result PLUS encoded_message AT index
    END FOR
    RETURN result
END FUNCTION