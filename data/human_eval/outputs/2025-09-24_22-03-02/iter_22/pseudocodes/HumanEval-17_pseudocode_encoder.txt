FUNCTION parse_music(music_string AS str) RETURNS List[int]
    SET note_map TO DICTIONARY WITH KEYS VALUES 'o' EQUALS 4, 'o|' EQUALS 2, '.|' EQUALS 1
    SET split_notes TO CALL music_string SPLIT WITH ARGUMENTS ' '
    SET result TO EMPTY LIST OF int
    SET i TO 0
    WHILE i LESS THAN LENGTH OF split_notes
        SET x TO split_notes AT INDEX i
        IF x NOT EQUAL TO EMPTY STRING
            CALL APPEND ON result WITH ARGUMENT note_map AT KEY x
        END IF
        INCREMENT i BY 1
    END WHILE
    RETURN result
END FUNCTION