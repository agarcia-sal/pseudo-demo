FUNCTION encode WITH PARAMETER message
    SET vowels TO LIST WITH ELEMENTS 'a', 'e', 'i', 'o', 'u', 'A', 'E', 'I', 'O', 'U'
    SET vowels_replace TO EMPTY DICTIONARY
    SET index TO 0
    WHILE index LESS THAN LENGTH OF vowels
        SET vowel_char TO ELEMENT AT index OF vowels
        SET vowel_char_code TO CALL function ord WITH ARGUMENTS vowel_char
        SET replacement_char_code TO vowel_char_code PLUS 2
        SET replacement_char TO CALL function chr WITH ARGUMENTS replacement_char_code
        SET ITEM IN vowels_replace WITH KEY vowel_char TO replacement_char
        INCREMENT index BY 1
    END WHILE
    SET message TO CALL method swapcase ON message WITH ARGUMENTS NONE
    SET result_chars TO EMPTY LIST
    SET index TO 0
    WHILE index LESS THAN LENGTH OF message
        SET current_char TO ELEMENT AT index OF message
        IF current_char IN vowels
            SET APPEND_CHAR TO ITEM IN vowels_replace WITH KEY current_char
        ELSE
            SET APPEND_CHAR TO current_char
        END IF
        CALL method append ON result_chars WITH ARGUMENTS APPEND_CHAR
        INCREMENT index BY 1
    END WHILE
    SET encoded_message TO CALL function join ON STRING WITH ARGUMENTS result_chars
    RETURN encoded_message
END FUNCTION