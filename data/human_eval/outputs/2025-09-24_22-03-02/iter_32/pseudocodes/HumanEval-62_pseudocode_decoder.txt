FUNCTION derivative WITH PARAMETER xs OF TYPE list
    SET result TO LIST WITH ELEMENTS EMPTY
    SET length TO CALL LENGTH OF xs
    SET i TO 0
    WHILE i LESS THAN length
        SET x TO ELEMENT OF xs AT INDEX i
        SET product TO i MULTIPLY x
        APPEND product TO result
        SET i TO i PLUS 1
    END WHILE
    SET derivative_result TO LIST WITH ELEMENTS EMPTY
    SET j TO 1
    SET result_length TO CALL LENGTH OF result
    WHILE j LESS THAN result_length
        SET element TO ELEMENT OF result AT INDEX j
        APPEND element TO derivative_result
        SET j TO j PLUS 1
    END WHILE
    RETURN derivative_result