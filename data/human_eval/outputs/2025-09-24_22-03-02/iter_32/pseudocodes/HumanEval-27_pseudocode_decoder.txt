FUNCTION flip_case WITH PARAMETER string OF TYPE str RETURNS str
    SET result TO EMPTY STRING
    SET index TO 0
    WHILE index LESS THAN LENGTH OF string
        SET character TO CHARACTER AT string AT index
        IF character GREATER THAN OR EQUAL TO "a" AND character LESS THAN OR EQUAL TO "z"
            SET uppercase_character TO CALL character TO UPPERCASE
            CONCATENATE uppercase_character TO result
        ELSE IF character GREATER THAN OR EQUAL TO "A" AND character LESS THAN OR EQUAL TO "Z"
            SET lowercase_character TO CALL character TO LOWERCASE
            CONCATENATE lowercase_character TO result
        ELSE
            CONCATENATE character TO result
        END IF
        INCREMENT index BY 1
    END WHILE
    RETURN result