FUNCTION search WITH PARAMETER lst
    SET max_value TO lst AT INDEX zero
    SET index TO zero
    WHILE index LESS THAN LENGTH OF lst
        IF lst AT INDEX index GREATER THAN max_value
            SET max_value TO lst AT INDEX index
        END IF
        INCREMENT index BY 1
    END WHILE

    SET frq TO LIST WITH ELEMENTS ZERO REPEATED (max_value PLUS 1) TIMES

    SET index TO zero
    WHILE index LESS THAN LENGTH OF lst
        SET i TO lst AT INDEX index
        SET frq AT INDEX i TO frq AT INDEX i PLUS 1
        INCREMENT index BY 1
    END WHILE

    SET ans TO negative 1

    SET i TO 1
    WHILE i LESS THAN LENGTH OF frq
        IF frq AT INDEX i GREATER THAN OR EQUAL TO i
            SET ans TO i
        END IF
        INCREMENT i BY 1
    END WHILE

    RETURN ans