FUNCTION circular_shift(x, shift)
    SET s TO CALL str WITH ARGUMENTS x
    IF shift GREATER THAN CALL len WITH ARGUMENTS s
        SET result TO EMPTY STRING
        SET index TO CALL len WITH ARGUMENTS s MINUS 1
        WHILE index GREATER THAN OR EQUAL TO 0
            SET result TO CONCATENATE result WITH s AT INDEX index
            DECREMENT index BY 1
        END WHILE
        RETURN result
    ELSE
        SET length TO CALL len WITH ARGUMENTS s
        SET part1_start TO length MINUS shift
        SET part1 TO EMPTY STRING
        SET index_part1 TO part1_start
        WHILE index_part1 LESS THAN length
            SET part1 TO CONCATENATE part1 WITH s AT INDEX index_part1
            INCREMENT index_part1 BY 1
        END WHILE
        SET part2 TO EMPTY STRING
        SET index_part2 TO 0
        WHILE index_part2 LESS THAN part1_start
            SET part2 TO CONCATENATE part2 WITH s AT INDEX index_part2
            INCREMENT index_part2 BY 1
        END WHILE
        RETURN CONCATENATE part1 WITH part2
    END IF
END FUNCTION