FUNCTION median WITH PARAMETER l
    SET l TO CALL sorted WITH ARGUMENTS l
    SET length TO CALL len WITH ARGUMENTS l
    SET remainder TO length MODULO 2
    IF remainder EQUALS 1
        SET middle_index TO length DIVIDED BY 2
        SET result TO l AT INDEX middle_index
        RETURN result
    ELSE
        SET middle_left_index TO (length DIVIDED BY 2) MINUS 1
        SET middle_right_index TO length DIVIDED BY 2
        SET sum_of_middles TO l AT INDEX middle_left_index PLUS l AT INDEX middle_right_index
        SET result TO sum_of_middles DIVIDED BY 2.0
        RETURN result