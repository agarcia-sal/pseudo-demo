CLASS Solution  
    FUNCTION maximumSubtreeSize WITH PARAMETERS edges colors  
        CREATE tree AS a new mapping from keys to empty lists  
        FOR each pair u and v IN edges  
            APPEND v TO the list at key u in tree  
            APPEND u TO the list at key v in tree  
        END FOR  
        SET the property result TO one  
        FUNCTION dfs WITH PARAMETERS node parent  
            SET same_color_count TO one  
            SET all_children_same_color TO true  
            FOR each neighbor IN the list at key node in tree  
                IF neighbor NOT EQUALS parent THEN  
                    SET child_count TO the result of dfs called with neighbor and node  
                    IF child_count EQUALS zero THEN  
                        SET all_children_same_color TO false  
                    ELSE IF the element at position neighbor of colors EQUALS the element at position node of colors THEN  
                        INCREMENT same_color_count BY child_count  
                    ELSE  
                        SET all_children_same_color TO false  
                    END IF  
                END IF  
            END FOR  
            IF all_children_same_color THEN  
                SET result TO the greater value BETWEEN result AND same_color_count  
                RETURN same_color_count  
            ELSE  
                RETURN zero  
            END IF  
        END FUNCTION  
        CALL dfs WITH arguments zero and negative one  
        RETURN result  
    END FUNCTION  
END CLASS