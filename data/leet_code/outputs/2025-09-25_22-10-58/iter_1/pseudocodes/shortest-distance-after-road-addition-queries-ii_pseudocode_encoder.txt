CLASS Solution  
    FUNCTION shortestDistanceAfterQueries(n, queries)  
        SET graph TO empty collection associating each integer from zero TO n MINUS one WITH an empty list  
        FOR i FROM zero TO n MINUS two  
            APPEND the tuple of the integer at i PLUS one AND one TO the list associated with i IN graph  
        END FOR  
        
        FUNCTION dijkstra()  
            SET dist TO a list WHERE each element IS positive infinity OF length n  
            SET the element at position zero of dist TO zero  
            SET pq TO a list containing a single tuple of zero AND zero  
            
            WHILE the LENGTH OF pq is greater than zero  
                REMOVE and GET the tuple with the smallest first element FROM pq INTO current_dist AND current_node  
                
                IF current_dist IS GREATER THAN the element at position current_node of dist  
                    CONTINUE TO the next iteration  
                END IF  
                
                FOR each tuple neighbor_weight IN the list associated with current_node IN graph  
                    DECOMPOSE neighbor_weight INTO neighbor AND weight  
                    SET distance TO current_dist PLUS weight  
                    
                    IF distance IS LESS THAN the element at position neighbor of dist  
                        SET the element at position neighbor of dist TO distance  
                        ADD the tuple of distance AND neighbor INTO pq preserving heap property  
                    END IF  
                END FOR  
            END WHILE  
            
            RETURN the element at position n MINUS one of dist  
        END FUNCTION  
        
        SET result TO an empty list  
        FOR each tuple u_v IN queries  
            DECOMPOSE u_v INTO u AND v  
            APPEND the tuple of v AND one TO the list associated with u IN graph  
            APPEND the result of calling dijkstra() TO result  
        END FOR  
        
        RETURN result  
    END FUNCTION  
END CLASS