CLASS Solution  
    FUNCTION maximumSubarraySum(nums k)  
        SET min_prefix_sum TO empty dictionary  
        SET max_sum TO negative infinity  
        SET current_sum TO zero  
        
        FOR each num IN nums  
            IF the element at position num MINUS k EXISTS IN min_prefix_sum  
                SET max_sum TO the GREATER THAN value BETWEEN max_sum AND current_sum MINUS the element at position num MINUS k OF min_prefix_sum PLUS num  
            END IF  
            IF the element at position num PLUS k EXISTS IN min_prefix_sum  
                SET max_sum TO the GREATER THAN value BETWEEN max_sum AND current_sum MINUS the element at position num PLUS k OF min_prefix_sum PLUS num  
            END IF  
            
            IF the element at position num EXISTS IN min_prefix_sum  
                SET the element at position num OF min_prefix_sum TO the SMALLER THAN value BETWEEN the element at position num OF min_prefix_sum AND current_sum  
            ELSE  
                SET the element at position num OF min_prefix_sum TO current_sum  
            END IF  
            
            INCREMENT current_sum BY num  
        END FOR  
        
        IF max_sum NOT EQUALS negative infinity  
            RETURN max_sum  
        ELSE  
            RETURN zero  
        END IF  
    END FUNCTION  
END CLASS