CLASS Solution  
    FUNCTION countMatchingSubarrays(nums, pattern)  
        FUNCTION get_relationship(num1, num2)  
            IF num1 LESS THAN num2  
                RETURN one  
            ELSE IF num1 EQUALS num2  
                RETURN zero  
            ELSE  
                RETURN minus one  
            END IF  
        END FUNCTION  
        
        SET n TO the LENGTH OF nums  
        SET m TO the LENGTH OF pattern  
        SET count TO zero  
        
        SET relationships TO an empty list  
        FOR index FROM zero TO n MINUS two  
            APPEND the RESULT OF get_relationship with element at position index of nums AND element at position index PLUS one of nums TO relationships  
        END FOR  
        
        FOR index FROM zero TO n MINUS m MINUS one  
            IF the SUBLIST of relationships from position index TO position index PLUS m MINUS one EQUALS pattern  
                INCREMENT count BY one  
            END IF  
        END FOR  
        
        RETURN count  
    END FUNCTION  
END CLASS