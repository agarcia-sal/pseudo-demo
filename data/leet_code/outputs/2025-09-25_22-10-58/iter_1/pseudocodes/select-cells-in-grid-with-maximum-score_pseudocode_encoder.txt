CLASS Solution  
    FUNCTION maxScore(grid)  
        FUNCTION backtrack(row, used, current_sum)  
            IF row EQUALS the LENGTH OF grid THEN  
                SET max_sum TO the GREATER OF max_sum AND current_sum  
                RETURN  
            END IF  
            CALL backtrack WITH the value of row PLUS one AS row AND used AS used AND current_sum AS current_sum  
            FOR each val IN the element at position row of grid  
                IF val NOT IN used THEN  
                    ADD val TO used  
                    CALL backtrack WITH the value of row PLUS one AS row AND used AS used AND current_sum PLUS val AS current_sum  
                    REMOVE val FROM used  
                END IF  
            END FOR  
        END FUNCTION  
        FOR each row IN grid  
            SORT row IN descending order  
        END FOR  
        SET max_sum TO zero  
        CALL backtrack WITH zero AS row AND an empty set AS used AND zero AS current_sum  
        RETURN max_sum  
    END FUNCTION  
END CLASS