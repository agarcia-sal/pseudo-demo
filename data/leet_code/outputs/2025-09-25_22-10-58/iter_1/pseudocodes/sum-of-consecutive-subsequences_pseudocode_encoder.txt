CLASS Solution  
    FUNCTION getSum(nums)  
        FUNCTION calc(nums)  
            SET n TO the LENGTH OF nums  
            SET left TO a list of zeros WITH the LENGTH OF n  
            SET right TO a list of zeros WITH the LENGTH OF n  
            SET cnt TO a new counter object  
            FOR i FROM one TO n MINUS one  
                INCREMENT the count at key element at position i MINUS one of nums BY one PLUS the count at key element at position i MINUS one MINUS one of cnt  
                SET element at position i of left TO the count at key element at position i MINUS one of nums  
            END FOR  
            SET cnt TO a new counter object  
            FOR i FROM n MINUS two DOWN TO zero  
                INCREMENT the count at key element at position i PLUS one of nums BY one PLUS the count at key element at position i PLUS one PLUS one of cnt  
                SET element at position i of right TO the count at key element at position i PLUS one of nums  
            END FOR  
            SET total_sum TO zero  
            FOR each triple l r x IN parallel ITERATION of left right nums  
                INCREMENT total_sum BY (l PLUS r PLUS l MULTIPLIED BY r) MULTIPLIED BY x  
            END FOR  
            RETURN total_sum MODULO mod  
        END FUNCTION  

        SET mod TO ten RAISED TO the power of nine PLUS seven  
        SET x TO the result of calc APPLIED TO nums  
        REVERSE the order of elements in nums  
        SET y TO the result of calc APPLIED TO nums  
        RETURN the sum of x PLUS y PLUS the sum of elements in nums MODULO mod  
    END FUNCTION  
END CLASS