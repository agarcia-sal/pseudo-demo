CLASS Solution  
    FUNCTION maximumStrength(nums k)  
        SET n TO the LENGTH OF nums  
        SET dp TO a list OF lists EACH initialized TO negative infinity WITH size n PLUS one BY k PLUS one  
        SET element at position zero AND zero of dp TO zero  
        
        FOR i FROM one TO n  
            FOR j FROM one TO k  
                SET current_sum TO zero  
                FOR end FROM i DOWN TO one  
                    INCREMENT current_sum BY element at position end MINUS one of nums  
                    IF j MODULO two EQUALS one  
                        SET sign TO k MINUS j MINUS one PLUS one  
                    ELSE  
                        SET sign TO NEGATIVE k MINUS j MINUS one PLUS one  
                    END IF  
                    SET dp at position i AND j TO the MAXIMUM OF dp at position i AND j AND dp at position end MINUS one AND j MINUS one PLUS sign MULTIPLIED BY current_sum  
                END FOR  
                SET dp at position i AND j TO the MAXIMUM OF dp at position i AND j AND dp at position i MINUS one AND j  
            END FOR  
        END FOR  
        
        RETURN dp at position n AND k  
    END FUNCTION  
END CLASS