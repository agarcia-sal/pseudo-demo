CLASS Solution  
    FUNCTION constructGridLayout(n, edges)  
        SET g TO a new list containing n empty lists  
        FOR each pair u and v IN edges  
            APPEND v TO element at position u of g  
            APPEND u TO element at position v of g  
        END FOR  
        SET deg TO a new list containing five elements all set TO negative one  
        FOR each index x and element ys IN g with indices  
            SET element at position length of ys in deg TO x  
        END FOR  
        IF element at position one of deg NOT EQUALS negative one THEN  
            SET row TO a new list containing element at position one of deg  
        ELSE IF element at position four of deg EQUALS negative one THEN  
            SET x TO element at position two of deg  
            FOR each element y IN element at position x of g  
                IF length of element y of g EQUALS two THEN  
                    SET row TO a new list containing x and y  
                    EXIT THE LOOP  
                END IF  
            END FOR  
        ELSE  
            SET x TO element at position two of deg  
            SET row TO a new list containing x  
            SET pre TO x  
            SET x TO element at position zero of element at position x of g  
            WHILE length of element x of g GREATER THAN two  
                APPEND x TO row  
                FOR each element y IN element at position x of g  
                    IF y NOT EQUALS pre AND length of element y of g LESS THAN four THEN  
                        SET pre TO x  
                        SET x TO y  
                        EXIT THE LOOP  
                    END IF  
                END FOR  
            END WHILE  
            APPEND x TO row  
        END IF  

        SET ans TO a new list containing row  
        SET vis TO a new list containing n elements all set TO false  
        FOR each iteration FROM one TO n DIVIDED BY length of row MINUS one  
            FOR each element x IN row  
                SET element at position x in vis TO true  
            END FOR  
            SET nxt TO an empty list  
            FOR each element x IN row  
                FOR each element y IN element at position x of g  
                    IF element at position y of vis EQUALS false THEN  
                        APPEND y TO nxt  
                        EXIT THE LOOP  
                    END IF  
                END FOR  
            END FOR  
            APPEND nxt TO ans  
            SET row TO nxt  
        END FOR  
        RETURN ans  
    END FUNCTION  
END CLASS