CLASS Solution  
    FUNCTION maxSubarraySum(nums)  
        FUNCTION kadane(arr)  
            SET max_ending_here TO element at position one of arr  
            SET max_so_far TO element at position one of arr  
            FOR each x IN arr starting from position two TO the end  
                IF x GREATER THAN max_ending_here PLUS x  
                    SET max_ending_here TO x  
                ELSE  
                    SET max_ending_here TO max_ending_here PLUS x  
                END IF  
                IF max_so_far LESS THAN max_ending_here  
                    SET max_so_far TO max_ending_here  
                END IF  
            END FOR  
            RETURN max_so_far  
        END FUNCTION  

        SET max_sum TO result of calling kadane with nums  
        SET unique_elements TO the set of unique elements of nums  
        FOR each x IN unique_elements  
            SET modified_nums TO empty list  
            FOR each num IN nums  
                IF num NOT EQUALS x  
                    APPEND num TO modified_nums  
                END IF  
            END FOR  
            IF the LENGTH OF modified_nums GREATER THAN zero  
                IF max_sum LESS THAN result of calling kadane with modified_nums  
                    SET max_sum TO result of calling kadane with modified_nums  
                END IF  
            END IF  
        END FOR  
        RETURN max_sum  
    END FUNCTION  
END CLASS