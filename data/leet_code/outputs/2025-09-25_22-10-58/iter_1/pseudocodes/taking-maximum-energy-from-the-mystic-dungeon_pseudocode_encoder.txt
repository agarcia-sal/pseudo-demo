CLASS Solution  
    FUNCTION maximumEnergy(energy, k)  
        SET n TO the LENGTH OF energy  
        SET dp TO a list of zeros with the LENGTH n  
        SET the element at the last position of dp TO the element at the last position of energy  
        SET max_energy TO the element at the last position of dp  
        ASSIGN reference TO a deque containing the element of n MINUS one as single element  
        
        FOR i FROM n MINUS two DOWN TO zero  
            IF the element at position zero of the deque MINUS i GREATER THAN OR EQUAL TO k  
                REMOVE the element at position zero FROM the deque  
            END IF  
            
            SET the element at position i of dp TO the element at position i of energy PLUS the element at position of the element at position zero of the deque of dp  
            
            IF max_energy LESS THAN the element at position i of dp  
                SET max_energy TO the element at position i of dp  
            END IF  
            
            WHILE the deque IS NOT empty AND the element at position i of dp GREATER THAN OR EQUAL TO the element at the element at the last position of the deque of dp  
                REMOVE the element at the last position FROM the deque  
            END WHILE  
            
            APPEND i TO the deque  
        END FOR  
        
        RETURN max_energy  
    END FUNCTION  
END CLASS