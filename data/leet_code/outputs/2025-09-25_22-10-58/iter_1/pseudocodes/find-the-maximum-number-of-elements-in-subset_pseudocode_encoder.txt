CLASS Solution  
    FUNCTION maximumLength(nums)  
        SET count TO the number of occurrences of each element in nums  
        SET dp TO an empty mapping from numbers to their computed lengths  
        
        FUNCTION helper(x)  
            IF x IS NOT an element in count OR the number of occurrences of x in count IS LESS THAN two THEN  
                IF x IS an element in count AND the number of occurrences of x in count IS GREATER THAN OR EQUAL TO one THEN  
                    RETURN one  
                ELSE  
                    RETURN zero  
                END IF  
            END IF  
            IF x IS an element in dp THEN  
                RETURN the value associated with x in dp  
            END IF  
            SET next_x TO x MULTIPLIED BY x  
            SET the value associated with x in dp TO the result of helper applied to next_x PLUS two  
            RETURN the value associated with x in dp  
        END FUNCTION  
        
        SET max_length TO one  
        FOR each num IN count  
            IF num EQUALS one THEN  
                SET max_length TO the greater value between max_length AND the number of occurrences of num in count MINUS one MINUS the remainder of the number of occurrences of num in count DIVIDED BY two MULTIPLIED BY two  
            ELSE  
                SET max_length TO the greater value between max_length AND the result of helper applied to num  
            END IF  
        END FOR  
        
        RETURN max_length  
    END FUNCTION  
END CLASS