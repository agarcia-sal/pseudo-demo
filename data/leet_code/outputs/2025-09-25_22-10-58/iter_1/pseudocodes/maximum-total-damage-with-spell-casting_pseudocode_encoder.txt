CLASS Solution  
    FUNCTION maximumTotalDamage(power)  
        SET count TO a mapping of each element in power to the number of its occurrences  
        SET unique_powers TO the sorted list of keys in count  
        SET dp TO an empty mapping  
        FOR index FROM zero TO the length of unique_powers MINUS one  
            SET p TO element at position index of unique_powers  
            IF index GREATER THAN zero  
                SET exclude TO the value corresponding to element at position index MINUS one of unique_powers in dp IF it EXISTS OTHERWISE zero  
            ELSE  
                SET exclude TO zero  
            END IF  
            SET include TO p MULTIPLIED BY the value corresponding to p in count  
            SET j TO index MINUS one  
            WHILE j GREATER THAN OR EQUAL TO zero AND element at position j of unique_powers GREATER THAN OR EQUAL TO p MINUS two  
                DECREMENT j BY one  
            END WHILE  
            IF j GREATER THAN OR EQUAL TO zero  
                INCREMENT include BY the value corresponding to element at position j of unique_powers in dp  
            END IF  
            SET the value corresponding to p in dp TO the maximum of include AND exclude  
        END FOR  
        RETURN the maximum value among all values in dp  
    END FUNCTION  
END CLASS