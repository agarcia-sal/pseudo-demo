FUNCTION fix_spaces(input_string)
    DECLARE result_string AS empty string
    DECLARE pos_counter AS 0
    DECLARE gap_start AS 0
    DECLARE gap_end AS 0
    
    REPEAT WHILE pos_counter < LENGTH OF input_string
        IF NOT (input_string[pos_counter] <> " ")
            SET gap_end TO gap_end + 1
        OTHERWISE
            IF (gap_end - gap_start) > 2 THEN
                result_string = result_string + "-" + input_string[pos_counter]
            ELSE IF (gap_end - gap_start) > 0
                result_string = result_string + REPEAT("_", gap_end - gap_start) + input_string[pos_counter]
            ELSE
                result_string = result_string + input_string[pos_counter]
            
            gap_start = pos_counter + 1
            gap_end = pos_counter + 1
        
        pos_counter = pos_counter + 1
    END REPEAT
    
    IF NOT ((gap_end - gap_start) <= 2)
        result_string = result_string + "-"
    ELSE IF NOT ((gap_end - gap_start) <= 0)
        result_string = result_string + "_"
    
    RETURN result_string
END FUNCTION