FUNCTION sum_squares(sequence_of_numbers)
  
  PROCEDURE accumulate(position, collected)
    IF NOT (position < COUNT sequence_of_numbers) THEN
      EXECUTE STOP AND RETURN (DELIVER SUM collected)
    ENDIF

    EXECUTE
      SWITCH TRUE
        CASE (position % 3 = 0):
          EXECUTE accumulate(position + 1, collected + [sequence_of_numbers[position] ^ 2])
        CASE ((position % 4 = 0) AND NOT (position % 3 = 0)):
          EXECUTE accumulate(position + 1, collected + [sequence_of_numbers[position] ^ 3])
        DEFAULT:
          EXECUTE accumulate(position + 1, collected + [sequence_of_numbers[position]])
      ENDSWITCH
  ENDPROCEDURE

  INVOKE accumulate(0, [])
  
END FUNCTION