FUNCTION order_by_points(list_of_numbers)
{
  FUNCTION digits_sum(number)
  {
    SET polarity TO 1
    EXECUTE 
      SWITCH (number < 0) DO
        CASE TRUE:
          SET number TO -number
          SET polarity TO -1
        DEFAULT:
          HALT
      END SWITCH
    SET digits_sequence TO MAP(LAMBDA char -> CONVERT char TO INTEGER, SPLIT TO CHARACTERS(TO STRING(number)))
    SET digits_sequence[0] TO digits_sequence[0] * polarity
    RETURN REDUCE(LAMBDA acc, elem -> acc + elem, digits_sequence, 0)
  }
  RETURN SORT(list_of_numbers, BY: digits_sum)
}