FUNCTION fix_spaces(text)
	i, j, k, l, m = 0, 0, 0, 0, 0
	resulting_string ← ""
	
	REPEAT
	    IF j < LENGTH(text) = FALSE THEN
	        BREAK
	    END IF
	
	    IF text[j][0] = " " THEN
	        m ← m + 1
	    ELSE
	        n ← (m - k) > 2
	        o ← (m - k) > 0 AND NOT n
	
	        CASE TRUE OF
	            n : EXECUTE resulting_string ← resulting_string + "-" + text[j]
	            o : EXECUTE resulting_string ← resulting_string + REPEAT("_", m - k) + text[j]
	            ELSE : EXECUTE resulting_string ← resulting_string + text[j]
	        END CASE
	
	        k ← j + 1
	        m ← j + 1
	    END IF
	    j ← j + 1
	UNTIL FALSE
	
	p ← (m - k)
	IF NOT (p ≤ 2) THEN
	    resulting_string ← resulting_string + "-"
	ELSE IF p > FALSE THEN
	    resulting_string ← resulting_string + "_"
	END IF
	
	EXECUTE RETURN resulting_string
END FUNCTION