CLASS Solution
    FUNCTION maxSelectedElements(nums)
        LET maximumCount = 0
        LET records = {}
        LET sortedValues = sort(nums)
        
        LET index = 0
        WHILE index < length(sortedValues)
            LET currentNumber = sortedValues[index]
            
            LET prevVal = records[currentNumber - 1]
            IF prevVal == null THEN prevVal = 0 END IF
            LET plusOneVal = records[currentNumber + 1]
            IF plusOneVal == null THEN plusOneVal = 0 END IF
            
            records[currentNumber + 1] = plusOneVal + 1
            records[currentNumber] = prevVal + 1
            
            LET currentMax1 = maximumCount
            LET currentMax2 = records[currentNumber]
            LET currentMax3 = records[currentNumber + 1]
            
            IF currentMax2 > currentMax1 THEN
                maximumCount = currentMax2
            END IF
            IF currentMax3 > maximumCount THEN
                maximumCount = currentMax3
            END IF
            
            index = index + 1
        END WHILE
        
        RETURN maximumCount
    END FUNCTION
END CLASS