CLASS Solution
    FUNCTION maxBottlesDrunk(numBottles numBottles numExchange numExchange)
        LET consumedCount <- 0
        LET empties <- 0
        REPEAT WHILE numBottles <> 0
            consumedCount <- consumedCount + numBottles
            empties <- empties + numBottles
            LET numBottles <- 0
            REPEAT WHILE empties >= numExchange
                empties <- empties - numExchange
                numBottles <- numBottles + 1
                numExchange <- numExchange + 1
            END REPEAT
        END REPEAT
        RETURN consumedCount
    END FUNCTION
END CLASS