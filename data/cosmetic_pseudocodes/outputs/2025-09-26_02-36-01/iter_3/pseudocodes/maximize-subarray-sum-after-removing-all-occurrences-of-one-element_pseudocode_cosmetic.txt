CLASS Solution
    FUNCTION maxSubarraySum(nums)
        FUNCTION kadane(arr)
            SET best_ending TO arr[0]
            SET best_global TO arr[0]
            SET index TO 1
            WHILE index LESS THAN LENGTH OF arr
                SET current_value TO arr[index]
                IF current_value GREATER THAN best_ending PLUS current_value
                    ASSIGN best_ending TO current_value
                ELSE
                    ASSIGN best_ending TO best_ending PLUS current_value
                END IF
                IF best_global LESS THAN best_ending
                    ASSIGN best_global TO best_ending
                END IF
                INCREMENT index BY 1
            END WHILE
            RETURN best_global
        END FUNCTION

        SET maximum_sum TO kadane(nums)
        SET distinct_vals TO EMPTY SET
        FOR i FROM 0 TO LENGTH OF nums MINUS 1
            ADD nums[i] TO distinct_vals
        END FOR

        FOR val IN distinct_vals
            SET filtered_list TO EMPTY LIST
            SET counter TO 0
            WHILE counter LESS THAN LENGTH OF nums
                SET current_num TO nums[counter]
                IF current_num NOT EQUAL TO val
                    ADD current_num TO filtered_list
                END IF
                counter = counter + 1
            END WHILE
            IF LENGTH OF filtered_list GREATER THAN 0
                SET candidate_sum TO kadane(filtered_list)
                IF maximum_sum LESS THAN candidate_sum
                    ASSIGN maximum_sum TO candidate_sum
                END IF
            END IF
        END FOR

        RETURN maximum_sum
    END FUNCTION
END CLASS