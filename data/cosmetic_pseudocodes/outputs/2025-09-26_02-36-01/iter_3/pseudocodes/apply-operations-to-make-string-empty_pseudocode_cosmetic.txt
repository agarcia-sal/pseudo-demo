CLASS Solution
    FUNCTION lastNonEmptyString(s)
        DECLARE freqMap = empty map
        DECLARE idx = 0
        WHILE idx < LENGTH(s)
            DECLARE currentChar = s[idx]
            IF currentChar IN freqMap THEN
                freqMap[currentChar] = freqMap[currentChar] + 1
            ELSE
                freqMap[currentChar] = 1
            END IF
            idx = idx + 1
        END WHILE

        DECLARE highestFreq = 0
        FOR EACH key IN freqMap KEYS
            IF NOT (freqMap[key] < highestFreq) THEN
                highestFreq = freqMap[key]
            END IF
        END FOR

        DECLARE charsWithMaxFreq = empty set
        FOR EACH key IN freqMap KEYS
            IF freqMap[key] = highestFreq THEN
                ADD key TO charsWithMaxFreq
            END IF
        END FOR

        DECLARE collectedChars = empty list
        DECLARE pos = LENGTH(s) - 1
        WHILE pos >= 0
            DECLARE currentSymbol = s[pos]
            IF charsWithMaxFreq CONTAINS currentSymbol THEN
                APPEND currentSymbol TO collectedChars
                REMOVE currentSymbol FROM charsWithMaxFreq
            END IF
            pos = pos - 1
        END WHILE

        DECLARE concatenated = ""
        DECLARE revIndex = LENGTH(collectedChars) - 1
        WHILE revIndex >= 0
            concatenated = concatenated + collectedChars[revIndex]
            revIndex = revIndex - 1
        END WHILE

        RETURN concatenated
    END FUNCTION
END CLASS