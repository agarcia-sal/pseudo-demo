CLASS Solution
    FUNCTION countMatchingSubarrays(nums, pattern)
        FUNCTION get_relationship(num1, num2)
            SET delta TO num2 MINUS num1
            IF delta GREATER THAN zero
                RETURN one
            ELSE
                IF delta EQUALS zero
                    RETURN zero
                ELSE
                    RETURN minus one
                END IF
            END IF
        END FUNCTION

        LET lengthNums BE LENGTH OF nums
        LET lengthPat BE LENGTH OF pattern
        LET totalMatches BE zero

        DECLARE relationships AS A NEW LIST
        SET idx TO zero
        WHILE idx LESS THAN lengthNums MINUS 1
            SET value1 TO nums[idx]
            SET value2 TO nums[idx PLUS 1]
            SET relation TO get_relationship(value1, value2)
            APPEND relation TO relationships
            SET idx TO idx PLUS one
        END WHILE

        LET pos TO zero
        WHILE pos LESS THAN OR EQUAL TO lengthNums MINUS lengthPat MINUS 1
            LET segmentStart TO pos
            LET segmentEnd TO pos PLUS lengthPat MINUS 1
            LET segmentToCompare TO sublist of relationships FROM segmentStart TO segmentEnd

            LET matched TO true
            FOR index FROM zero TO lengthPat MINUS one
                IF segmentToCompare[index] NOT EQUAL TO pattern[index]
                    SET matched TO false
                    BREAK
                END IF
            END FOR

            IF matched EQUALS true
                SET totalMatches TO totalMatches PLUS one
            END IF
            SET pos TO pos PLUS one
        END WHILE

        RETURN totalMatches
    END FUNCTION
END CLASS