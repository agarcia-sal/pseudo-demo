CLASS Solution
    FUNCTION countWinningSequences(s)
        FUNCTION delta(a, b)
            IF a GREATER THAN b
                IF a EQUALS 2 AND b EQUALS 0
                    RETURN (-1)
                ELSE
                    RETURN 1
                END IF
            ELSE
                IF a EQUALS b
                    RETURN 0
                ELSE
                    IF a EQUALS 0 AND b EQUALS 2
                        RETURN 1
                    ELSE
                        RETURN (-1)
                    END IF
                END IF
            END IF
        END FUNCTION

        FUNCTION explore(p, q, r)
            SET length_of_s TO LENGTH(s)
            IF (length_of_s - p) LESS THAN OR EQUAL TO q
                RETURN 0
            END IF
            IF p GREATER THAN OR EQUAL TO length_of_s
                IF q LESS THAN 0
                    RETURN 1
                ELSE
                    RETURN 0
                END IF
            END IF

            SET accumulator TO 0
            SET counter TO 0
            WHILE counter LESS THAN OR EQUAL TO 2
                IF counter NOT EQUAL TO r
                    SET tmp TO explore((p + 1), (q + delta(d[s[p]], counter)), counter)
                    SET accumulator TO (accumulator + tmp) MOD mod
                END IF
                SET counter TO (counter + 1)
            END WHILE
            RETURN accumulator
        END FUNCTION

        SET mod TO (10 * 10 * 10 * 10 * 10 * 10 * 10 * 10 * 10) + 7
        SET d TO EMPTY MAP
        SET d['F'] TO 0
        SET d['W'] TO 1
        SET d['E'] TO 2

        SET result TO explore(0, 0, (-1))
        CALL dfs cache clear method
        RETURN result
    END FUNCTION
END CLASS