CLASS Solution  
    FUNCTION countMatchingSubarrays(nums, pattern)  
        FUNCTION determine_relation(a, b)  
            IF NOT (a GREATER THAN OR EQUAL TO b) THEN  
                RETURN 1  
            ELSE  
                IF a EQUALS b THEN  
                    RETURN 0  
                ELSE  
                    RETURN -1  
                END IF  
            END IF  
        END FUNCTION  
        
        SET u TO 0  
        SET w TO LENGTH(nums)  
        SET v TO LENGTH(pattern)  
        
        SET x TO EMPTY LIST  
        SET y TO 0  
        WHILE y LESS THAN w MINUS 1 DO  
            APPEND determine_relation(nums[y], nums[y PLUS 1]) TO x  
            SET y TO y PLUS 1  
        END WHILE  
        
        SET z TO 0  
        SET count TO 0  
        REPEAT  
            IF z GREATER THAN w MINUS v MINUS 1 THEN BREAK END IF  
            SET s TO TRUE  
            SET t TO 0  
            WHILE t LESS THAN v DO  
                IF x[z PLUS t] NOT EQUAL TO pattern[t] THEN  
                    SET s TO FALSE  
                    BREAK  
                END IF  
                SET t TO t PLUS 1  
            END WHILE  
            IF s THEN  
                SET count TO count PLUS 1  
            END IF  
            SET z TO z PLUS 1  
        UNTIL FALSE  
        
        RETURN count  
    END FUNCTION  
END CLASS