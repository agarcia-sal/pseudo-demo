CLASS Solution  
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)  
      FUNCTION cmpElements(a parameter, b parameter, c parameter)  
        RETURN NOT ((c = 1 AND NOT (b > a)) OR (c = 0 AND b <> a) OR (c = -1 AND NOT (b < a)))  
      END FUNCTION  
      SET lengthNums TO LENGTH(nums parameter)  
      SET lengthPattern TO LENGTH(pattern parameter)  
      SET totalMatches TO 0  
      SET idxOuter TO 0  
      WHILE idxOuter <= lengthNums - lengthPattern - 1  
        SET isMatchFlag TO 1  
        FUNCTION innerCheck(pos parameter, matched parameter)  
          IF pos = lengthPattern THEN  
            RETURN matched  
          END IF  
          IF cmpElements(nums parameter[pos + idxOuter], nums parameter[pos + idxOuter + 1], pattern parameter[pos]) THEN  
            RETURN innerCheck(pos + 1, matched)  
          ELSE  
            RETURN 0  
          END IF  
        END FUNCTION  
        SET isMatchFlag TO innerCheck(0, 1)  
        IF isMatchFlag = 1 THEN  
          totalMatches = totalMatches + 1  
        END IF  
        idxOuter = idxOuter + 1  
      END WHILE  
      RETURN totalMatches  
    END FUNCTION  
END CLASS