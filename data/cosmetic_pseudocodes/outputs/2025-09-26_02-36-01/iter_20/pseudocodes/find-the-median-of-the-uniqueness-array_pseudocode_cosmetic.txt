CLASS Solution
    FUNCTION medianOfUniquenessArray(nums)
        FUNCTION countLessOrEqual(x)
            FUNCTION incrementAt(k, mapRef)
                SET mapRef[k] TO (IF k IN mapRef THEN mapRef[k] + 1 ELSE 1)
            END FUNCTION
            FUNCTION decrementAt(k, mapRef)
                SET mapRef[k] TO mapRef[k] - 1
            END FUNCTION
            SET z TO 0
            SET w TO 0
            SET dMap TO empty collection with default zero values
            SET v TO 0
            LABEL OUTER_LOOP:
            WHILE w < LENGTH(nums)
                IF (IF nums[w] IN dMap THEN dMap[nums[w]] ELSE 0) EQUALS 0 THEN
                    SET v TO v + 1
                END IF
                CALL incrementAt(nums[w], dMap)
                LABEL INNER_LOOP:
                REPEAT
                    IF v <= x THEN BREAK INNER_LOOP END IF
                    CALL decrementAt(nums[z], dMap)
                    IF dMap[nums[z]] EQUALS 0 THEN
                        SET v TO v - 1
                    END IF
                    SET z TO z + 1
                UNTIL FALSE
                SET z TO z
                SET y TO w - z + 1
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET countTemp TO y
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                IF z < 0 THEN SET z TO 0 END IF
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                IF z < 0 THEN SET z TO 0 END IF
                IF z < 0 THEN SET z TO 0 END IF
                IF z < 0 THEN SET z TO 0 END IF
                IF z < 0 THEN SET z TO 0 END IF
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                IF z < 0 THEN SET z TO 0 END IF
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET z TO z
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET z TO z
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET z TO z
                SET z TO z
                SET countTemp TO countTemp
                SET z TO z
                SET z TO z
                SET countTemp TO countTemp
                SET z TO z
                SET countTemp TO countTemp
                SET z TO z
                SET countTemp TO countTemp
                SET z TO z
                SET countTemp TO countTemp
                SET z TO z
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET totalCount TO 0
                FOR index FROM 0 TO w
                    SET totalCount TO totalCount + 1
                END FOR
                SET totalCount TO totalCount + countTemp
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET totalCount TO totalCount
                SET countTemp TO countTemp + totalCount
                SET z TO z
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET countTemp TO countTemp
                SET z TO z + 1
                SET w TO w + 1
            END WHILE
            RETURN z
        END FUNCTION
        SET k TO LENGTH(nums)
        SET totalSubs TO (k * (k + 1)) / 2
        SET medianIdx TO (totalSubs + 1) / 2
        SET a TO 1
        SET b TO k
        FUNCTION halfDivide(low, high)
            SET result TO low + (high - low) / 2
            RETURN result
        END FUNCTION
        WHILE a < b
            SET c TO halfDivide(a, b)
            IF countLessOrEqual(c) < medianIdx THEN
                SET a TO c + 1
            ELSE
                SET b TO c
            END IF
        END WHILE
        RETURN a
    END FUNCTION
END CLASS