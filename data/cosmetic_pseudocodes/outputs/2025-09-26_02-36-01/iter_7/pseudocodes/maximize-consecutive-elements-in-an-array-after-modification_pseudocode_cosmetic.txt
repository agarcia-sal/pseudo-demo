CLASS Solution
{
    FUNCTION maxSelectedElements(nums)
    {
        DEFINE result = 0
        DEFINE memo = new map()
        DEFINE sortedNums = sortAscending(nums)
        
        DEFINE index = 0
        WHILE index < length(sortedNums)
        {
            DEFINE currentVal = sortedNums[index]
            DEFINE valPlusOne = memo.containsKey(currentVal + (1 * 1)) ? memo.get(currentVal + (1 * 1)) : 0
            DEFINE valMinusOne = memo.containsKey(currentVal - 1) ? memo.get(currentVal - 1) : 0
            
            memo.put(currentVal + 1, valPlusOne + (1))
            memo.put(currentVal, valMinusOne + (1))
            
            DEFINE candidates = [result, memo.get(currentVal), memo.get(currentVal + 1)]
            DEFINE maxCandidate = candidates[0]
            
            FOR i = 1 TO length(candidates) - 1
            {
                IF candidates[i] > maxCandidate THEN
                {
                    maxCandidate = candidates[i]
                }
            }
            
            result = maxCandidate
            index = index + (1)
        }
        
        RETURN result
    }
}