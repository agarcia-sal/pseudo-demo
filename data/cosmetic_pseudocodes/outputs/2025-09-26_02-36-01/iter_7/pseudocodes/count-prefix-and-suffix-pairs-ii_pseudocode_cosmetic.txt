CLASS Solution  
    FUNCTION countPrefixSuffixPairs(words)  
        SET total_matches TO 0  
        SET frequency_map TO dictionary defaulting to 0  
        SET index TO (LENGTH(words) - 1)  
        WHILE index >= 0  
            SET current_word TO words[index]  
            FOR EACH recorded_key IN frequency_map KEYS  
                SET prefix_check TO (SUBSTRING(recorded_key, 0, LENGTH(current_word)) == current_word)  
                SET suffix_check TO (SUBSTRING(recorded_key, LENGTH(recorded_key) - LENGTH(current_word), LENGTH(recorded_key)) == current_word)  
                IF (prefix_check AND suffix_check) THEN  
                    SET total_matches TO total_matches + frequency_map[recorded_key]  
                END IF  
            END FOR  
            frequency_map[current_word] = frequency_map[current_word] + (1 * 1)  
            SET index TO index - 1  
        END WHILE  
        RETURN total_matches  
    END FUNCTION  
END CLASS