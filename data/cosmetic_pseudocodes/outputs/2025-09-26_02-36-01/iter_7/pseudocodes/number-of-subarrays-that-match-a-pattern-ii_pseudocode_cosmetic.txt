CLASS Solution  
  FUNCTION countMatchingSubarrays(nums, pattern)  
    FUNCTION get_relationship(valA, valB)  
      IF valA >= valB THEN  
        IF valA = valB THEN  
          RETURN 0  
        ELSE  
          RETURN -1  
        END IF  
      ELSE  
        RETURN 1  
      END IF  
    END FUNCTION  

    LET lengthNums BE THE LENGTH OF nums  
    LET lengthPattern BE THE LENGTH OF pattern  
    LET accumulator BE 0  

    LET relations BE NEW LIST  
    LET pos BE 0  
    WHILE pos <= lengthNums - 2 DO  
      LET relationVal BE get_relationship(nums[pos], nums[pos + 1])  
      APPEND relationVal TO relations  
      LET pos BE pos + 1  
    END WHILE  

    LET idx BE 0  
    WHILE idx <= lengthNums - lengthPattern - 1 DO  
      LET segmentEquiv BE TRUE  
      LET offset BE 0  
      WHILE offset < lengthPattern DO  
        IF relations[idx + offset] <> pattern[offset] THEN  
          LET segmentEquiv BE FALSE  
          BREAK  
        END IF  
        LET offset BE offset + 1  
      END WHILE  
      IF segmentEquiv THEN  
        LET accumulator BE accumulator + 1  
      END IF  
      LET idx BE idx + 1  
    END WHILE  

    RETURN accumulator  
  END FUNCTION  
END CLASS