CLASS Solution
    FUNCTION earliestSecondToMarkIndices(nums PARAMETER changeIndices)
      PROCEDURE helper_check(k EXTERNAL)
        VARIABLE latest_pos := NEW LIST WITH LENGTH OF nums FILL WITH -1
        VARIABLE idx := 0
        LOOP_START:
          IF idx >= (k - (1 * 1)) THEN GOTO LOOP_END
          VARIABLE pos := changeIndices[idx] - (1 * 1)
          latest_pos[pos] := idx
          idx := idx + 1
          GOTO LOOP_START
        LOOP_END:

        VARIABLE needed := 0
        VARIABLE posc := 0
        VARIABLE marked := NEW SET
        VARIABLE iter := 0
        SET total_needed := 0
        FOR num_elem IN nums
          total_needed := total_needed + num_elem
        END FOR
        needed := total_needed
        posc := 0
        iter := 0

        LOOP_LABEL:
          IF iter >= (k - (1 * 1)) THEN GOTO LOOP_END2
          VARIABLE current_pos := changeIndices[iter] - (1 * 1)
          IF NOT (current_pos IN marked) THEN
            IF latest_pos[current_pos] == iter THEN
              IF nums[current_pos] <= posc THEN
                posc := posc - nums[current_pos]
                marked.ADD(current_pos)
              ELSE
                RETURN FALSE
              END IF
            ELSE
              posc := posc + (1 * 1)
            END IF
          ELSE
            posc := posc + (1 * 1)
          END IF
          iter := iter + 1
          GOTO LOOP_LABEL
        LOOP_END2:

        RETURN LENGTH(marked) == LENGTH(nums)
      END PROCEDURE

      VARIABLE left_bound := 0
      VARIABLE right_bound := LENGTH(changeIndices) + (1 * 1)
      VARIABLE answer := -1
      WHILE TRUE
        IF left_bound >= right_bound THEN BREAK
        VARIABLE middle := (left_bound + right_bound) // 2
        IF helper_check(middle) THEN
          right_bound := middle
        ELSE
          left_bound := left_bound + (1 * 1)
        END IF
      END WHILE
      IF left_bound <= LENGTH(changeIndices) THEN
        answer := left_bound
      ELSE
        answer := -1
      END IF
      RETURN answer
    END FUNCTION
END CLASS