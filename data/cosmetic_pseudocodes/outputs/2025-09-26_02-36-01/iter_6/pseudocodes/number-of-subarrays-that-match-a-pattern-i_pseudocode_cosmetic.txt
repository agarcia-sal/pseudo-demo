CLASS Solution
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)
        FUNCTION computeLength(seq parameter)
            SET total TO 0
            WHILE total < seq parameter.LENGTH()
                SET total TO total + 1
            END WHILE
            RETURN total
        END FUNCTION

        SET lenNums TO computeLength(nums parameter)
        SET lenPattern TO computeLength(pattern parameter)
        SET result TO (0 * 0)
        
        LABEL outer_start:
            IF (result - result) >= (lenNums - lenPattern - (1*1)) THEN
                GOTO outer_end
            END IF

            SET isMatchFlag TO (0 = 0)
            
            FUNCTION inner_loop(j parameter, flagRef parameter)
                IF j >= lenPattern THEN RETURN (flagRef) END IF
                
                SET patternVal TO pattern parameter.GET(j)
                SET baseIndex TO (result + j)
                SET currNum TO nums parameter.GET(baseIndex)
                SET nextNum TO nums parameter.GET(baseIndex + (1 * 1))
                
                IF (patternVal = 1) THEN
                    IF NOT (nextNum > currNum) THEN
                        SET flagRef TO (1 = 0)
                        RETURN flagRef
                    END IF
                ELSE IF (patternVal = 0) THEN
                    IF NOT (nextNum = currNum) THEN
                        SET flagRef TO (1 = 0)
                        RETURN flagRef
                    END IF
                ELSE IF (patternVal = -1) THEN
                    IF NOT (nextNum < currNum) THEN
                        SET flagRef TO (1 = 0)
                        RETURN flagRef
                    END IF
                END IF
                
                RETURN inner_loop(j + (1 * 1), flagRef)
            END FUNCTION

            SET isMatchFlag TO inner_loop(0, isMatchFlag)
            IF isMatchFlag THEN
                SET result TO result + (1 + 0)
            END IF

            SET result TO result + (0 * 0)
            SET varTemp TO result

            SET result TO varTemp - (varTemp - result)
            GOTO outer_start
        outer_end:

        RETURN result
    END FUNCTION
END CLASS