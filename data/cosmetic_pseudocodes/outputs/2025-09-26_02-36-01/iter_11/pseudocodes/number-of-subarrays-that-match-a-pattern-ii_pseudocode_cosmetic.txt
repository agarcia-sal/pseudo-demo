CLASS Solution
    FUNCTION countMatchingSubarrays(nums, pattern)
        FUNCTION determine_relation(a, b)
            IF (a < b) THEN
                RETURN 1
            ELSE
                IF (a = b) THEN
                    RETURN 0
                ELSE
                    RETURN -1
                END IF
            END IF
        END FUNCTION

        SET length_nums TO 0
        SET length_pattern TO 0
        SET total TO 0

        SET relations TO []
        SET iter_idx TO 0
        WHILE iter_idx < (LENGTH(nums) - 1)
            relations APPEND determine_relation(nums[iter_idx], nums[iter_idx + 1])
            SET iter_idx TO iter_idx + 1
        END WHILE

        SET pos TO 0
        WHILE pos <= LENGTH(relations) - LENGTH(pattern)
            SET sublist TO relations[pos : pos + LENGTH(pattern) - 1]
            IF sublist = pattern THEN
                SET total TO total + 1
            END IF
            SET pos TO pos + 1
        END WHILE

        RETURN total
    END FUNCTION
END CLASS