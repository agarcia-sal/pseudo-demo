CLASS Solution
    FUNCTION maximumLength(nums k)
        SET m TO LENGTH OF nums
        SET dp TO a 2D array of dimension m BY (k + 1) filled with value one
        SET result TO 0
        SET p TO m - 1
        WHILE p GREATER OR EQUAL TO 0
            SET q TO 0
            WHILE q LESS OR EQUAL TO k
                SET r TO 0
                WHILE r LESS THAN p
                    IF nums[p] EQUALS nums[r]
                        SET dp[p][q] TO MAXIMUM OF dp[p][q] AND dp[r][q] + 1
                    ELSE
                        IF q GREATER THAN 0
                            SET tempVal TO dp[r][q - 1] + 1
                            SET dp[p][q] TO MAXIMUM OF dp[p][q] AND tempVal
                        END IF
                    END IF
                    SET r TO r + 1
                END WHILE
                SET q TO q + 1
            END WHILE
            IF dp[p][k] GREATER THAN result
                SET result TO dp[p][k]
            END IF
            SET p TO p - 1
        END WHILE
        RETURN result
    END FUNCTION
END CLASS