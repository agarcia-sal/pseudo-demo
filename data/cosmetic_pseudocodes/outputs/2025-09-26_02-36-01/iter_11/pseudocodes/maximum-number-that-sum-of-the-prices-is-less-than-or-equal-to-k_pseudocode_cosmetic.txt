CLASS Solution
    FUNCTION findMaximumNumber(k, x)
        FUNCTION bitCount(u, v)
            SET alpha TO 0
            SET beta TO 1
            SET gamma TO 2 ** v
            SET delta TO u // gamma
            SET alpha TO alpha + (delta // 2) * gamma
            IF (delta % 2) == 1 THEN
                SET alpha TO alpha + (u % gamma) + 1
            END IF
            RETURN alpha
        END FUNCTION

        FUNCTION priceSum(w)
            SET zeta TO 0
            SET eta TO 1
            REPEAT
                SET theta TO (2 ** (eta * x)) - 1
                IF theta > w THEN
                    BREAK
                END IF
                SET zeta TO zeta + bitCount(w, eta * x - 1)
                SET eta TO eta + 1
            UNTIL FALSE
            RETURN zeta
        END FUNCTION

        SET omega TO 1
        SET psi TO (2 ** 60)
        WHILE omega <= psi
            SET sigma TO omega + (psi - omega) // 2
            IF priceSum(sigma) <= k THEN
                SET omega TO sigma + 1
            ELSE
                SET psi TO sigma - 1
            END IF
        END WHILE
        RETURN psi
    END FUNCTION
END CLASS