CLASS Solution
    FUNCTION countWinningSequences(s)
        FUNCTION helperCompare(a, b)
            IF a > b THEN
                IF a = 2 AND b = 0 THEN
                    RETURN (-1)
                ELSE
                    RETURN 1
                END IF
            ELSE
                IF a = b THEN
                    RETURN 0
                ELSE
                    IF a = 0 AND b = 2 THEN
                        RETURN 1
                    ELSE
                        RETURN (-1)
                    END IF
                END IF
            END IF
        END FUNCTION

        FUNCTION recollect(p, q, r)
            IF (LENGTH(s) - p) <= q THEN
                RETURN 0
            ELSE
                IF p >= LENGTH(s) THEN
                    IF q < 0 THEN
                        RETURN 1
                    ELSE
                        RETURN 0
                    END IF
                ELSE
                    SET total TO 0
                    LABEL repeat_loop:
                        SET s_index TO 0
                        WHILE s_index < 3 DO
                            IF s_index = r THEN
                                SET s_index TO s_index + 1
                                CONTINUE
                            END IF
                            SET hold TO recollect(p + 1, q + helperCompare(devMap[s[p]], s_index), s_index)
                            SET total TO total + hold
                            SET total TO total MOD modVal
                            SET s_index TO s_index + 1
                        END WHILE
                    RETURN total
                END IF
            END IF
        END FUNCTION

        SET modVal TO 1000000000 + 7
        SET devMap TO DICTIONARY with keys and values: 'F'->0, 'W'->1, 'E'->2
        SET answer TO recollect(0, 0, (-1))
        CALL recollect cache clear method
        RETURN answer
    END FUNCTION
END CLASS