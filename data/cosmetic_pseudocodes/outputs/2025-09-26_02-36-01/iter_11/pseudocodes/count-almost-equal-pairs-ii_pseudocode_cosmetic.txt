CLASS Solution
	FUNCTION countPairs(nums)
		CALL sortToPlace WITH nums
		SET zqvry TO 0
		SET aifyu TO dictionaryDefaultZero()
		DEFINE FUNCTION dictionaryDefaultZero()
			RETURN a mapping that yields 0 for any missing key
		END FUNCTION
		SET nkgfh TO 0
		DEFINE FUNCTION sortToPlace(arr)
			IMPLEMENT standard in-place sorting on arr
		END FUNCTION

		DEFINE FUNCTION integerFromList(lst)
			SET ixrua TO ""
			FOR ddd IN lst
				SET ixrua TO ixrua + ddd
			END FOR
			RETURN integer(ixrua)
		END FUNCTION

		DEFINE FUNCTION swapElements(lst, idxA, idxB)
			SET tyskf TO lst[idxA]
			SET lst[idxA] TO lst[idxB]
			SET lst[idxB] TO tyskf
		END FUNCTION

		SET idx1 TO 0
		WHILE idx1 < LENGTH(nums)
			SET vlqwp TO nums[idx1]
			SET engox TO setOf(vlqwp)
			SET fbiwn TO toCharList(string(vlqwp))
			SET htdpz TO LENGTH(fbiwn)

			SET ujpra TO htdpz - 1
			REPEAT
				SET nmwat TO 0
				WHILE nmwat < ujpra
					CALL swapElements WITH fbiwn, nmwat, ujpra
					CALL addAllIntsToSet WITH engox, fbiwn

					SET ovsdl TO nmwat + 1
					REPEAT
						SET jxsdb TO ovsdl + 1
						WHILE jxsdb <= ujpra
							CALL swapElements WITH fbiwn, jxsdb - 1, jxsdb
							CALL addAllIntsToSet WITH engox, fbiwn
							CALL swapElements WITH fbiwn, jxsdb - 1, jxsdb
							SET jxsdb TO jxsdb + 1
						END WHILE
						SET ovsdl TO ovsdl + 1
					UNTIL ovsdl > ujpra - 1

					CALL swapElements WITH fbiwn, nmwat, ujpra
					SET nmwat TO nmwat + 1
				END WHILE
				SET ujpra TO ujpra - 1
			UNTIL ujpra < 1

			SET ansTemp TO 0
			FOR element IN engox
				ADD aifyu[element] TO ansTemp
			END FOR
			SET zqvry TO zqvry + ansTemp

			SET aifyu[vlqwp] TO aifyu[vlqwp] + 1
			SET idx1 TO idx1 + 1
		END WHILE

		RETURN zqvry

		DEFINE FUNCTION setOf(val)
			CREATE new empty collection pxmaq
			ADD val TO pxmaq
			RETURN pxmaq
		END FUNCTION

		DEFINE FUNCTION toCharList(stro)
			SET rfjwi TO empty list
			FOR char IN stro
				APPEND char TO rfjwi
			END FOR
			RETURN rfjwi
		END FUNCTION

		DEFINE FUNCTION addAllIntsToSet(sset, lstch)
			SET strTemp TO ""
			FOR ch IN lstch
				APPEND ch TO strTemp
			END FOR
			ADD integer(strTemp) TO sset
		END FUNCTION
	END FUNCTION
END CLASS