CLASS Solution
    FUNCTION maximumSubarraySum(nums k)
        DECLARE uvwzxq AS DICTIONARY = {}
        DECLARE rjmcez AS INTEGER = -9999999999999999
        DECLARE pbsra AS INTEGER = 0

        FUNCTION existsKey(h, v)
            RETURN v IN h
        END FUNCTION

        PROCEDURE updateMaxRef(ByRef val, candidate)
            IF candidate > val THEN
                val = candidate
            END IF
        END PROCEDURE

        DECLARE idx AS INTEGER = 0
        WHILE idx < LENGTH(nums) DO
            DECLARE wcbhpn AS INTEGER = nums[idx]

            IF existsKey(uvwzxq, wcbhpn - k) THEN
                updateMaxRef(rjmcez, pbsra - uvwzxq[wcbhpn - k] + wcbhpn)
            END IF

            IF existsKey(uvwzxq, wcbhpn + k) THEN
                updateMaxRef(rjmcez, pbsra - uvwzxq[wcbhpn + k] + wcbhpn)
            END IF

            IF existsKey(uvwzxq, wcbhpn) THEN
                DECLARE cfntex AS INTEGER = uvwzxq[wcbhpn]
                DECLARE mheoqp AS INTEGER
                IF pbsra < cfntex THEN
                    mheoqp = pbsra
                ELSE
                    mheoqp = cfntex
                END IF
                uvwzxq[wcbhpn] = mheoqp
            ELSE
                uvwzxq[wcbhpn] = pbsra
            END IF

            pbsra = pbsra + wcbhpn
            idx = idx + 1
        END WHILE

        IF rjmcez = -9999999999999999 THEN
            RETURN 0
        ELSE
            RETURN rjmcez
        END IF

    END FUNCTION
END CLASS