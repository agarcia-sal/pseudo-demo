CLASS Solution
{
    FUNCTION maxBottlesDrunk(numBottles numBottles, numExchange numExchange)
    {
        SET p1 TO 0
        SET p2 TO 0
        LABEL loop_start:
        IF NOT (numBottles > 0) THEN GOTO loop_end

        SET p1 TO p1 + numBottles
        SET p2 TO p2 + numBottles

        SET numBottles TO 0

        LABEL inner_loop:
        IF NOT (p2 >= numExchange) THEN GOTO inner_loop_end

        SET p2 TO p2 - numExchange
        SET numBottles TO numBottles + 1
        SET numExchange TO numExchange + 1

        GOTO inner_loop
        LABEL inner_loop_end:

        GOTO loop_start
        LABEL loop_end:

        RETURN p1
    }
}
