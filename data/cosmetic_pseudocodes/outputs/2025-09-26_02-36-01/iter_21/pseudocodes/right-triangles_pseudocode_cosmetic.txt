CLASS Solution
    FUNCTION numberOfRightTriangles(grid)
        SET a1 TO 0
        SET b2 TO LENGTH(grid)
        SET c3 TO LENGTH(grid[0])
        SET d4 TO 0

        FUNCTION helperSumRow(x5, y6)
            RETURN helperInnerSumRow(x5, y6, 0, 0)
        END FUNCTION

        FUNCTION helperInnerSumRow(u7, v8, w9, z0)
            IF w9 GREATER_OR_EQUAL_TO c3 THEN
                RETURN z0
            ELSE
                IF w9 EQUALS v8 THEN
                    RETURN helperInnerSumRow(u7, v8, w9 + 1, z0)
                ELSE
                    RETURN helperInnerSumRow(u7, v8, w9 + 1, z0 + grid[u7][w9])
                END IF
            END IF
        END FUNCTION

        FUNCTION helperSumCol(p1, q2)
            SET r3 TO 0
            REPEAT
                IF r3 EQUALS b2 THEN
                    BREAK
                END IF
                IF r3 NOT_EQUAL_TO p1 THEN
                    SET d4 TO d4 + grid[r3][q2]
                END IF
                SET r3 TO r3 + 1
            UNTIL FALSE
            RETURN d4
        END FUNCTION

        FUNCTION sumExcludedCol(m4, n5)
            RETURN sumExcludedColRec(m4, n5, 0, 0)
        END FUNCTION

        FUNCTION sumExcludedColRec(s6, t7, u8, v9)
            IF u8 GREATER_OR_EQUAL_TO b2 THEN
                RETURN v9
            ELSE
                IF u8 EQUALS s6 THEN
                    RETURN sumExcludedColRec(s6, t7, u8 + 1, v9)
                ELSE
                    RETURN sumExcludedColRec(s6, t7, u8 + 1, v9 + grid[u8][t7])
                END IF
            END IF
        END FUNCTION

        FUNCTION sumExcludingColumn(x1, y2)
            SET z3 TO 0
            WHILE z3 LESS_THAN c3
                IF z3 NOT_EQUAL_TO y2 THEN
                    SET a4 TO a4 + grid[x1][z3]
                END IF
                SET z3 TO z3 + 1
            END WHILE
            RETURN a4
        END FUNCTION

        SET e5 TO 0
        outer_loop:
        WHILE e5 LESS_THAN b2
            SET f6 TO 0
            inner_loop:
            WHILE f6 LESS_THAN c3
                IF NOT (grid[e5][f6] NOT_EQUAL_TO 1) THEN
                    SET g7 TO 0
                    SET h8 TO 0

                    SET g7 TO sumExcludingColumn(e5, f6)
                    SET h8 TO sumExcludedCol(e5, f6)

                    SET d4 TO g7 * h8
                    SET a1 TO a1 + d4
                END IF
                SET f6 TO f6 + 1
            END WHILE
            SET e5 TO e5 + 1
        END WHILE

        RETURN a1
    END FUNCTION
END CLASS