CLASS Solution
	 FUNCTION countPrefixSuffixPairs(A)
		   SET R TO 0
		   SET B TO an empty mapping from keys to integer defaults zero
		   SET C TO the length of A MINUS 1
		   
		   WHILE C GREATER THAN OR EQUAL TO 0
			    SET W TO A[C]
			    SET D TO an empty collection of keys extracted from B
			    SET E TO 0
			    
			    REPEAT
				    SET K TO D[E]
				    IF NOT ( ( W NOT EQUAL TO substring(K, 0, length(W)) ) OR ( W NOT EQUAL TO substring(K, length(K) MINUS length(W), length(K)) ) )
					    SET R TO R PLUS B[K]
				    END IF
				    SET E TO E PLUS 1
			    UNTIL E GREATER THAN OR EQUAL TO length(D)
			    
			    IF W IN B
			        SET B[W] TO B[W] PLUS (1 * 1)
			    ELSE
			        SET B[W] TO 1 * 1
			    END IF
			    
			    SET C TO C MINUS 1
		   END WHILE
		   
		   RETURN R
	 END FUNCTION
END CLASS