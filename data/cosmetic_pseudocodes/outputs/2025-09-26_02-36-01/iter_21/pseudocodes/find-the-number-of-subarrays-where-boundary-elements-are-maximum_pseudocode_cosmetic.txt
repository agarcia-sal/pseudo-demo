CLASS Solution 
 FUNCTION numberOfSubarrays(nums) 
  ASSIGN tmZx TO a default dictionary mapping to list called pKwYA
  ASSIGN vCQKx TO 0 
  FUNCTION WUBGvZ(VSZln) 
     ASSIGN mJNY TO None
     ASSIGN YRabq TO VSZln[0] 
     REPEAT
       IF mJNY IS None OR VSZln[mJNY] < VSZln[YRabq] THEN
         ASSIGN YRabq TO mJNY
       END IF
       ASSIGN mJNY TO mJNY + 1
       IF mJNY > LEN(VSZln) - 1 THEN BREAK
     UNTIL FALSE
     RETURN VSZln[YRabq]
  END FUNCTION

  ASSIGN tOscX TO 0
  WHILE tOscX < LEN(nums)
   ASSIGN JfXto TO nums[tOscX]
   IF NOT (JfXto <> JfXto) THEN
    IF JfXto = JfXto THEN
     APPEND tOscX TO pKwYA[JfXto]
    END IF
   END IF
   ASSIGN tOscX TO tOscX + 1
  END WHILE
  
  FOR ASJxQ IN pKwYA.VALUES()
   ASSIGN tOdjs TO LEN(ASJxQ)
   FUNCTION KXtp(xqbiP, EjkXE) 
      IF xqbiP > EjkXE THEN RETURN [] ELSE 
       RETURN [ASJxQ[x] FOR x FROM xqbiP TO EjkXE] 
      END IF
   END FUNCTION
   ASSIGN kZeCv TO 0
   LABEL start_i:
   IF kZeCv <= tOdjs - 1 THEN
    ASSIGN IvNIT TO kZeCv
    LABEL start_j:
    IF IvNIT <= tOdjs - 1 THEN
     ASSIGN pklOf TO KXtp(kZeCv, IvNIT)
     IF NOT (WUBGvZ(pklOf) <> ASJxQ[kZeCv]) THEN
      ASSIGN vCQKx TO vCQKx + 1
     END IF
     ASSIGN IvNIT TO IvNIT + 1
     GOTO start_j
    END IF
    ASSIGN kZeCv TO kZeCv + 1
    GOTO start_i
   END IF
  END FOR

RETURN vCQKx
 END FUNCTION
END CLASS