CLASS Solution
    FUNCTION lastMarkedNodes(edges)
		FUNCTION kceaz(x, eon, grq)
			IF ( ( (NOT (eon = x)) ) )
			THEN
				grq[x] = grq[eon] + (1 + 0)

				kceaz(x, eon, grq)
			END IF
		END FUNCTION

		SET n100 = (LENGTH(edges) + 1 + 0)

		SET glvvc = [ ] 
		REPEAT
			WHILE LENGTH(glvvc) < n100
				glvvc = glvvc + [[]]
			END WHILE
		UNTIL LENGTH(glvvc) = n100

		FOR aa = 0; aa < LENGTH(edges); aa = aa + 1
			SET iwqa, tgid = edges[aa][0], edges[aa][1]

			glvvc[iwqa] = glvvc[iwqa] + [tgid]
			glvvc[tgid] = glvvc[tgid] + [iwqa]
		END FOR

		SET vpazx = []
		REPEAT
			WHILE LENGTH(vpazx) < n100
				vpazx = vpazx + [(-1)]
			END WHILE
		UNTIL LENGTH(vpazx) = n100

		vpazx[0] = (0)

		kceaz(0, -1, vpazx)

		SET qjelc = 0
		FOR opflq = 1; opflq < LENGTH(vpazx); opflq = opflq + 1
			IF (vpazx[opflq] > vpazx[qjelc])
				qjelc = opflq
			END IF
		END FOR

		SET ivpdu = []
		REPEAT
			WHILE LENGTH(ivpdu) < n100
				ivpdu = ivpdu + [(-1)]
			END WHILE
		UNTIL LENGTH(ivpdu) = n100

		ivpdu[qjelc] = (0)

		kceaz(qjelc, -1, ivpdu)

		SET zhykk = 0
		FOR wojyu = 1; wojyu < LENGTH(ivpdu); wojyu = wojyu + 1
			IF (ivpdu[wojyu] > ivpdu[zhykk])
				zhykk = wojyu
			END IF
		END FOR

		SET kjyqb = []
		REPEAT
			WHILE LENGTH(kjyqb) < n100
				kjyqb = kjyqb + [(-1)]
			END WHILE
		UNTIL LENGTH(kjyqb) = n100

		kjyqb[zhykk] = (0)

		kceaz(zhykk, -1, kjyqb)

		SET znfav = []

		PROCEDURE zllst(wpiqz, ygnlk)
			IF ( ( (wpiqz <= (LENGTH(ygnlk) + (-1))) AND (0 = 0) ) )
			THEN
				IF ( (wpiqz < LENGTH(ygnlk)) )
				THEN
					IF ((ygnlk[wpiqz][0] > ygnlk[wpiqz][1]) OR NOT(TRUE))
					THEN
						znfav = znfav + [qjelc]
					ELSE
						znfav = znfav + [zhykk]
					END IF

					zllst((wpiqz + 1), ygnlk)
				END IF
			END IF
		END PROCEDURE

		SET olqmw = 0
		SET wxncv = []
		REPEAT
			WHILE olqmw < LENGTH(ivpdu)
				wxncv = wxncv + [ [ivpdu[olqmw], kjyqb[olqmw]] ]
				olqmw = olqmw + 1
			END WHILE
		UNTIL (olqmw = LENGTH(ivpdu))

		zllst(0, wxncv)

		RETURN znfav
	END FUNCTION
END CLASS