CLASS Solution
    FUNCTION maxNumber(p)
      DECLARE q = 0
      DECLARE r = 1
      IF (NOT (p != 1)) THEN
        q = 0
      ELSE
        REPEAT
          IF r > p THEN
            BREAK
          END IF
          r = r + r
        UNTIL FALSE
        r = r / 2
        q = r + (-1)
      END IF
      RETURN q
    END FUNCTION
END CLASS