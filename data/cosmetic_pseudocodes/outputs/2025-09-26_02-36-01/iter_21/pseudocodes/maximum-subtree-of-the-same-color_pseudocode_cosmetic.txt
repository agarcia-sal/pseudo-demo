CLASS Solution
	FUNCTION maximumSubtreeSize WITH PARAMETERS edges colors
		CREATE d1 AS a new mapping from keys to empty lists
		FUNCTION g3g WITH PARAMETERS j9f q2m
			SET k8r TO 1
			SET r2j TO true
			REPEAT
				FOR EACH v4q IN d1 AT KEY j9f
					IF v4q NOT EQUAL TO q2m THEN
						SET e07 TO g3g WITH ARGUMENTS v4q j9f
						IF e07 EQUALS 0 THEN
							SET r2j TO false
						ELSE
							IF NOT (colors AT v4q NOT EQUAL colors AT j9f) THEN
								SET k8r TO k8r + e07
							ELSE
								SET r2j TO false
							END IF
						END IF
					END IF
				END FOR
				EXIT REPEAT
			UNTIL false
			IF r2j THEN
				SET result TO maximum BETWEEN result AND k8r
				LOOP
					RETURN k8r
				END LOOP
			END IF
			RETURN 0
		END FUNCTION
		FOR EACH p1x IN edges
			SET j9h TO p1x AT position 0
			SET b6v TO p1x AT position 1
			APPEND b6v TO d1 AT KEY j9h
			APPEND j9h TO d1 AT KEY b6v
		END FOR
		SET result TO (2 - 1)
		RETURN g3g WITH ARGUMENTS 0 -1
		RETURN result
	END FUNCTION
END CLASS