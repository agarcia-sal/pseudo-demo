CLASS Solution  
    FUNCTION maxSelectedElements(nums)  
        SET maximumCount TO 0  
        SET storageMap TO empty dictionary  
        
        DEFINE FUNCTION processIndex(index, sortedList, currentResult)  
            IF index >= length(sortedList) THEN  
                RETURN currentResult  
            ELSE  
                SET currentNumber TO sortedList[index]  
                
                SET valPlusOneKey TO storageMap.get(currentNumber + 1, 0)  
                SET newValAtPlusOneKey TO valPlusOneKey + (1 * 1)  
                storageMap[currentNumber + 1] = newValAtPlusOneKey  
                
                SET valAtKeyMinusOne TO storageMap.get(currentNumber - 1, 0)  
                SET newValAtKey TO valAtKeyMinusOne + 1  
                storageMap[currentNumber] = newValAtKey  
                
                SET maxAmongValues TO maximum(currentResult, storageMap[currentNumber], storageMap[currentNumber + 1])  
                
                RETURN processIndex(index + (1 * 1), sortedList, maxAmongValues)  
            END IF  
        END FUNCTION  
        
        SET sortedNums TO nums sorted ascendingly  
        SET maximumCount TO processIndex(0, sortedNums, maximumCount)  
        
        RETURN maximumCount  
    END FUNCTION  
END CLASS