CLASS Solution  
  FUNCTION numberOfSpecialChars(word)  
    SET startPositions TO empty dictionary  
    SET endPositions TO empty dictionary  
    SET positionCounter TO zero  
    FUNCTION traverseCharacters(index)  
      IF index IS EQUAL TO LENGTH(word)  
        RETURN  
      ELSE  
        SET currentChar TO word[index]  
        IF NOT (currentChar IN startPositions)  
          startPositions[currentChar] ← index  
        END IF  
        endPositions[currentChar] ← index  
        CALL traverseCharacters(index + 1)  
      END IF  
    END FUNCTION  
    CALL traverseCharacters(0)  
    SET aggregateCount TO 0  
    SET lowercaseLetters TO "abcdefghijklmnopqrstuvwxyz"  
    SET uppercaseLetters TO "ABCDEFGHIJKLMNOPQRSTUVWXYZ"  
    FUNCTION countPairs(i)  
      IF i IS EQUAL TO LENGTH(lowercaseLetters)  
        RETURN  
      ELSE  
        SET lowChar TO lowercaseLetters[i]  
        SET upChar TO uppercaseLetters[i]  
        IF (lowChar IN endPositions) AND (upChar IN startPositions) AND (endPositions[lowChar] < startPositions[upChar])  
          aggregateCount ← aggregateCount + 1  
        END IF  
        CALL countPairs(i + 1)  
      END IF  
    END FUNCTION  
    CALL countPairs(0)  
    RETURN aggregateCount  
  END FUNCTION  
END CLASS