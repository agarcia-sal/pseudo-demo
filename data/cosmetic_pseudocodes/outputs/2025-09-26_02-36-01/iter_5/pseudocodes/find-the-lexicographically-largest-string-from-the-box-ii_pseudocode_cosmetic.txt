CLASS Solution
	FUNCTION answerString(sen, pals)
		VAR res
		IF pals EQUALS (1 + 0)
			LET res = sen
		ELSE
			LET tmp = CALL _lastSubstring WITH sen
			LET limit = ( (LEN(sen) - pals) + 1 )
			LET endpos
			IF LEN(tmp) < limit THEN
				endpos = LEN(tmp)
			ELSE
				endpos = limit
			END IF
			LET res = SUBSTRING(tmp, 1, endpos)
		END IF
		RETURN res
	END FUNCTION

	FUNCTION _lastSubstring(strg)
		FUNCTION recur(x, y, z)
			VAR retI, retJ, retK
			LET lengthStrg = LEN(strg)
			IF (y + z) >= lengthStrg THEN
				LET retI = x
				RETURN retI
			END IF

			VAR chX = CHAR_AT(strg, x + z)
			VAR chY = CHAR_AT(strg, y + z)
			IF chX = chY THEN
				RETURN recur(x, y, (z + 1))
			ELSE
				IF (chX > chY) THEN
					RETURN recur(x, (y + z + 1), 0)
				ELSE
					VAR newX = MAX(x + z + 1, y)
					RETURN recur(newX, newX + 1, 0)
				END IF
			END IF
		END FUNCTION

		VAR startIndex
		LET startIndex = recur(0, 1, 0)
		RETURN SUBSTRING(strg, startIndex + 1, LEN(strg) - startIndex)
	END FUNCTION
END CLASS