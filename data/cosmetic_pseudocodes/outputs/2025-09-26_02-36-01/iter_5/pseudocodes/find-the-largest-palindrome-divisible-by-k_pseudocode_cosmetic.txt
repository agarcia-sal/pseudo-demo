CLASS Solution
    FUNCTION largestPalindrome(n k)
        DEFINE function recSearch(current)
            IF current LESS THAN 1
                RETURN "0"
            END IF

            DEFINE isEven AS ((n % 2) = 0)

            DEFINE leftPart AS STRING(current)
            DEFINE rightPart AS ""
            IF isEven
                SET idxEnd TO LENGTH(leftPart)
                SET idxStart TO 1
            ELSE
                SET idxEnd TO LENGTH(leftPart) - 1
                SET idxStart TO 1
            END IF

            FOR pos FROM idxEnd DOWNTO idxStart
                SET rightPart TO CONCAT(rightPart, SUBSTRING(leftPart, pos, pos))
            END FOR

            DEFINE palindromeNum AS TO_INTEGER(CONCAT(leftPart, rightPart))
            IF (palindromeNum % k) = 0
                RETURN STRING(palindromeNum)
            ELSE
                RETURN recSearch(current - 1)
            END IF
        END FUNCTION

        IF n = 1
            DEFINE digit AS 9
            WHILE digit >= 1
                IF digit % k = 0
                    RETURN STRING(digit)
                END IF
                SET digit TO digit - 1
            END WHILE
            RETURN "0"
        END IF

        DEFINE halfLen AS (n + 1) / 2
        DEFINE startHalfStr AS REPEAT('9', halfLen)
        DEFINE startHalf AS TO_INTEGER(startHalfStr)

        RETURN recSearch(startHalf)
    END FUNCTION
END CLASS