CLASS Solution
    FUNCTION countMatchingSubarrays(nums, pattern)
        FUNCTION get_relationship(numA, numB)
            IF numA < numB THEN
                RETURN 1
            ELSE
                IF numA == numB THEN
                    RETURN 0
                ELSE
                    RETURN -1
                END IF
            END IF
        END FUNCTION

        LET lengthNums EQUALS SIZE OF nums
        LET lengthPattern ASSIGN LENGTH(pattern)
        LET matches INITIALIZE TO 0

        LET diffs ASSIGN AN EMPTY ARRAY
        LET i ASSIGN 0
        WHILE i <= lengthNums - 2
            LET diffVal ASSIGN get_relationship(nums[i], nums[i + 1])
            diffs.ADD(diffVal)
            SET i TO i + 1
        END WHILE

        LET j ASSIGN 0
        WHILE j <= lengthNums - lengthPattern - 1
            LET subrange ASSIGN diffs[j : j + lengthPattern]
            IF subrange == pattern THEN
                LET matches ASSIGN matches + 1
            END IF
            SET j TO j + 1
        END WHILE

        RETURN matches
    END FUNCTION
END CLASS