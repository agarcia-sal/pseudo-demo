CLASS Solution
    FUNCTION maxSelectedElements(nums)
        LET result BE 0
        INITIALIZE counts AS an empty map
        SORTED_LIST ← nums sorted in non-decreasing order
        INDEX ← 0
        WHILE INDEX < LENGTH OF SORTED_LIST
            CURRENT ← SORTED_LIST[INDEX]
            PREV_VAL ← IF counts CONTAINS KEY (CURRENT - 1) THEN counts[CURRENT - 1] ELSE 0
            NEXT_VAL ← IF counts CONTAINS KEY (CURRENT + 1) THEN counts[CURRENT + 1] ELSE 0

            counts[CURRENT + 1] ← NEXT_VAL + 1
            counts[CURRENT] ← PREV_VAL + 1

            MAXIMUM ← counts[CURRENT]
            IF counts[CURRENT + 1] > MAXIMUM THEN
                MAXIMUM ← counts[CURRENT + 1]
            END IF
            IF MAXIMUM > result THEN
                result ← MAXIMUM
            END IF

            INDEX ← INDEX + 1
        END WHILE
        RETURN result
    END FUNCTION
END CLASS