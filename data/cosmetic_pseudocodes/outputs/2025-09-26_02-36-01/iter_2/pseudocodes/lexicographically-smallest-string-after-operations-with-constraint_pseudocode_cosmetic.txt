CLASS Solution  
    FUNCTION getSmallestString(s parameter of type string k parameter of type integer) RETURNS string  
        FUNCTION cyclic_distance(c1 parameter of type character c2 parameter of type character) RETURNS integer  
            SET diff TO ABSOLUTE VALUE OF (ASCII VALUE OF c1 MINUS ASCII VALUE OF c2)  
            SET alt_diff TO 26 MINUS diff  
            IF diff LESS THAN alt_diff THEN  
                RETURN diff  
            ELSE  
                RETURN alt_diff  
            END IF  
        END FUNCTION  

        SET chars TO AN ARRAY CONTAINING EACH CHARACTER FROM s  
        SET idx TO 0  
        SET length TO LENGTH OF s  

        WHILE idx LESS THAN length AND k GREATER THAN 0 DO  
            IF chars[idx] EQUALS 'a' THEN  
                idx = idx + 1  
                CONTINUE  
            END IF  

            SET distance_to_a TO cyclic_distance(chars[idx], 'a')  

            IF distance_to_a <= k THEN  
                SET chars[idx] TO 'a'  
                SET k TO k - distance_to_a  
            ELSE  
                SET new_char_code TO ASCII VALUE OF chars[idx] MINUS k  
                SET chars[idx] TO CHARACTER REPRESENTED BY new_char_code  
                k = 0  
            END IF  

            SET idx TO idx + 1  
        END WHILE  

        SET result_string TO EMPTY STRING  
        SET pos TO 0  
        WHILE pos LESS THAN length DO  
            APPEND chars[pos] TO result_string  
            pos = pos + 1  
        END WHILE  

        RETURN result_string  
    END FUNCTION  
END CLASS