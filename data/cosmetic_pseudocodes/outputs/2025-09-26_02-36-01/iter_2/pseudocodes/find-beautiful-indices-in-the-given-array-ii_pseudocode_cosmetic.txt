CLASS Solution  
    FUNCTION beautifulIndices(s param_a param_b max_diff)  
        INITIALIZE a_positions AS list with no elements  
        SET pos1 TO 0  
        WHILE pos1 <= (LENGTH(s) - LENGTH(param_a))  
            SET segment_length TO LENGTH(param_a)  
            SET segment TO s[pos1 : pos1 + segment_length]  
            IF segment == param_a  
                ADD pos1 TO a_positions  
            END IF  
            SET pos1 TO pos1 PLUS 1  
        END WHILE  
        
        INITIALIZE b_positions AS an empty list  
        SET pos2 TO 0  
        WHILE pos2 <= (LENGTH(s) - LENGTH(param_b))  
            SET segment_len_b TO LENGTH(param_b)  
            SET segment_b TO s[pos2 : pos2 + segment_len_b]  
            IF segment_b == param_b  
                INSERT pos2 INTO b_positions  
            END IF  
            INCREMENT pos2 BY 1  
        END WHILE  
        
        CREATE result_indices AS new empty list  
        SET idx_a TO 0  
        SET idx_b TO 0  
        WHILE (idx_a < LENGTH(a_positions)) AND (idx_b < LENGTH(b_positions))  
            SET dist TO a_positions[idx_a] - b_positions[idx_b]  
            IF dist < 0 THEN  
                SET dist TO 0 - dist  
            END IF  
            IF dist <= max_diff  
                APPEND a_positions[idx_a] TO result_indices  
                SET idx_a TO idx_a PLUS 1  
            ELSE IF a_positions[idx_a] < b_positions[idx_b]  
                SET idx_a TO idx_a + 1  
            ELSE  
                SET idx_b TO idx_b + 1  
            END IF  
        END WHILE  
        
        RETURN result_indices  
    END FUNCTION  
END CLASS