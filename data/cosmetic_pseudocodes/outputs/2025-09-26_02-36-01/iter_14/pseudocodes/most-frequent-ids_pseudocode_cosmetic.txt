CLASS Solution  
    FUNCTION mostFrequentIDs(nums PARAMETER, freq PARAMETER)  
        SET cnt TO a dictionary defaulting to integer zero  
        SET h TO an empty list  
        SET res TO an empty list  
        
        DEFINE FUNCTION pop_stale()  
            WHILE ( (length of h) > 0 ) AND ( (- ( (h[0])[0] )) ≠ cnt[( (h[0])[1] )] )  
                REMOVE h[0]  
            END WHILE  
        END FUNCTION  
        
        FOR index FROM 0 TO (length of nums) - 1  
            SET current_num TO nums[index]  
            SET current_freq TO freq[index]  
            SET cnt[current_num] TO cnt[current_num] + current_freq  
            INSERT pair of ( -cnt[current_num], current_num ) AT END of h  
            CALL pop_stale()  
            
            IF length of h ≠ 0 THEN  
                APPEND - ( (h[0])[0] ) TO res  
            ELSE  
                APPEND 0 TO res  
            END IF  
        END FOR  
        
        RETURN res  
    END FUNCTION  
END CLASS