CLASS Solution
    FUNCTION maximumLength (nums k)
        SET q TO LENGTH OF nums
        SET r TO a list with q rows and k PLUS 1 columns where every element is 1
        SET s TO 0
        FOR index p AND element w IN nums
            FOR t FROM 0 TO k
                SET u TO 0
                WHILE u LESS THAN p
                    SET v TO nums at position u
                    IF NOT (w NOT EQUAL v)
                        SET tmp1 TO r at position p and t
                        SET tmp2 TO r at position u and t PLUS 1
                        IF tmp1 LESS THAN tmp2
                            SET r at position p and t TO tmp2
                        END IF
                    ELSE IF t GREATER THAN 0
                        SET a1 TO r at position p and t
                        SET a2 TO r at position u and t MINUS 1 PLUS 1
                        IF a1 LESS THAN a2
                            SET r at position p and t TO a2
                        END IF
                    END IF
                    SET u TO u PLUS 1
                END WHILE
            END FOR
            SET s TO s PLUS (r at position p and k GREATER THAN s) TIMES (r at position p and k MINUS s)
        END FOR
        RETURN s
    END FUNCTION
END CLASS