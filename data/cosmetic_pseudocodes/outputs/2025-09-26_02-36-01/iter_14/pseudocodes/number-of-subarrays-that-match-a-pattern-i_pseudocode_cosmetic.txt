CLASS Solution
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)
        SET lengthA TO LENGTH(nums parameter)
        SET lengthB TO LENGTH(pattern parameter)
        SET totalMatches TO 0
        SET indexMain TO 0
        WHILE indexMain <= (lengthA - lengthB - 1)
            SET isValid TO NOT False
            CALL verifySegment(indexMain, lengthB, nums parameter, pattern parameter, isValid)
            IF isValid
                ADD 1 TO totalMatches
            END IF
            ADD 1 TO indexMain
        END WHILE
        RETURN totalMatches
    END FUNCTION

    FUNCTION verifySegment(startPos, segmentLength, arrNums, arrPattern, flagValid)
        SET offset TO 0
        REPEAT
            IF offset >= (segmentLength - 1)
                BREAK
            END IF
            SET currentPatternValue TO arrPattern[offset]
            SET firstNum TO arrNums[startPos + offset]
            SET secondNum TO arrNums[startPos + offset + 1]
            IF currentPatternValue = 1
                IF NOT (firstNum < secondNum)
                    SET flagValid TO False
                    RETURN
                END IF
            ELSE IF currentPatternValue = 0
                IF firstNum = secondNum
                    SET flagValid TO False
                    RETURN
                END IF
            ELSE IF currentPatternValue = -1
                IF NOT (firstNum > secondNum)
                    SET flagValid TO False
                    RETURN
                END IF
            END IF
            ADD 1 TO offset
        UNTIL offset = (segmentLength - 1)
    END FUNCTION
END CLASS