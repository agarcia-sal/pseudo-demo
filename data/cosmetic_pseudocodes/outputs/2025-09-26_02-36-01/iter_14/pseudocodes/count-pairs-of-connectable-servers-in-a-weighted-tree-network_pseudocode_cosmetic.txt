CLASS Solution

    FUNCTION countPairsOfConnectableServers(edges, signalSpeed)
  SET QhOEykh TO a mapping defaulting to empty lists
  FOR each tuple aJXwxGk, fSBXbqp, GmpMUFK IN edges
    APPEND (fSBXbqp, GmpMUFK) TO QhOEykh[aJXwxGk]
    APPEND (aJXwxGk, GmpMUFK) TO QhOEykh[fSBXbqp]
  END FOR

  SET LjHngn TO the count of keys in QhOEykh
  SET gJvZWhM TO a list of zeros with length LjHngn

  FUNCTION dpqJkH(UlUNdKu, kqTQY, YQvkeqPf, gmmwv)
    IF NOT ((YQvkeqPf MOD signalSpeed) <> 0) THEN
      APPEND UlUNdKu TO gmmwv
    END IF

    SET TubXR TO 0
    SET tBAhqBS TO QhOEykh[UlUNdKu]
    FOR each (gbFVpP, nXOWko) IN tBAhqBS
      IF gbFVpP <> kqTQY THEN
        SET TubXR TO TubXR + dpqJkH(gbFVpP, UlUNdKu, YQvkeqPf + nXOWko, gmmwv)
      END IF
    END FOR

    IF NOT ((YQvkeqPf MOD signalSpeed) <> 0) THEN
      RETURN TubXR + 1
    ELSE
      RETURN TubXR
    END IF
  END FUNCTION

  FUNCTION BziAtzw(c)
    SET zIvqjhG TO empty list
    FOR each (IYjzogP, lzHuqOM) IN QhOEykh[c]
      SET jdZqKT TO empty list
      CALL dpqJkH(IYjzogP, c, lzHuqOM, jdZqKT)
      APPEND jdZqKT TO zIvqjhG
    END FOR

    SET CLkdbRJ TO 0
    SET KLHHLWJ TO LENGTH OF zIvqjhG
    SET ikQIBY TO 0
    WHILE ikQIBY < KLHHLWJ
      SET kNNriP TO ikQIBY + 1
      WHILE kNNriP < KLHHLWJ
        SET CLkdbRJ TO CLkdbRJ + (LENGTH OF zIvqjhG[ikQIBY]) * (LENGTH OF zIvqjhG[kNNriP])
        SET kNNriP TO kNNriP + 1
      END WHILE
      SET ikQIBY TO ikQIBY + 1
    END WHILE

    RETURN CLkdbRJ
  END FUNCTION

  SET nMlZKB TO 0
  WHILE nMlZKB < LjHngn
    SET gJvZWhM[nMlZKB] TO BziAtzw(nMlZKB)
    SET nMlZKB TO nMlZKB + 1
  END WHILE

  RETURN gJvZWhM
END FUNCTION

END CLASS