CLASS Solution
    FUNCTION occurrencesOfElement(nums, queries, x)
        DEFINE FUNCTION buildOccurrenceIndices(arr, targetVal)
            RETURN buildOccurrenceIndicesHelper(arr, targetVal, 0, [])
        END FUNCTION

        DEFINE FUNCTION buildOccurrenceIndicesHelper(arr, targetVal, pos, acc)
            IF pos GREATER OR EQUAL TO LENGTH(arr) THEN
                RETURN acc
            ELSE
                IF arr[pos] EQUALS targetVal THEN
                    SET newAcc TO acc + [pos]
                ELSE
                    SET newAcc TO acc
                END IF
                RETURN buildOccurrenceIndicesHelper(arr, targetVal, pos + 1, newAcc)
            END IF
        END FUNCTION

        DEFINE FUNCTION processQueries(qList, occList, idx, res)
            IF idx GREATER OR EQUAL TO LENGTH(qList) THEN
                RETURN res
            ELSE
                IF qList[idx] LESS OR EQUAL TO LENGTH(occList) THEN
                    SET valToAdd TO occList[qList[idx] - 1]
                ELSE
                    SET valToAdd TO -1
                END IF
                RETURN processQueries(qList, occList, idx + 1, res + [valToAdd])
            END IF
        END FUNCTION

        SET occurrencePositions TO buildOccurrenceIndices(nums, x)

        SET finalResult TO processQueries(queries, occurrencePositions, 0, [])

        RETURN finalResult
    END FUNCTION
END CLASS