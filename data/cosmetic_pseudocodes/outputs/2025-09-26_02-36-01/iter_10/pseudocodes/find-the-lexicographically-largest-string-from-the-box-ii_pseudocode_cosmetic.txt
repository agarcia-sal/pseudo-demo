CLASS Solution
    FUNCTION answerString(word, numFriends)
        FUNCTION localMin(a, b)
            IF a < b THEN RETURN a ELSE RETURN b END IF
        END FUNCTION

        IF numFriends = 1 THEN
            RETURN word
        END IF

        FUNCTION _lastSubstring(s)
            FUNCTION charAt(x, idx)
                RETURN element at position idx of x
            END FUNCTION

            PROCEDURE recLoop(x, y, z, n, length)
                IF (y + z) >= length THEN
                    RETURN substring from position x+1 TO length of s
                END IF
                IF charAt(x, z) = charAt(y, z) THEN
                    RETURN recLoop(x, y, z + 1, n, length)
                ELSE IF charAt(x, z) > charAt(y, z) THEN
                    RETURN recLoop(x, y + z + 1, 0, n, length)
                ELSE
                    VAR updatedX = localMax(x + z + 1, y)
                    VAR updatedY = updatedX + 1
                    RETURN recLoop(updatedX, updatedY, 0, n, length)
                END IF
            END PROCEDURE

            FUNCTION localMax(u, v)
                IF u > v THEN RETURN u ELSE RETURN v END IF
            END FUNCTION

            RETURN recLoop(0, 1, 0, 0, length of s)
        END FUNCTION

        VAR substringValue = _lastSubstring(word)
        VAR maxLen = length of word - numFriends + 1
        VAR limit = localMin(length of substringValue, maxLen)
        RETURN substring from position 1 TO limit of substringValue
    END FUNCTION
END CLASS