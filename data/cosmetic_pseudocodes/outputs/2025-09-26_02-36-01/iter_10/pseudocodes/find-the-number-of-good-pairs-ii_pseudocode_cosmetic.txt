CLASS Solution  
    FUNCTION numberOfPairs(nums1, nums2, k)  
        FUNCTION tallyElements(arr)  
            DECLARE frequencyMap AS empty dictionary  
            DECLARE idx AS zero  
            WHILE idx < length of arr DO  
                IF frequencyMap contains arr[idx] THEN  
                    SET frequencyMap[arr[idx]] TO frequencyMap[arr[idx]] + 1  
                ELSE  
                    SET frequencyMap[arr[idx]] TO 1  
                END IF  
                SET idx TO idx + 1  
            END WHILE  
            RETURN frequencyMap  
        END FUNCTION  

        DECLARE duplicatedMapping AS tallyElements(nums2)  
        DECLARE accumulatedPairs AS 0  
        DECLARE pos AS 0  

        REPEAT  
            IF pos >= length of nums1 THEN  
                BREAK  
            END IF  
            DECLARE currentVal AS nums1[pos]  
            DECLARE entries AS list of key-value pairs from duplicatedMapping  
            DECLARE entryIndex AS 0  

            WHILE entryIndex < length of entries DO  
                DECLARE keyElem AS entries[entryIndex].key  
                DECLARE valCount AS entries[entryIndex].value  
                
                IF (currentVal MOD (keyElem * k)) = 0 THEN  
                    SET accumulatedPairs TO accumulatedPairs + valCount  
                END IF  
                SET entryIndex TO entryIndex + 1  
            END WHILE  
            SET pos TO pos + 1  
        UNTIL FALSE  

        RETURN accumulatedPairs  
    END FUNCTION  
END CLASS