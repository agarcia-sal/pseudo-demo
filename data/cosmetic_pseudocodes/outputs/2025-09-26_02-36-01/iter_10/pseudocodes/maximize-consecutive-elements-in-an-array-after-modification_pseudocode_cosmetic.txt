CLASS Solution
    FUNCTION maxSelectedElements(nums)
        SET maxCount TO 0
        SET memo TO empty dictionary
        DEFINE FUNCTION processNext(index)
            IF index > length(nums) THEN RETURN
            END IF
            SET sortedList TO nums sorted ascendingly
            SET currentVal TO sortedList[index]
            SET valPlusOne TO IF memo HAS KEY currentVal + 1 THEN memo[currentVal + 1] ELSE 0
            SET memo[currentVal + 1] TO valPlusOne + 1
            SET valMinusOne TO IF memo HAS KEY currentVal - 1 THEN memo[currentVal - 1] ELSE 0
            SET memo[currentVal] TO valMinusOne + 1
            SET maxCount TO MAXIMUM OF maxCount, memo[currentVal + 1], memo[currentVal]
            processNext(index + 1)
        END FUNCTION
        CALL processNext(1)
        RETURN maxCount
    END FUNCTION
END CLASS