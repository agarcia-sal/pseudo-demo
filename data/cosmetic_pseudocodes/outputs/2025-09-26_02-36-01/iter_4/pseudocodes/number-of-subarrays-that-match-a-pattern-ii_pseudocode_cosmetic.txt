CLASS Solution  
    FUNCTION countMatchingSubarrays(nums, pattern)  
        FUNCTION get_relationship(num1, num2)  
            IF NOT (num1 >= num2) THEN  
                RETURN 1  
            ELSE IF (num1 = num2) THEN  
                RETURN 0  
            ELSE  
                RETURN -1  
            END IF  
        END FUNCTION  

        DECLARE totalNums AS LENGTH(nums)  
        DECLARE totalPattern AS LENGTH(pattern)  
        DECLARE matchedCount AS 0  

        DECLARE diffs AS EMPTY LIST  
        DECLARE pos AS 0  
        WHILE pos < totalNums - 1  
            LET relVal = get_relationship(nums[pos], nums[pos + 1])  
            APPEND relVal TO diffs  
            pos = pos + 1  
        END WHILE  

        DECLARE startIndex AS 0  
        WHILE startIndex <= totalNums - totalPattern - 1  
            DECLARE segmentMatch AS TRUE  
            DECLARE offset AS 0   
            WHILE offset < totalPattern  
                IF diffs[startIndex + offset] != pattern[offset] THEN  
                    segmentMatch = FALSE  
                    BREAK  
                END IF  
                offset = offset + 1  
            END WHILE  
            IF segmentMatch THEN  
                matchedCount = matchedCount + 1  
            END IF  
            startIndex = startIndex + 1  
        END WHILE  

        RETURN matchedCount  
    END FUNCTION  
END CLASS