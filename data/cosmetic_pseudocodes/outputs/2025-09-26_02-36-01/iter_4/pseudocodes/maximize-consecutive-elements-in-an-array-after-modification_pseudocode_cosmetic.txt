CLASS Solution  
    FUNCTION maxSelectedElements(nums)  
        DECLARE maximumCount AS 0  
        DECLARE occurrenceMap AS an empty dictionary  
        SORTED_LIST ← the array nums arranged from smallest to largest  
        INDEX ← 0  
        WHILE INDEX less than length of SORTED_LIST DO  
            CURRENT_NUMBER ← SORTED_LIST at position INDEX  
            PREV_VALUE ← 0  
            IF (CURRENT_NUMBER) in occurrenceMap THEN  
                PREV_VALUE ← occurrenceMap[CURRENT_NUMBER]  
            END IF  
            NEXT_VALUE ← 0  
            IF (CURRENT_NUMBER + 1) in occurrenceMap THEN  
                NEXT_VALUE ← occurrenceMap[CURRENT_NUMBER + 1]  
            END IF  
            occurrenceMap[CURRENT_NUMBER + 1] ← PREV_VALUE + 1  
            occurrenceMap[CURRENT_NUMBER] ← 0  
            IF (CURRENT_NUMBER - 1) in occurrenceMap THEN  
                occurrenceMap[CURRENT_NUMBER] ← occurrenceMap[CURRENT_NUMBER - 1] + 1  
            ELSE  
                occurrenceMap[CURRENT_NUMBER] ← 1  
            END IF  
            maximumCount ← occurrenceMap[CURRENT_NUMBER]  
            IF occurrenceMap[CURRENT_NUMBER + 1] > maximumCount THEN  
                maximumCount ← occurrenceMap[CURRENT_NUMBER + 1]  
            END IF  
            IF maximumCount > maximumCount THEN  // redundant, skip  
                maximumCount ← maximumCount  
            END IF  
            IF maximumCount > maximumCount THEN  // redundant, skip  
                maximumCount ← maximumCount  
            END IF  
            LET ansCandidate ← maximumCount  
            IF ansCandidate > maximumCount THEN  
                maximumCount ← ansCandidate  
            END IF  
            INDEX ← INDEX + 1  
        END WHILE  
        RETURN maximumCount  
    END FUNCTION  
END CLASS