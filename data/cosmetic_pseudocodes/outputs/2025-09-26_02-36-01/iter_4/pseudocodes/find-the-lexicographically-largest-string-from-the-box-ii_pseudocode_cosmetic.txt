CLASS Solution
    FUNCTION answerString(word, numFriends)
        IF NOT (numFriends NOT EQUAL TO 1)
            RETURN word
        END IF
        DECLARE lastSubstr AS CALL _lastSubstring(word)
        DECLARE limit AS LENGTH(word) - numFriends + 1
        DECLARE endPos AS IF LENGTH(lastSubstr) < limit THEN LENGTH(lastSubstr) ELSE limit
        RETURN substring(lastSubstr, 1, endPos)
    END FUNCTION

    FUNCTION _lastSubstring(s)
        DECLARE idxA AS 0
        DECLARE idxB AS 1
        DECLARE offset AS 0
        WHILE (idxB + offset) < LENGTH(s)
            IF s[idxA + offset] = s[idxB + offset]
                SET offset TO offset + 1
            ELSE
                IF s[idxA + offset] > s[idxB + offset]
                    SET idxB TO idxB + offset + 1
                    SET offset TO 0
                ELSE
                    SET newIdxA TO idxA + offset + 1
                    SET idxA TO IF newIdxA > idxB THEN newIdxA ELSE idxB
                    SET idxB TO idxA + 1
                    SET offset TO 0
                END IF
            END IF
        END WHILE
        RETURN substring(s, idxA + 1, LENGTH(s))
    END FUNCTION
END CLASS