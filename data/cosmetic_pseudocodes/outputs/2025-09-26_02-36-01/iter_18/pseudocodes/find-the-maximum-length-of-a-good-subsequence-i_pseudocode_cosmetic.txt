```pseudocode
CLASS Solution
    FUNCTION maximumLength(nums k)
        SET t TO 0
        SET m TO LENGTH OF nums
        SET u TO a matrix with m rows and (k + 1) columns filled with 1s
        SET v TO 0

        SET alpha TO 0
        WHILE alpha < m
            SET beta TO 0
            WHILE beta <= k
                SET gamma TO 0
                REPEAT
                    IF gamma >= alpha THEN
                        BREAK
                    END IF
                    IF nums[alpha] = nums[gamma] THEN
                        SET u[alpha][beta] TO THE MAXIMUM OF u[alpha][beta] AND (u[gamma][beta] + 1)
                    ELSE
                        IF beta > 0 THEN
                            SET u[alpha][beta] TO THE MAXIMUM OF u[alpha][beta] AND ((u[gamma][beta - 1]) + 1)
                        END IF
                    END IF
                    SET gamma TO gamma + 1
                UNTIL FALSE
                SET beta TO beta + 1
            END WHILE
            IF v < u[alpha][k] THEN
                SET v TO u[alpha][k]
            END IF
            SET alpha TO alpha + 1
        END WHILE

        RETURN v
    END FUNCTION
END CLASS
```