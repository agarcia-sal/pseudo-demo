```pseudocode
CLASS Solution
    FUNCTION maxOperations(nums)
        FUNCTION recur(a, b, c, d)
            IF a >= b THEN
                RETURN 0
            END IF

            SET key TO (a, b, c)
            IF key IN d THEN
                RETURN d[key]
            END IF

            SET result TO 0

            IF nums[a] + nums[a + 1] == c THEN
                SET temp1 TO 1 + recur(a + 2, b, c, d)
                IF temp1 > result THEN
                    SET result TO temp1
                END IF
            END IF

            IF nums[b] + nums[b - 1] == c THEN
                SET temp2 TO 1 + recur(a, b - 2, c, d)
                IF temp2 > result THEN
                    SET result TO temp2
                END IF
            END IF

            IF nums[a] + nums[b] == c THEN
                SET temp3 TO 1 + recur(a + 1, b - 1, c, d)
                IF temp3 > result THEN
                    SET result TO temp3
                END IF
            END IF

            SET d[key] = result
            RETURN result
        END FUNCTION

        SET val1 TO 1 + recur(2, LENGTH(nums) - 1, nums[0] + nums[1], DICTIONARY())
        SET val2 TO 1 + recur(0, LENGTH(nums) - 3, nums[LENGTH(nums) - 1] + nums[LENGTH(nums) - 2], DICTIONARY())
        SET val3 TO 1 + recur(1, LENGTH(nums) - 2, nums[0] + nums[LENGTH(nums) - 1], DICTIONARY())

        RETURN MAX(val1, val2, val3)
    END FUNCTION
END CLASS
```