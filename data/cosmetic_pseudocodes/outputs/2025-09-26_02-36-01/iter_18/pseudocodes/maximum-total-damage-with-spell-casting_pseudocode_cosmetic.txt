```pseudocode
CLASS Solution
    FUNCTION maximumTotalDamage(power)
        INITIALIZE xqk TO empty mapping
        FOR EACH zoe IN power DO
            IF zoe EXISTS IN xqk THEN
                SET xqk[zoe] TO xqk[zoe] + 1
            ELSE
                SET xqk[zoe] TO 1
            END IF
        END FOR

        CREATE msv AS list of keys in xqk
        SORT msv IN ascending order

        INITIALIZE rbf TO empty mapping
        SET lno TO 0
        WHILE lno LESS THAN LENGTH(msv) DO
            SET hsi TO msv[lno]

            IF lno NOT EQUAL TO 0 THEN
                IF msv[lno - 1] EXISTS IN rbf THEN
                    SET qop TO rbf[msv[lno - 1]]
                ELSE
                    SET qop TO 0
                END IF
            ELSE
                SET qop TO 0
            END IF

            SET ycl TO hsi * xqk[hsi]

            SET itd TO lno - 1
            WHILE itd GREATER THAN OR EQUAL TO 0 AND msv[itd] GREATER THAN OR EQUAL TO hsi - 2 DO
                DECREMENT itd BY 1
            END WHILE

            IF itd GREATER THAN OR EQUAL TO 0 THEN
                SET ycl TO ycl + rbf[msv[itd]]
            END IF

            SET rbf[hsi] TO (IF ycl GREATER THAN qop THEN ycl ELSE qop)

            SET lno TO lno + 1
        END WHILE

        SET sdl TO -INFINITY
        FOR EACH vjh IN rbf DO
            IF rbf[vjh] GREATER THAN sdl THEN
                SET sdl TO rbf[vjh]
            END IF
        END FOR

        RETURN sdl
    END FUNCTION
END CLASS
```