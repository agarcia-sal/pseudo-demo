```pseudocode
CLASS Solution
    FUNCTION maxSelectedElements(nums)
        INITIALIZE resVar TO 0
        DECLARE storage AS empty dictionary
        INITIALIZE sortedList TO empty list
        SET iVar TO 0
        WHILE iVar < LENGTH(nums)
            APPEND nums[iVar] TO sortedList
            SET iVar TO iVar + 1
        END WHILE
        DECLARE aux AS 0
        DECLARE jVar AS 0
        REPEAT
            SET kVar TO jVar
            SET jVar TO jVar + 1
        UNTIL kVar >= LENGTH(sortedList)
        SET idxVar TO 0
        WHILE idxVar < LENGTH(sortedList)
            SET currNum TO sortedList[idxVar]
            IF storage[currNum + 1] EXISTS THEN
                SET nextVal TO storage[currNum + 1]
            ELSE
                SET nextVal TO 0
            END IF
            SET storage[currNum + 1] TO nextVal + 1
            IF storage[currNum - 1] EXISTS
                SET prevVal TO storage[currNum - 1]
            ELSE
                SET prevVal TO 0
            END IF
            SET storage[currNum] TO prevVal + 1
            DECLARE candidates AS [resVar, storage[currNum], storage[currNum + 1]]
            SET maxVal TO candidates[0]
            DECLARE cIndex TO 1
            WHILE cIndex < LENGTH(candidates)
                IF candidates[cIndex] > maxVal THEN
                    SET maxVal TO candidates[cIndex]
                END IF
                SET cIndex TO cIndex + 1
            END WHILE
            SET resVar TO maxVal
            SET idxVar TO idxVar + 1
        END WHILE

        RETURN resVar
    END FUNCTION
END CLASS
```