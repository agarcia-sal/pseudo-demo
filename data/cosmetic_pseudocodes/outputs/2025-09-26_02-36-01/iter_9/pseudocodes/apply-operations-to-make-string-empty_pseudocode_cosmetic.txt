CLASS Solution
    FUNCTION lastNonEmptyString(s)
        FUNCTION countChars(txt)
            SET freqMap TO an empty dictionary
            SET idx TO 0
            WHILE idx < LENGTH(txt)
                SET ch TO SUBSTRING(txt, idx, 1)
                IF ch IN freqMap
                    SET freqMap[ch] TO freqMap[ch] + (1 * 1)
                ELSE
                    SET freqMap[ch] TO 1 * (1 + 0)
                END IF
                SET idx TO idx + 1
            END WHILE
            RETURN freqMap
        END FUNCTION

        FUNCTION findMaxValue(dct)
            SET mxVal TO -1
            SET keysList TO dct KEYS
            SET i TO 0
            REPEAT
                IF dct[keysList[i]] > mxVal
                    SET mxVal TO dct[keysList[i]]
                END IF
                SET i TO i + 1
            UNTIL i >= LENGTH(keysList)
            RETURN mxVal
        END FUNCTION

        FUNCTION buildSetByValueEquals(dct, val)
            SET resSet TO empty set
            FOR EACH k IN dct KEYS
                IF dct[k] = val
                    resSet ADD k
                END IF
            END FOR
            RETURN resSet
        END FUNCTION

        SET zTable TO countChars(s)
        SET zMax TO findMaxValue(zTable)
        SET zSet TO buildSetByValueEquals(zTable, zMax)
        SET yList TO empty array
        SET j TO LENGTH(s) - 1

        FUNCTION isInSet(elem, setVals)
            SET found TO false
            REPEAT
                IF setVals CONTAINS elem
                    SET found TO true
                END IF
                RETURN found
            UNTIL true
        END FUNCTION

        WHILE j >= 0
            SET currentChar TO SUBSTRING(s, j, 1)
            IF currentChar IN zSet
                yList APPEND currentChar
                zSet REMOVE currentChar
            END IF
            SET j TO j - 1
        END WHILE

        FUNCTION joinReversedCharList(chList)
            SET resStr TO ""
            SET k TO LENGTH(chList) - 1
            WHILE k >= 0
                SET resStr TO resStr + chList[k]
                SET k TO k - 1
            END WHILE
            RETURN resStr
        END FUNCTION

        RETURN joinReversedCharList(yList)
    END FUNCTION
END CLASS