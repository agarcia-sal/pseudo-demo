CLASS Solution  
    FUNCTION numberOfSubmatrices(omega)  
        FUNCTION helper_sum(arr)  
            RETURN arr[0] + arr[1]  
        END FUNCTION

        IF (omega == [] OR omega[0] == []) THEN
            RETURN 0
        END IF

        LET alpha = LENGTH(omega)
        LET beta = LENGTH(omega[0])

        LET gamma = []
        FOR k FROM 0 TO alpha + 1 DO
            LET temp_row = []
            FOR m FROM 0 TO beta + 1 DO
                APPEND [0, 0] TO temp_row
            END FOR
            APPEND temp_row TO gamma
        END FOR

        LET delta = 1
        WHILE delta <= alpha DO
            LET epsilon = 1
            WHILE epsilon <= beta DO
                LET zeta_0 = gamma[delta - 1][epsilon][0]
                LET zeta_1 = gamma[delta - 1][epsilon][1]
                LET eta_0 = gamma[delta][epsilon - 1][0]
                LET eta_1 = gamma[delta][epsilon - 1][1]
                LET theta_0 = gamma[delta - 1][epsilon - 1][0]
                LET theta_1 = gamma[delta - 1][epsilon - 1][1]

                gamma[delta][epsilon][0] = (zeta_0 + eta_0) - theta_0
                gamma[delta][epsilon][1] = (zeta_1 + eta_1) - theta_1

                LET i_pos = delta - 1
                LET j_pos = epsilon - 1
                LET val = omega[i_pos][j_pos]

                IF val == 'X' THEN
                    gamma[delta][epsilon][0] = gamma[delta][epsilon][0] + 1
                ELSE IF val == 'Y' THEN
                    gamma[delta][epsilon][1] = gamma[delta][epsilon][1] + 1
                END IF
                epsilon = epsilon + 1
            END WHILE
            delta = delta + 1
        END WHILE

        LET sigma = 0
        FOR mu FROM 1 TO alpha DO
            FOR nu FROM 1 TO beta DO
                LET phi = gamma[mu][nu][0]
                LET chi = gamma[mu][nu][1]
                IF phi > 0 THEN
                    IF phi == chi THEN
                        sigma = sigma + 1
                    END IF
                END IF
            END FOR
        END FOR

        RETURN sigma
    END FUNCTION  
END CLASS