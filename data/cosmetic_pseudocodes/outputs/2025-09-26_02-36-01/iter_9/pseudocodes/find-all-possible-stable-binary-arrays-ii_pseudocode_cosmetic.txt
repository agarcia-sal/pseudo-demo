CLASS Solution
    FUNCTION numberOfStableArrays(a a, b b, c c) RETURNS integer
        SET P TO 1000000000 + 1

        FUNCTION recur(x x, y y, prev prev, streak streak) RETURNS integer
            IF x = 0 AND y = 0 THEN
                RETURN b
            END IF
            IF x < 0 OR y < 0 THEN
                RETURN a
            END IF

            SET acc TO a
            IF prev = a THEN
                IF streak < c THEN
                    SET acc TO acc + recur(x - 1, y, a, streak + 1)
                END IF
                SET acc TO acc + recur(x, y - 1, b, a)
            ELSE
                IF x > a THEN
                    SET acc TO acc + recur(x - 1, y, a, b)
                END IF
                IF streak < c THEN
                    SET acc TO acc + recur(x, y - 1, b, streak + 1)
                END IF
            END IF

            RETURN acc MOD P
        END FUNCTION

        RETURN recur(a, b - 1, a, a)
    END FUNCTION
END CLASS