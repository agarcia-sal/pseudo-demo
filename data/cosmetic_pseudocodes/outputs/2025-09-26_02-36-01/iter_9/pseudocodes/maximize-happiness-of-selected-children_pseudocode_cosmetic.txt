CLASS Solution
    FUNCTION maximumHappinessSum(ecstasy, limit)
        PROCEDURE arrangeDescending(arr)
            FOR position FROM 1 TO LENGTH(arr) - 1
                SET key TO arr[position]
                SET loc TO position - 1
                WHILE loc >= 0 AND arr[loc] < key
                    SET arr[loc + 1] TO arr[loc]
                    SET loc TO loc - 1
                END WHILE
                SET arr[loc + 1] TO key
            END FOR
        END PROCEDURE

        CALL arrangeDescending(ecstasy)

        SET aggregate TO 0
        SET subtractor TO 0

        PROCEDURE iterateRecursively(idx)
            IF idx > limit - 1 THEN
                RETURN
            ELSE
                SET temp_val TO ecstasy[idx] - subtractor
                IF NOT (temp_val >= 0) THEN
                    SET temp_val TO 0
                END IF
                SET aggregate TO aggregate + temp_val
                SET subtractor TO subtractor + 1
                CALL iterateRecursively(idx + 1)
            END IF
        END PROCEDURE

        CALL iterateRecursively(0)

        RETURN aggregate
    END FUNCTION
END CLASS