CLASS Solution
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)
        
        FUNCTION areElementsMatching(indexA, indexB, sequenceA, sequenceB, patternSequence)
            DECLARE flagMatch AS BOOLEAN
            SET flagMatch TO TRUE
            DECLARE offset AS INTEGER
            SET offset TO 0
            
            FUNCTION checkCondition(itemIndex)
                DECLARE condResult AS BOOLEAN
                IF patternSequence[itemIndex] = 1 THEN
                    SET condResult TO (sequenceB[indexB + itemIndex + 1] > sequenceB[indexB + itemIndex])
                ELSE IF patternSequence[itemIndex] = 0 THEN
                    SET condResult TO (sequenceB[indexB + itemIndex + 1] = sequenceB[indexB + itemIndex])
                ELSE IF patternSequence[itemIndex] = -1 THEN
                    SET condResult TO (sequenceB[indexB + itemIndex + 1] < sequenceB[indexB + itemIndex])
                ELSE
                    SET condResult TO FALSE
                END IF
                RETURN condResult
            END FUNCTION
            
            WHILE offset < LENGTH(patternSequence) - 1 AND flagMatch DO
                IF NOT checkCondition(offset) THEN
                    SET flagMatch TO FALSE
                END IF
                SET offset TO offset + 1
            END WHILE
            
            RETURN flagMatch
        END FUNCTION
        
        DECLARE lengthNums AS INTEGER
        DECLARE lengthPattern AS INTEGER
        DECLARE totalMatches AS INTEGER
        SET lengthNums TO LENGTH(nums parameter)
        SET lengthPattern TO LENGTH(pattern parameter)
        SET totalMatches TO 0
        
        DECLARE position AS INTEGER
        SET position TO 0
        
        WHILE position <= lengthNums - lengthPattern - 1 DO
            IF areElementsMatching(position, position, nums parameter, nums parameter, pattern parameter) THEN
                SET totalMatches TO totalMatches + 1
            END IF
            SET position TO position + 1
        END WHILE
        
        RETURN totalMatches
    END FUNCTION
END CLASS