CLASS Solution
    FUNCTION maxTotalReward(cosmos)  
        FUNCTION mergeBitsets(p, q)
            RETURN (p | ((p & ((1 << q) - 1)) << q))
        END FUNCTION

        SET container TO SORTED SET OF ELEMENTS IN cosmos
        SET accumulator TO 1

        SET index TO 0
        WHILE index < SIZE(container)
            SET current TO ELEMENT AT index IN container
            SET accumulator TO mergeBitsets(accumulator, current)
            SET index TO index + 1
        END WHILE

        FUNCTION bitLength(number)
            SET length TO 0
            SET temp TO number
            WHILE temp > 0
                SET temp TO temp >> 1
                SET length TO length + 1
            END WHILE
            RETURN length
        END FUNCTION

        RETURN (bitLength(accumulator) - 1)
    END FUNCTION
END CLASS