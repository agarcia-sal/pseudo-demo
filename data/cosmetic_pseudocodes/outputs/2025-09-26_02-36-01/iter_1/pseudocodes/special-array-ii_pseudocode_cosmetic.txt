CLASS Solution  
    FUNCTION isArraySpecial(nums, queries)  
        INITIALIZE parity ARRAY  
        FOR idx FROM 0 TO LENGTH(nums) - 1  
            STORE nums[idx] MOD 2 INTO parity[idx]  
        END FOR  
        
        INITIALIZE prefix_special ARRAY WITH LENGTH(nums) ELEMENTS SET TO 0  
        FOR idx FROM 1 TO LENGTH(nums) - 1  
            IF parity[idx] IS SAME AS parity[idx - 1]  
                SET prefix_special[idx] TO prefix_special[idx - 1] + 1  
            ELSE  
                SET prefix_special[idx] TO prefix_special[idx - 1]  
            END IF  
        END FOR  
        
        INITIALIZE output ARRAY  
        FOR each pair IN queries  
            DESTRUCTURE pair INTO left, right  
            IF left EQUALS right  
                ADD True TO output  
            ELSE  
                LET left_val BE prefix_special[left - 1] IF left GREATER THAN 0 ELSE 0  
                ADD (prefix_special[right] - left_val == 0) TO output  
            END IF  
        END FOR  
        
        RETURN output  
    END FUNCTION  
END CLASS