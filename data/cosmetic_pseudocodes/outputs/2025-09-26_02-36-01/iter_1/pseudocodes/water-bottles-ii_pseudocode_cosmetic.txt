CLASS Solution  
    FUNCTION maxBottlesDrunk(numBottles numBottles numExchange numExchange)  
        DECLARE totalConsumed AS INTEGER INITIALIZED TO 0  
        DECLARE empties AS INTEGER INITIALIZED TO 0  
        REPEAT  
            IF numBottles IS 0 THEN  
                BREAK  
            END IF  
            totalConsumed = totalConsumed + numBottles  
            empties = empties + numBottles  
            numBottles = 0  
            WHILE empties >= numExchange DO  
                empties = empties - numExchange  
                numBottles = numBottles + 1  
                numExchange = numExchange + 1  
            END WHILE  
        UNTIL FALSE  
        RETURN totalConsumed  
    END FUNCTION  
END CLASS