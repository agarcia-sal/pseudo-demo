CLASS Solution  
    FUNCTION mostFrequentIDs(nums PARAMETER, freq PARAMETER)  
        INITIALIZE count AS empty map defaulting to 0  
        INITIALIZE heap AS empty array  
        INITIALIZE output AS empty list  
        FOR index FROM 0 TO LENGTH(nums) - 1  
            LET number BE nums[index]  
            LET frequency BE freq[index]  
            count[number] = count[number] + frequency  
            ADD (-count[number], number) TO heap  
            WHILE heap IS NOT EMPTY  
                LET top_pair BE heap[0]  
                LET current_count BE count[top_pair[1]]  
                IF -top_pair[0] == current_count THEN  
                    BREAK  
                ELSE  
                    REMOVE top element FROM heap  
                END IF  
            END WHILE  
            IF heap IS NOT EMPTY THEN  
                APPEND -heap[0][0] TO output  
            ELSE  
                APPEND 0 TO output  
            END IF  
        END FOR  
        RETURN output  
    END FUNCTION  
END CLASS