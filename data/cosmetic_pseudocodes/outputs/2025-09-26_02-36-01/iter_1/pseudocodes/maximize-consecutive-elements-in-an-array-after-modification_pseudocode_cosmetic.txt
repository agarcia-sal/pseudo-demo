CLASS Solution
    FUNCTION maxSelectedElements(nums)
        INITIALIZE dp AS empty map
        INITIALIZE ans AS 0
        LET sortedNums BE nums sorted in increasing order
        FOR num IN sortedNums DO
            LET valNext = (dp CONTAINS_KEY (num + 1)) ? dp[num + 1] : 0
            LET valPrev = (dp CONTAINS_KEY (num - 1)) ? dp[num - 1] : 0

            dp[num + 1] = valNext + 1
            dp[num] = valPrev + 1

            ans = MAXIMUM(ans, dp[num], dp[num + 1])
        END FOR
        RETURN ans
    END FUNCTION
END CLASS