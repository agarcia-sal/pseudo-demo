CLASS Solution  
    FUNCTION countMatchingSubarrays(nums, pattern)  
        FUNCTION compute_relation(a, b)  
            IF a > b THEN  
                RETURN minus one  
            ELSE IF a = b THEN  
                RETURN zero  
            ELSE  
                RETURN one  
            END IF  
        END FUNCTION  

        LET lengthNums = LENGTH(nums)  
        LET lengthPattern = LENGTH(pattern)  
        LET matchedCount = 0  

        LET relations = []  
        FOR i IN RANGE 0 TO lengthNums - 2 DO  
            LET relationValue = compute_relation(nums[i], nums[i + 1])  
            APPEND relationValue TO relations  
        END FOR  

        FOR startIdx IN RANGE 0 TO lengthNums - lengthPattern - 1 DO  
            LET segment = SUBLIST(relations, startIdx, startIdx + lengthPattern - 1)  
            IF segment = pattern THEN  
                matchedCount = matchedCount + 1  
            END IF  
        END FOR  

        RETURN matchedCount  
    END FUNCTION  
END CLASS