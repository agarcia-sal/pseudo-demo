CLASS Solution  
    FUNCTION numberOfPairs(points)  
        SET n TO LENGTH(points)  
        SORT points IN ORDER: ascending BY x-coordinate, descending BY y-coordinate  
        SET pairCount TO 0  
        FOR firstIndex IN RANGE 0 TO n - 2  
            FOR secondIndex IN RANGE firstIndex + 1 TO n - 1  
                LET ptA BE points[firstIndex]  
                LET ptB BE points[secondIndex]  
                IF ptA.x <= ptB.x AND ptA.y >= ptB.y THEN  
                    SET isPairValid TO TRUE  
                    FOR midIndex IN RANGE firstIndex + 1 TO secondIndex - 1  
                        LET ptM BE points[midIndex]  
                        IF ptA.x <= ptM.x <= ptB.x AND ptB.y <= ptM.y <= ptA.y THEN  
                            SET isPairValid TO FALSE  
                            EXIT FOR  
                        END IF  
                    END FOR  
                    IF isPairValid THEN  
                        pairCount = pairCount + 1  
                    END IF  
                END IF  
            END FOR  
        END FOR  
        RETURN pairCount  
    END FUNCTION  
END CLASS