CLASS Solution  
    FUNCTION maximumSubarraySum(nums k)  
        INITIALIZE prefixMap AS an empty mapping  
        SET maxSubSum TO the smallest possible number  
        INITIALIZE accumulator TO 0  
        
        FOR value IN nums DO  
            LET leftKey = value - k  
            LET rightKey = value + k  
            
            IF leftKey IN prefixMap THEN  
                LET candidate = accumulator - prefixMap[leftKey] + value  
                IF candidate > maxSubSum THEN  
                    maxSubSum = candidate  
                END IF  
            END IF  
            
            IF rightKey IN prefixMap THEN  
                LET candidate = accumulator - prefixMap[rightKey] + value  
                IF candidate > maxSubSum THEN  
                    maxSubSum = candidate  
                END IF  
            END IF  
            
            IF value IN prefixMap THEN  
                prefixMap[value] = MIN(prefixMap[value], accumulator)  
            ELSE  
                prefixMap[value] = accumulator  
            END IF  
            
            accumulator = accumulator + value  
        END FOR  
        
        IF maxSubSum IS greater than negative infinity THEN  
            RETURN maxSubSum  
        ELSE  
            RETURN 0  
        END IF  
    END FUNCTION  
END CLASS