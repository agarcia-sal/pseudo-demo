CLASS Solution  
    FUNCTION countPrefixSuffixPairs(words)  
        INITIALIZE result WITH 0  
        INITIALIZE frequency_map AS a dictionary WITH default 0  
        FOR index FROM length of words MINUS 1 DOWNTO 0  
            current_word = words[index]  
            FOR each recorded_word IN frequency_map KEYS  
                prefix_segment = SUBSTRING(recorded_word, 0, LENGTH(current_word))  
                suffix_segment = SUBSTRING(recorded_word, LENGTH(recorded_word) - LENGTH(current_word), LENGTH(recorded_word))  
                IF current_word IS EQUAL TO prefix_segment AND current_word IS EQUAL TO suffix_segment  
                    result = result + frequency_map[recorded_word]  
                END IF  
            END FOR  
            frequency_map[current_word] = frequency_map[current_word] + 1  
        END FOR  
        RETURN result  
    END FUNCTION  
END CLASS