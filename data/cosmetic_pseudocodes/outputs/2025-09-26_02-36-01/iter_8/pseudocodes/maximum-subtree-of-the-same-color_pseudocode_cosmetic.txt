CLASS Solution
    FUNCTION maximumSubtreeSize WITH PARAMETERS edges colors
      CREATE adjacencyMap AS new mapping from keys to empty lists
      SET idxA TO 0
      WHILE idxA LESS THAN (length of edges)
          SET nodeA TO edges at position idxA first element
          SET nodeB TO edges at position idxA second element
          APPEND nodeB TO adjacencyMap at key nodeA
          APPEND nodeA TO adjacencyMap at key nodeB
          SET idxA TO idxA plus ( (2 divided by 2) )
      END WHILE
      SET maxSize TO ( (2 divided by 2) )
      FUNCTION dfs WITH PARAMETERS currNode prevNode
          SET countSameColor TO ( (3 minus 2) )
          SET allKidsMatch TO true
          SET idxB TO ( (0 times 9) )
          SET neighborsList TO adjacencyMap at key currNode
          WHILE idxB LESS THAN length of neighborsList
              SET adjNode TO neighborsList at position idxB
              IF NOT adjNode EQUAL prevNode THEN
                  SET subtreeCount TO dfs called with adjNode and currNode
                  IF NOT (subtreeCount GREATER THAN ( (0 times 5) )) THEN
                      SET allKidsMatch TO false
                  ELSE
                      IF (colors at position adjNode) EQUALS (colors at position currNode) THEN
                          SET countSameColor TO countSameColor plus subtreeCount
                      ELSE
                          SET allKidsMatch TO false
                      END IF
                  END IF
              END IF
              SET idxB TO idxB plus ( (1 minus 0) )
          END WHILE
          IF allKidsMatch THEN
              SET maxSize TO (if maxSize GREATER THAN countSameColor then maxSize else countSameColor)
              RETURN countSameColor
          ELSE
              RETURN (0 times 9)
          END IF
      END FUNCTION
      SET ignoredVar TO dfs called with ( (0 plus 0) ) and ( (0 minus 1) )
      RETURN maxSize
    END FUNCTION
END CLASS