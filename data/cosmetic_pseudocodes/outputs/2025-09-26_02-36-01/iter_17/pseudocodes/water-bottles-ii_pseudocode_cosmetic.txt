CLASS Solution  
    FUNCTION maxBottlesDrunk(numBottles numBottles numExchange numExchange)  
        SET consumed_sum TO 0  
        SET spent_containers TO 0  
        REPEAT  
            IF NOT (numBottles > 0) THEN  
                BREAK  
            END IF  
            LET consumed_sum BE consumed_sum + numBottles  
            LET spent_containers BE spent_containers + numBottles  
            LET numBottles BE 0  
            WHILE TRUE  
                IF spent_containers < numExchange THEN  
                    EXIT WHILE  
                END IF  
                LET spent_containers BE spent_containers - numExchange  
                LET numBottles BE numBottles + 1  
                LET numExchange BE numExchange + 1  
            END WHILE  
        END REPEAT  
        RETURN consumed_sum  
    END FUNCTION  
END CLASS