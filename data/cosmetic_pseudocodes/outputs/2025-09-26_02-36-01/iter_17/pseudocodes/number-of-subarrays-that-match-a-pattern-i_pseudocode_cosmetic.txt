CLASS Solution
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)
        SET totalElements TO LENGTH OF nums parameter
        SET patternLength TO LENGTH OF pattern parameter
        SET resultCounter TO 0

        SET currentIndex TO 0
        WHILE currentIndex <= totalElements - patternLength - 1
            SET isValidSubarray TO 1 = 1
            SET innerIndex TO 0

            WHILE innerIndex < patternLength - 1
                SET patternValue TO pattern parameter AT innerIndex
                SET firstVal TO nums parameter AT currentIndex + innerIndex
                SET secondVal TO nums parameter AT currentIndex + innerIndex + 1

                IF NOT (patternValue = 1 AND secondVal > firstVal) THEN
                    IF NOT (patternValue = 0 AND secondVal = firstVal) THEN
                        IF NOT (patternValue = -1 AND secondVal < firstVal) THEN
                            SET isValidSubarray TO 0 = 1
                            SET innerIndex TO patternLength
                        END IF
                    ELSE
                        SET innerIndex TO innerIndex + 1
                    END IF
                ELSE
                    SET innerIndex TO innerIndex + 1
                END IF
            END WHILE

            IF isValidSubarray = 1 THEN
                SET resultCounter TO resultCounter + 1
            END IF

            SET currentIndex TO currentIndex + 1
        END WHILE

        RETURN resultCounter
    END FUNCTION
END CLASS