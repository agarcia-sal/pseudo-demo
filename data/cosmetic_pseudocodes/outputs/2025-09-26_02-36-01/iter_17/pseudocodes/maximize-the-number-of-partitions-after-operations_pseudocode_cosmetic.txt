CLASS Solution
    FUNCTION maxPartitionsAfterOperations(s parameter k parameter)
        FUNCTION max_partitions(s parameter k parameter)
                SET u variable TO 0
                DECLARE v variable AS empty set
                DEFINE idx variable AS 0
                WHILE idx < LENGTH OF s parameter
                    DEFINE c variable AS s parameter AT idx
                    IF LENGTH OF v < k parameter THEN
                        INSERT c INTO v
                    ELSE
                        IF c IN v THEN
                            // do nothing, skip increment
                        ELSE
                            SET u TO u + 1
                            SET v TO set containing c
                        END IF
                    END IF
                    SET idx TO idx + 1
                END WHILE
                IF LENGTH OF v > 0 THEN
                    SET u TO u + 1
                END IF
                RETURN u
        END FUNCTION

        SET r variable TO max_partitions(s parameter, k parameter)

        DEFINE p variable AS 0
        REPEAT
            IF p >= LENGTH OF s parameter THEN
                BREAK
            END IF

            DEFINE letterIter variable AS the iterator over letters from 'a' to 'z'

            REPEAT
                IF letterIter IS exhausted THEN
                    BREAK
                END IF

                DEFINE x variable AS NEXT element from letterIter

                IF x EQUALS s parameter AT p THEN
                    // skip iteration, nothing
                ELSE
                    DEFINE t variable AS empty string
                    BEGIN
                        IF p > 0 THEN
                            SET t TO SUBSTRING of s parameter from 0 TO p - 1
                        END IF
                    END
                    SET t TO t + x
                    BEGIN
                        IF p + 1 < LENGTH OF s parameter THEN
                            SET t TO t + SUBSTRING of s parameter from p + 1 TO end
                        END IF
                    END
                    DEFINE w variable AS max_partitions(t, k parameter)
                    IF w > r THEN
                        SET r TO w
                    END IF
                END IF
            UNTIL letterIter exhausted

            SET p TO p + 1
        UNTIL false

        RETURN r
    END FUNCTION
END CLASS