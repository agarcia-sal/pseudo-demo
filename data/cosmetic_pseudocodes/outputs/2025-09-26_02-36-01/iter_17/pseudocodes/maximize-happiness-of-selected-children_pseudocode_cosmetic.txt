CLASS Solution
    FUNCTION maximumHappinessSum(happiness, k)
        DECLARE function comparator(x, y)
            RETURN x GREATER THAN y
        END FUNCTION

        CALL happiness.sort(comparator)

        DECLARE total_accumulator := 0
        DECLARE reduction_factor := 0
        DECLARE pointer := 0

        WHILE pointer LESS THAN k
            DECLARE temp_value := happiness[pointer] MINUS reduction_factor

            IF NOT (temp_value GREATER THAN OR EQUAL TO 0)
                BEGIN
                    temp_value := 0
                END
            END IF

            total_accumulator := total_accumulator PLUS temp_value
            reduction_factor := reduction_factor PLUS 1
            pointer := pointer PLUS 1
        END WHILE

        RETURN total_accumulator
    END FUNCTION
END CLASS