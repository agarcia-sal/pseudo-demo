CLASS Solution
	FUNCTION maximumEnergy(energy, k)
		LET totalLen BE LENGTH(energy)
		LET results BE ARRAY OF totalLen ZEROS
		SET results[totalLen - 1] = energy[totalLen - 1]
		LET highestEnergy BE results[totalLen - 1]

		LET indexDeque = NEW DEQUE WITH ELEMENT totalLen - 1

		LET currentIndex BE totalLen - 2
		WHILE currentIndex >= 0
			IF (indexDeque.FRONT() - currentIndex) >= k THEN
				indexDeque.POP_FRONT()
			END IF

			results[currentIndex] = energy[currentIndex] + results[indexDeque.FRONT()]

			IF highestEnergy < results[currentIndex] THEN
				highestEnergy = results[currentIndex]
			END IF

			WHILE (indexDeque.IS_NOT_EMPTY()) AND (results[currentIndex] >= results[indexDeque.BACK()])
				indexDeque.POP_BACK()
			END WHILE

			indexDeque.PUSH_BACK(currentIndex)

			currentIndex = currentIndex - 1
		END WHILE

		RETURN highestEnergy
	END FUNCTION
END CLASS