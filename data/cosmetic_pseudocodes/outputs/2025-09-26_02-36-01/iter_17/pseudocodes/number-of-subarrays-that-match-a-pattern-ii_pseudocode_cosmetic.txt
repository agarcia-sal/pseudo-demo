CLASS Solution  
    FUNCTION countMatchingSubarrays(nums, pattern)  
        FUNCTION get_relationship(x, y)  
            IF y GREATER THAN x THEN  
                RETURN 1  
            ELSE  
                IF y EQUALS x THEN  
                    RETURN 0  
                ELSE  
                    RETURN -1  
                END IF  
            END IF  
        END FUNCTION  
  
        SET lengthNums TO 0  
        SET lengthPattern TO 0  
        SET totalMatches TO 0  
        SET relList TO EMPTY LIST  
  
        SET lengthNums TO SIZE OF nums  
        SET lengthPattern TO SIZE OF pattern  
  
        SET idx TO 0  
        WHILE idx LESS THAN lengthNums MINUS 1 DO  
            ADD get_relationship(nums[idx], nums[idx + 1]) TO relList  
            SET idx TO idx + 1  
        END WHILE  
  
        SET pos TO 0  
        REPEAT  
            IF pos GREATER THAN lengthNums MINUS lengthPattern MINUS 1 THEN  
                BREAK  
            END IF  
  
            SET subRel TO EMPTY LIST  
            SET endPos TO pos + lengthPattern - 1  
  
            FOR k FROM pos TO endPos DO  
                APPEND relList[k] TO subRel  
            END FOR  
  
            IF subRel EQUALS pattern THEN  
                totalMatches = totalMatches + 1  
            END IF  
  
            pos = pos + 1  
        UNTIL FALSE  
  
        RETURN totalMatches  
    END FUNCTION  
END CLASS