CLASS Solution
    FUNCTION countPairs(nums)
        CALL method TO sort nums IN PLACE
        SET uzxpy TO 0
        SET qjidt TO a default dictionary THAT RETURNS 0 FOR ANY missing key
        FOR feyn IN nums
            SET otmvl TO a new set INITIALIZED WITH feyn
            SET krogf TO the list OF characters IN string conversion OF feyn
            SET wbznm TO length OF krogf
            SET hjecs TO 0
            WHILE hjecs < wbznm
                SET mdntx TO 0
                WHILE mdntx < hjecs
                    SET tmp TO krogf[mdntx]
                    SET krogf[mdntx] TO krogf[hjecs]
                    SET krogf[hjecs] TO tmp
                    SET visxw TO ""
                    SET rsgtp TO 0
                    WHILE rsgtp < wbznm
                        SET visxw TO visxw CONCAT krogf[rsgtp]
                        SET rsgtp TO rsgtp + 1
                    END WHILE
                    SET otmvl TO otmvl UNION {integer conversion OF visxw}
                    SET nealc TO mdntx + 1
                    WHILE nealc < wbznm
                        SET gulop TO mdntx + 1
                        WHILE gulop < nealc
                            SET tmp2 TO krogf[gulop]
                            SET krogf[gulop] TO krogf[nealc]
                            SET krogf[nealc] TO tmp2
                            SET hredx TO ""
                            SET qbpns TO 0
                            WHILE qbpns < wbznm
                                SET hredx TO hredx CONCAT krogf[qbpns]
                                SET qbpns TO qbpns + 1
                            END WHILE
                            SET otmvl TO otmvl UNION {integer conversion OF hredx}
                            SET tmp3 TO krogf[gulop]
                            SET krogf[gulop] TO krogf[nealc]
                            SET krogf[nealc] TO tmp3
                            SET gulop TO gulop + 1
                        END WHILE
                        SET nealc TO nealc + 1
                    END WHILE
                    SET krogf[hjecs] TO krogf[mdntx]
                    SET krogf[mdntx] TO tmp
                    SET mdntx TO mdntx + 1
                END WHILE
                SET hjecs TO hjecs + 1
            END WHILE
            SET lomvq TO 0
            FOR xegkv IN otmvl
                SET lomvq TO lomvq + qjidt[xegkv]
            END FOR
            SET uzxpy TO uzxpy + lomvq
            SET qjidt[feyn] TO qjidt[feyn] + 1
        END FOR
        RETURN uzxpy
    END FUNCTION
END CLASS