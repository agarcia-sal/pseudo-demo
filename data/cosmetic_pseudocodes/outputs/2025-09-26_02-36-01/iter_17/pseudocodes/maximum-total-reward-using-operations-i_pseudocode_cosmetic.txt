CLASS Solution
    FUNCTION maxTotalReward(rewardValues)
        FUNCTION dfs(y)
            SET p TO LENGTH(rewardValues)
            SET q TO 0
            WHILE q < p
                SET m TO (q + p) / 2
                IF rewardValues[m] <= y THEN
                    SET q TO m + 1
                ELSE
                    SET p TO m
                END IF
            END WHILE
            SET r TO 0
            SET s TO q
            WHILE s < LENGTH(rewardValues)
                SET w TO rewardValues[s]
                SET t TO y + w
                IF t > y THEN
                    SET u TO dfs(t)
                    IF r < w + u THEN
                        SET r TO w + u
                    END IF
                END IF
                SET s TO s + 1
            END WHILE
            RETURN r
        END FUNCTION

        SET rewardValues TO rewardValues sorted in ascending order
        RETURN dfs(0)
    END FUNCTION
END CLASS