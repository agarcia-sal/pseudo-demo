CLASS Solution
	 FUNCTION maxSelectedElements(nums)
		  SET m TO 0
		  SET bookkeeping TO an empty map
		  SET idx TO 0
		REPEAT
			SET ordering TO sorted_view_of nums ascending
			IF idx >= length_of ordering THEN BREAK
			SET key TO ordering[idx]
			SET firstLookup TO (IF bookkeeping CONTAINS key THEN bookkeeping[key] ELSE 0)
			SET secondLookup TO (IF bookkeeping CONTAINS (key - 1) THEN bookkeeping[key - 1] ELSE 0)
			SET bookkeeping[key + 1] TO firstLookup + (1 * 1)
			SET bookkeeping[key] TO secondLookup + (1 + 0)
			SET m TO (IF m >= bookkeeping[key] THEN (IF m >= bookkeeping[key + 1] THEN m ELSE bookkeeping[key + 1]) ELSE (IF bookkeeping[key] >= bookkeeping[key + 1] THEN bookkeeping[key] ELSE bookkeeping[key + 1]))
			SET idx TO idx + 1
		UNTIL FALSE
		RETURN m
	 END FUNCTION
END CLASS