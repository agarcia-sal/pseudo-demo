CLASS Solution

    FUNCTION countMatchingSubarrays(nums, pattern)
    
        FUNCTION get_relationship(x, y)
            IF ( (x < y) = TRUE )
                RETURN 1
            ELSE
                IF ( NOT (x = y) )
                    RETURN -1
                ELSE
                    RETURN 0
                END IF
            END IF
        END FUNCTION

        SET length_nums TO 0
        WHILE length_nums < LENGTH(nums)
            SET length_nums TO length_nums + 1
        END WHILE

        SET length_pattern TO 0
        WHILE length_pattern < LENGTH(pattern)
            SET length_pattern TO length_pattern + 1
        END WHILE

        SET counter TO 0

        SET rels TO []
        SET pos_a TO 0
        WHILE pos_a <= length_nums - 2
            SET val_rel TO get_relationship(nums[pos_a], nums[pos_a + 1])
            rels.APPEND(val_rel)
            SET pos_a TO pos_a + 1
        END WHILE

        SET pos_b TO 0
        WHILE pos_b <= length_nums - length_pattern - 1
            SET equal_flag TO TRUE
            SET offset TO 0
            WHILE offset < length_pattern - 1 AND equal_flag = TRUE
                IF NOT (rels[pos_b + offset] = pattern[offset])
                    SET equal_flag TO FALSE
                END IF
                SET offset TO offset + 1
            END WHILE
            IF equal_flag = TRUE
                SET counter TO counter + 1
            END IF
            SET pos_b TO pos_b + 1
        END WHILE

        RETURN counter
    END FUNCTION

END CLASS