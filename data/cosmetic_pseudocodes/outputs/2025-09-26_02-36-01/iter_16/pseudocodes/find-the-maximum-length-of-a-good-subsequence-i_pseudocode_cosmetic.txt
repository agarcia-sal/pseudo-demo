CLASS Solution
    FUNCTION maximumLength(nums k)
        SET p TO LENGTH_OF(nums)
        SET q TO a new list
        SET r TO 0
        SET s TO 0
        WHILE s LESS_THAN p
            SET t TO a new list
            SET u TO 0
            WHILE u LESS_EQUAL k
                APPEND 1 TO t
                SET u TO u PLUS 1
            END WHILE
            APPEND t TO q
            SET s TO s PLUS 1
        END WHILE
        SET v TO 0
        REPEAT
            IF v GREATER_OR_EQUAL p THEN
                BREAK
            END IF
            SET w TO nums[v]
            SET x TO 0
            WHILE x LESS_EQUAL k
                SET y TO 0
                WHILE y LESS_THAN v
                    SET z TO nums[y]
                    IF w EQUALS z THEN
                        IF q[v][x] LESS_THAN q[y][x] PLUS 1 THEN
                            SET q[v][x] TO q[y][x] PLUS 1
                        END IF
                    ELSE IF x GREATER_THAN 0 THEN
                        IF q[v][x] LESS_THAN q[y][x MINUS 1] PLUS 1 THEN
                            SET q[v][x] TO q[y][x MINUS 1] PLUS 1
                        END IF
                    END IF
                    SET y TO y PLUS 1
                END WHILE
                SET x TO x PLUS 1
            END WHILE
            IF r LESS_THAN q[v][k] THEN
                SET r TO q[v][k]
            END IF
            SET v TO v PLUS 1
        UNTIL FALSE
        RETURN r
    END FUNCTION
END CLASS