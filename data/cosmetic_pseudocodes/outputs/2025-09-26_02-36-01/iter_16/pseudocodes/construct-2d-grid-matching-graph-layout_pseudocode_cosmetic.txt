CLASS Solution
	FUNCTION constructGridLayout(m, t)
		SET A TO a new list of size m, where each element is an empty list
		SET p TO zero
		WHILE p LESS THAN length of t
			SET w TO element at position p of t
			SET z TO element at position p PLUS one of t
			APPEND z TO element at position w of A
			APPEND w TO element at position z of A
			SET p TO p PLUS two
		END WHILE

		SET B TO a list with five elements each initialized to -1
		SET q TO 0
		REPEAT
			EXIT WHEN q EQUALS length of A
			SET R TO element at position q of A
			SET s TO length of R
			SET element at position s of B TO q
			SET q TO q PLUS one
		UNTIL false

		DECLARE J AS a list
		IF element at index 1 of B NOT EQUAL TO -1 THEN
			SET J TO a new list containing element at index 1 of B
		ELSE
			IF element at index 4 of B EQUALS -1 THEN
				SET o TO element at index 2 of B
				SET h TO 0
				WHILE h LESS THAN length of element at position o of A
					SET y TO element at h of element at position o of A
					IF length of element at y of A IS EQUAL TO 2 THEN
						SET J TO list of two elements: o and y
						BREAK
					END IF
					SET h TO h PLUS one
				END WHILE
			ELSE
				SET x TO element at index 2 of B
				SET J TO list containing x
				SET c TO x
				SET x TO element at position 0 of element at position x of A
				WHILE length of element at x of A GREATER THAN 2
					APPEND x TO J
					SET d TO 0
					WHILE d LESS THAN length of element at x of A
						SET y TO element at d of element at x of A
						IF y NOT EQUAL TO c AND length of element at y of A LESS THAN 4 THEN
							SET c TO x
							SET x TO y
							BREAK
						END IF
						SET d TO d PLUS one
					END WHILE
				END WHILE
				APPEND x TO J
			END IF
		END IF

		SET result TO list containing J
		SET visited TO a list of size m with all values set to false
		FOR k FROM 1 TO (m DIVIDED BY length of J) MINUS 1 STEP 1
			FOR EACH s IN J
				SET element at s of visited TO true
			END FOR
			SET nextRow TO empty list
			FOR EACH s IN J
				SET e TO 0
				WHILE e LESS THAN length of element at s of A
					SET v TO element at e of element at s of A
					IF element at v of visited EQUALS false THEN
						APPEND v TO nextRow
						BREAK
					END IF
					SET e TO e PLUS 1
				END WHILE
			END FOR
			APPEND nextRow TO result
			SET J TO nextRow
		END FOR

		RETURN result
	END FUNCTION
END CLASS