CLASS Solution
  FUNCTION maxTotalReward(rewardValues)
    FUNCTION dfs(a)
      SET idx TO 0
      WHILE idx < LENGTH(rewardValues) AND rewardValues[idx] <= a
        SET idx TO idx + 1
      END WHILE
      SET result TO 0
      SET p TO idx
      REPEAT
        IF p >= LENGTH(rewardValues)
          BREAK
        END IF
        SET current TO rewardValues[p]
        SET sumVal TO a + current
        IF NOT (sumVal <= a)
          SET temp TO dfs(sumVal)
          SET candidate TO current + temp
          IF candidate > result
            SET result TO candidate
          END IF
        END IF
        SET p TO p + 1
      UNTIL FALSE
      RETURN result
    END FUNCTION

    FOR i FROM 1 TO LENGTH(rewardValues) - 1
      SET j TO i
      SET keyVal TO rewardValues[j]
      WHILE j > 0 AND rewardValues[j - 1] > keyVal
        SET rewardValues[j] TO rewardValues[j - 1]
        SET j TO j - 1
      END WHILE
      SET rewardValues[j] TO keyVal
    END FOR

    RETURN dfs(0)
  END FUNCTION
END CLASS