```pseudocode
CLASS Solution
    FUNCTION maximumEnergy(energy, k)
        LET q BE an empty double-ended queue
        LET m BE LENGTH OF energy
        LET f BE an array of size m FILLED WITH 0
        LET res BE energy[m - 1]
        f[m - 1] = energy[m - 1]
        APPEND (m - 1) TO q

        LET idx BE m - 2
        WHILE idx >= 0
            WHILE q IS NOT empty AND (q[0] - idx) >= k
                REMOVE FIRST ELEMENT FROM q
            END WHILE

            LET val1 BE energy[idx]
            LET val2 BE f[q[0]]
            LET total BE val1 + val2
            f[idx] = total

            IF res < total
                res = total
            END IF

            WHILE q IS NOT empty AND f[q[-1]] <= f[idx]
                REMOVE LAST ELEMENT FROM q
            END WHILE

            APPEND idx TO q
            idx = idx - 1
        END WHILE

        RETURN res
    END FUNCTION
END CLASS
```