```  
CLASS Solution  
    FUNCTION countWinningSequences(s)  
        FUNCTION calc(a, b)  
            IF a GREATER THAN b THEN  
                IF a EQUALS 2 AND b EQUALS 0 THEN  
                    RETURN -1  
                ELSE  
                    RETURN 1  
                END IF  
            ELSE IF a LESS THAN b THEN  
                IF a EQUALS 0 AND b EQUALS 2 THEN  
                    RETURN 1  
                ELSE  
                    RETURN -1  
                END IF  
            ELSE  
                RETURN 0  
            END IF  
        END FUNCTION  

        FUNCTION dfs(x, y, z)  
            IF (LEN(s) - x) LESS THAN OR EQUAL y THEN  
                RETURN 0  
            END IF  
            IF x GREATER THAN OR EQUAL LEN(s) THEN  
                IF y LESS THAN 0 THEN  
                    RETURN 1  
                ELSE  
                    RETURN 0  
                END IF  
            END IF  

            SET total TO 0  
            SET idx TO 0  
            WHILE idx LESS THAN OR EQUAL 2 DO  
                IF idx NOT EQUAL z THEN  
                    SET total TO total + dfs(x + 1, y + calc(d[(SUBSTRING s AT x FOR 1)], idx), idx)  
                    SET total TO total MOD mod  
                END IF  
                SET idx TO idx + 1  
            END WHILE  
            RETURN total  
        END FUNCTION  

        SET mod TO 1000000000 + 7  
        SET d TO DICTIONARY WITH KEYS 'F'->0, 'W'->1, 'E'->2  
        SET result TO dfs(0, 0, -1)  
        CALL dfs CLEAR CACHE  
        RETURN result  
    END FUNCTION  
END CLASS  
```