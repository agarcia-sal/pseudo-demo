``` 
CLASS Solution
    FUNCTION maximumValueSum(nums k edges)
        SET vgaij TO 0
        SET snivj TO 0
        SET ypepd TO 1e9 + 7

        SET hgzuq TO 0
        SET vrnpxf TO 0
        SET dctewa TO ypepd

        DEFINE FUNCTION abs_val(x)
            IF x < 0 THEN
                RETURN -x
            ELSE
                RETURN x
            END IF
        END FUNCTION

        SET idx TO 0
        WHILE idx < LENGTH(nums)
            SET uajrm TO nums[idx]
            SET qvtyo TO uajrm XOR k
            SET wzysf TO qvtyo - uajrm
            IF wzysf > 0 THEN
                SET hncre TO snivj + 1
                SET snivj TO hncre
            END IF
            IF uajrm > qvtyo THEN
                SET hgzuq TO hgzuq + uajrm
            ELSE
                SET hgzuq TO hgzuq + qvtyo
            END IF
            SET eylzr TO abs_val(wzysf)
            IF eylzr < dctewa THEN
                SET dctewa TO eylzr
            END IF
            SET idx TO idx + 1
        END WHILE

        IF snivj % 2 != 0 THEN
            SET hgzuq TO hgzuq - dctewa
        END IF

        RETURN hgzuq
    END FUNCTION
END CLASS
```