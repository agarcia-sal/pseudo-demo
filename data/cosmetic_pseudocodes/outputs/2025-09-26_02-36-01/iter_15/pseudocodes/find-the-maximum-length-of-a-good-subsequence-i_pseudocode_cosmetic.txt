```pseudocode
CLASS Solution
    FUNCTION maximumLength(nums k)
        SET p TO 0
        SET q TO LENGTH OF nums
        SET r TO a 2D list with q rows and (k + 1) columns each initialized to 1
        SET s TO 0
        SET t TO 0
        SET u TO 0
        SET v TO 0
        WHILE p < q
            SET w TO nums[p]
            SET x TO 0
            WHILE x <= k
                SET y TO p - 1
                WHILE y >= 0
                    SET z TO nums[y]
                    IF NOT (w â‰  z)
                        SET r[p][x] TO MAXIMUM OF r[p][x] AND (r[y][x] + 1)
                    ELSE
                        IF x > 0
                            SET r[p][x] TO MAXIMUM OF r[p][x] AND (r[y][x - 1] + 1)
                        END IF
                    END IF
                    SET y TO y - 1
                END WHILE
                SET x TO x + 1
            END WHILE
            IF s < r[p][k]
                SET s TO r[p][k]
            END IF
            SET p TO p + 1
        END WHILE
        RETURN s
    END FUNCTION
END CLASS
```