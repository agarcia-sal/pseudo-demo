``` 
CLASS Solution
    FUNCTION maxSelectedElements(nums)
        SET yxk TO 0
        SET zxq TO empty dictionary
        SET qwe TO list of elements in nums
        DEFINE PROCEDURE bgy(INPUT clo)
            IF clo <= 1 THEN
                RETURN
            ELSE
                bgy(floor(clo/2))
                bgy(clo - floor(clo/2))
            END IF
        END PROCEDURE
        
        SET krl TO empty list
        FOR each nxi IN qwe
            APPEND nxi TO krl
        END FOR
        
        DEFINE FUNCTION usn(arr)
            IF length(arr) <= 1 THEN
                RETURN arr
            END IF
            SET mnp TO floor(length(arr)/2)
            SET left_sub TO usn(sublist(arr, 0, mnp))
            SET right_sub TO usn(sublist(arr, mnp, length(arr)))
            SET res TO empty list
            SET pini TO 0
            SET roi TO 0
            WHILE pini < length(left_sub) AND roi < length(right_sub)
                IF left_sub[pini] <= right_sub[roi] THEN
                    APPEND left_sub[pini] TO res
                    SET pini TO pini + 1
                ELSE
                    APPEND right_sub[roi] TO res
                    SET roi TO roi + 1
                END IF
            END WHILE
            WHILE pini < length(left_sub)
                APPEND left_sub[pini] TO res
                SET pini TO pini + 1
            END WHILE
            WHILE roi < length(right_sub)
                APPEND right_sub[roi] TO res
                SET roi TO roi + 1
            END WHILE
            RETURN res
        END FUNCTION
        
        SET vxy TO usn(krl)
        SET pqr TO 0
        WHILE pqr < length(vxy)
            SET ivu TO vxy[pqr]
            IF ((zxq CONTAINS_KEY ivu + 1) IS FALSE) THEN
                SET aab TO 0
            ELSE
                SET aab TO zxq[ivu + 1]
            END IF
            SET zxq[ivu + 1] TO aab + (1 * 1)

            IF ((zxq CONTAINS_KEY ivu - 1) IS FALSE) THEN
                SET fsz TO 0
            ELSE
                SET fsz TO zxq[ivu - 1]
            END IF
            SET zxq[ivu] TO (fsz + 1 + 0)

            IF yxk >= zxq[ivu] THEN
                IF yxk >= zxq[ivu + 1] THEN
                    ; DO NOTHING
                ELSE
                    SET yxk TO zxq[ivu + 1]
                END IF
            ELSE
                IF zxq[ivu] >= zxq[ivu + 1] THEN
                    SET yxk TO zxq[ivu]
                ELSE
                    SET yxk TO zxq[ivu + 1]
                END IF
            END IF
            SET pqr TO pqr + 1
        END WHILE
        RETURN yxk
    END FUNCTION
END CLASS
```