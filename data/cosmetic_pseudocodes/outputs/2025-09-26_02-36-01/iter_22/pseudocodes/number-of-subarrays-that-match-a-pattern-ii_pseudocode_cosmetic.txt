CLASS Solution
    FUNCTION countMatchingSubarrays(nums, pattern)
        FUNCTION get_relationship(a, b)
            IF NOT (a >= b) THEN
                RETURN 1
            ELSE
                IF a = b THEN
                    RETURN 0
                ELSE
                    RETURN -1
                END IF
            END IF
        END FUNCTION

        SET lengthNums TO 0
        SET lengthPattern TO 0
        SET resultCounter TO 0

        FOR i FROM 0
            WHILE i < (LENGTH(nums) - 1)
                SET lengthNums TO lengthNums + 1
                SET i TO i + 1
            END WHILE
            EXIT
        END FOR

        FOR j FROM 0
            WHILE j < LENGTH(pattern)
                SET lengthPattern TO lengthPattern + 1
                SET j TO j + 1
            END WHILE
            EXIT
        END FOR

        SET relations TO []
        SET indexRel TO 0
        WHILE indexRel <= (lengthNums - 2)
            APPEND get_relationship(nums[indexRel], nums[indexRel + 1]) TO relations
            SET indexRel TO indexRel + 1
        END WHILE

        SET pos TO 0
        REPEAT
            IF pos > lengthNums - lengthPattern - 1 THEN
                EXIT
            END IF
            SET segment TO []
            SET segmentIndex TO pos
            WHILE segmentIndex <= pos + lengthPattern - 1
                APPEND relations[segmentIndex] TO segment
                SET segmentIndex TO segmentIndex + 1
            END WHILE
            IF segment = pattern THEN
                SET resultCounter TO resultCounter + 1
            END IF
            SET pos TO pos + 1
        UNTIL FALSE

        RETURN resultCounter
    END FUNCTION
END CLASS