CLASS Solution
    FUNCTION maxBottlesDrunk(numBottles numBottles numExchange numExchange)
        SET countConsumed TO 0
        SET bottlesEmpty TO 0
        repeat
            IF NOT (numBottles > 0) THEN
                BREAK
            END IF
            SET countConsumed TO countConsumed + numBottles
            SET bottlesEmpty TO bottlesEmpty + numBottles
            SET numBottles TO 0
            WHILE (numExchange <= bottlesEmpty) DO
                SET bottlesEmpty TO bottlesEmpty - numExchange
                SET numBottles TO numBottles + 1
                SET numExchange TO numExchange + 1
            END WHILE
        UNTIL FALSE
        RETURN countConsumed
    END FUNCTION
END CLASS