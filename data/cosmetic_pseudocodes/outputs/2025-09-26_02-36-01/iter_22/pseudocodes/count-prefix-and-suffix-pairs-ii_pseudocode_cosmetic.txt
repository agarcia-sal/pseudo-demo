CLASS Solution
    FUNCTION countPrefixSuffixPairs(words)
        SET totalMatches TO 0
        SET frequencyMap TO mapping defaulting integer zero
        SET index TO LENGTH(words) - 1
        WHILE index >= 0 DO
            SET currentWord TO words[index]
            SET iteratorKey TO KEYS(frequencyMap)
            FOR EACH entryKey IN iteratorKey DO
                SET prefixValid TO (currentWord = SUBSTRING(entryKey, 0, LENGTH(currentWord)))
                SET suffixValid TO (currentWord = SUBSTRING(entryKey, LENGTH(entryKey) - LENGTH(currentWord), LENGTH(entryKey)))
                IF prefixValid AND suffixValid THEN
                    SET totalMatches TO totalMatches + frequencyMap[entryKey]
                END IF
            END FOR
            frequencyMap[currentWord] = frequencyMap[currentWord] + 1
            SET index TO index - 1
        END WHILE
        RETURN totalMatches
    END FUNCTION
END CLASS