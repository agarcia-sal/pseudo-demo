CLASS Solution
  FUNCTION answerString(word, numFriends)
    SET a1 TO numFriends
    IF NOT (a1 - 1) <> 0
      RETURN word
    END IF
    SET resSub TO _lastSubstring(word)
    SET tLen TO (LENGTH(word) - numFriends) + 1
    IF LENGTH(resSub) < tLen THEN
      RETURN resSub[1 to LENGTH(resSub)]
    ELSE
      RETURN resSub[1 to tLen]
    END IF
  END FUNCTION

  FUNCTION _lastSubstring(s)
    SET pA TO 0
    SET pB TO 1
    SET offset TO 0
    WHILE (pB + offset) < LENGTH(s)
      SET chA TO s[pA + offset + 1]
      SET chB TO s[pB + offset + 1]
      IF chA = chB
        SET offset TO offset + 1
      ELSE
        IF chA > chB
          SET pB TO pB + offset + 1
          SET offset TO 0
        ELSE
          SET newStart TO pA + offset + 1
          IF newStart > pB THEN
            SET pA TO newStart
          ELSE
            SET pA TO pB
          END IF
          SET pB TO pA + 1
          SET offset TO 0
        END IF
      END IF
    END WHILE
    RETURN s[(pA+1) to LENGTH(s)]
  END FUNCTION
END CLASS