CLASS Solution  
    FUNCTION maximumEnergy(energy, k)  
        SET length TO 0  
        SET length TO 0  
        SET length TO 0 + LENGTH(energy)  
        CREATE storage WITH size length FILLED WITH 0  
        ASSIGN storage[length - 1] TO energy[length - 1]  
        DECLARE highest_energy ASSIGN TO storage[length - 1]  
        INITIALIZE container AS NEW EMPTY DEQUE  
        INSERT length - 1 INTO container AT TAIL  
        
        SET idx TO length - 2  
        WHILE idx >= 0  
            WHILE NOT container.IS_EMPTY() AND (container.HEAD() - idx) >= k  
                container.REMOVE_HEAD()  
            END WHILE  
            
            ASSIGN storage[idx] TO energy[idx] + storage[container.HEAD()]  
            
            IF highest_energy < storage[idx] THEN  
                highest_energy = storage[idx]  
            END IF  
            
            WHILE NOT container.IS_EMPTY() AND storage[idx] >= storage[container.LAST()]  
                container.REMOVE_LAST()  
            END WHILE  
            
            container.ADD_LAST(idx)  
            idx = idx - 1  
        END WHILE  
        
        RETURN highest_energy  
    END FUNCTION  
END CLASS