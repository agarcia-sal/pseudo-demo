CLASS Solution
    FUNCTION countMatchingSubarrays(nums parameter, pattern parameter)
        SET u TO 0
        SET v TO 0
        SET w TO 0
        SET x TO LENGTH OF nums parameter
        SET y TO LENGTH OF pattern parameter
        SET z TO 0
        WHILE w <= x - y - 1
            SET A TO 1
            SET B TO 0
            WHILE B < y - 1 AND A = 1
                SET C TO (pattern parameter[B] = 1)
                SET D TO (nums parameter[w + B + 1] <= nums parameter[w + B])
                IF C AND D THEN
                    SET A TO 0
                ELSE
                    SET E TO (pattern parameter[B] = 0)
                    SET F TO NOT(nums parameter[w + B + 1] = nums parameter[w + B])
                    IF E AND F THEN
                        SET A TO 0
                    ELSE
                        SET G TO (pattern parameter[B] = -1)
                        SET H TO (nums parameter[w + B + 1] >= nums parameter[w + B])
                        IF G AND H THEN
                            SET A TO 0
                        END IF
                    END IF
                END IF
                SET B TO B + 1
            END WHILE
            IF A = 1 THEN
                SET z TO z + 1
            END IF
            SET w TO w + 1
        END WHILE
        RETURN z
    END FUNCTION
END CLASS