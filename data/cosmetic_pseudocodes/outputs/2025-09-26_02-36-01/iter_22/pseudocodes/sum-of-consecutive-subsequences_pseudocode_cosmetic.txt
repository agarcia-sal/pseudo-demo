CLASS Solution
    FUNCTION getSum(nums)
        FUNCTION calc(nums)
            SET size TO LENGTH(nums)
            SET firstList TO ARRAY_INITIALIZED_WITH(size, 0)
            SET secondList TO ARRAY_INITIALIZED_WITH(size, 0)
            SET firstCounter TO NEW Counter()
            SET idx1 TO 1
            WHILE idx1 < size
                SET val1 TO nums[idx1 - 1]
                SET prevCount1 TO firstCounter.GET(val1)
                firstCounter.SET(val1, prevCount1 + 1)
                firstList[idx1] = firstCounter.GET(val1)
                idx1 = idx1 + 1
            END WHILE

            secondCounter = NEW Counter()
            SET idx2 TO size - 2
            WHILE idx2 >= 0
                SET val2 TO nums[idx2 + 1]
                SET prevCount2 TO secondCounter.GET(val2)
                secondCounter.SET(val2, prevCount2 + 1)
                secondList[idx2] = secondCounter.GET(val2)
                idx2 = idx2 - 1
            END WHILE

            SET accumulator TO 0
            SET pos TO 0
            WHILE pos < size
                SET leftVal TO firstList[pos]
                SET rightVal TO secondList[pos]
                SET currentVal TO nums[pos]
                SET partialSum TO (leftVal + rightVal + (leftVal * rightVal)) * currentVal
                accumulator = accumulator + partialSum
                pos = pos + 1
            END WHILE

            RETURN accumulator MODULO mod
        END FUNCTION

        SET mod TO (10 * 10 * 10 * 10 * 10 * 10 * 10 * 10 * 10) + 7
        SET resultX TO calc(nums)
        SET reversedNums TO EMPTY ARRAY
        SET iRev TO LENGTH(nums) - 1
        WHILE iRev >= 0
            APPEND nums[iRev] TO reversedNums
            iRev = iRev - 1
        END WHILE
        SET resultY TO calc(reversedNums)
        SET sumAll TO 0
        SET idxSum TO 0
        WHILE idxSum < LENGTH(nums)
            sumAll = sumAll + nums[idxSum]
            idxSum = idxSum + 1
        END WHILE
        RETURN (resultX + resultY + sumAll) MODULO mod
    END FUNCTION
END CLASS