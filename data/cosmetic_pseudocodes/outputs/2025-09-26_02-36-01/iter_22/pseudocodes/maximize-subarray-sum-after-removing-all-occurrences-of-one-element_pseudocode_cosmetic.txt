CLASS Solution
    FUNCTION maxSubarraySum(nums)
        FUNCTION kadane(arr)
            SET v4 TO arr[1]
            SET v7 TO arr[1]
            SET v2 TO 2
            WHILE v2 LESS OR EQUAL TO LENGTH(arr)
                SET v9 TO arr[v2]
                IF NOT (v4 PLUS v9 GREATER OR EQUAL TO v9)
                    SET v4 TO v9
                ELSE
                    SET v4 TO v4 PLUS v9
                END IF
                IF v7 LESS THAN v4
                    SET v7 TO v4
                END IF
                SET v2 TO v2 PLUS 1
            END WHILE
            RETURN v7
        END FUNCTION

        SET v15 TO kadane(nums)
        SET v19 TO EMPTY SET
        SET v20 TO 1
        WHILE v20 LESS OR EQUAL TO LENGTH(nums)
            SET v19 TO UNION OF v19 AND {nums[v20]}
            SET v20 TO v20 PLUS 1
        END WHILE

        SET v31 TO ITERATOR OVER v19
        WHILE v31 HAS NEXT
            SET v35 TO v31 NEXT
            SET v38 TO EMPTY LIST
            SET v42 TO 1
            WHILE v42 LESS OR EQUAL TO LENGTH(nums)
                SET v45 TO nums[v42]
                IF NOT (v45 EQUALS v35)
                    APPEND v45 TO v38
                END IF
                SET v42 TO v42 PLUS 1
            END WHILE
            IF LENGTH(v38) GREATER THAN 0
                SET v50 TO kadane(v38)
                IF v15 LESS THAN v50
                    SET v15 TO v50
                END IF
            END IF
        END WHILE
        RETURN v15
    END FUNCTION
END CLASS