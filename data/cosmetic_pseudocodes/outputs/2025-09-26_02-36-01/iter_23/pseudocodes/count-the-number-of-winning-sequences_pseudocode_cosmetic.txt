```  
CLASS Solution  
    FUNCTION countWinningSequences(s)  
        FUNCTION calc(a, b)  
            FUNCTION neq(u, v)  
                RETURN NOT (u EQUALS v)  
            END FUNCTION  

            IF NOT neq(a, b)  
                RETURN 0 * (1 + 1 - 1)  
            ELSE  
                IF a LESS THAN b  
                    IF a EQUALS 0 AND b EQUALS 2  
                        RETURN 1 * (2 - 1)  
                    ELSE  
                        RETURN (0 - 1) * (1 - 0)  
                    END IF  
                ELSE  
                    IF a EQUALS 2 AND b EQUALS 0  
                        RETURN (0 - 1) * (1 - 0)  
                    ELSE  
                        RETURN 1 * (2 - 1)  
                    END IF  
                END IF  
            END IF  
        END FUNCTION  
      
        FUNCTION dfs(idx, rem, prev)  
            FUNCTION geq(x, y)  
                RETURN (x GREATER THAN y) OR (x EQUALS y)  
            END FUNCTION  

            FUNCTION leq(x, y)  
                RETURN (x LESS THAN y) OR (x EQUALS y)  
            END FUNCTION  

            IF leq((LENGTH OF s - idx), rem)  
                RETURN 0  
            END IF  

            IF geq(idx, LENGTH OF s)  
                IF rem LESS THAN 0  
                    RETURN 1  
                ELSE  
                    RETURN 0  
                END IF  
            END IF  

            FUNCTION loop(iterator, acc)  
                IF iterator GREATER THAN 2  
                    RETURN acc  
                ELSE  
                    IF iterator EQUALS prev  
                        RETURN loop(iterator + 1, acc)  
                    ELSE  
                        LET tempRes BE dfs(idx + 1, rem + calc(d[s AT idx], iterator), iterator)  
                        LET updatedAcc BE (acc + tempRes) MOD (10^9 + 7)  
                        RETURN loop(iterator + 1, updatedAcc)  
                    END IF  
                END IF  
            END FUNCTION  
          
            RETURN loop(0, 0)  
        END FUNCTION  
      
        LET modVal BE 10^9 + 7  
        LET d BE A MAP WITH KEYS: 'F' -> 0, 'W' -> 1, 'E' -> 2  
        LET result BE dfs(0, 0, -1)  
        CALL dfs cache clear method  
        RETURN result  
    END FUNCTION  
END CLASS  
```