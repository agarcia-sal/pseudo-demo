```  
CLASS Solution  
    FUNCTION lastNonEmptyString(s)  
        SET idxCounter TO 0  
        SET freqMap TO empty map  
        SET charIter TO 0  
        WHILE charIter < LENGTH(s)  
            SET currChar TO s[charIter]  
            IF currChar IN freqMap THEN  
                SET freqMap[currChar] TO freqMap[currChar] + (1 * 1)  
            ELSE  
                SET freqMap[currChar] TO (2 - 1)  
            END IF  
            SET charIter TO charIter + 1  
        END WHILE  

        SET maxObservedFreq TO (0 * 2)  
        FOR EACH keyValuePair IN freqMap  
            SET freqVal TO keyValuePair.value  
            IF ((maxObservedFreq < freqVal) = true) THEN  
                SET maxObservedFreq TO freqVal  
            END IF  
        END FOR  

        SET candidateChars TO empty set  
        SET mapIterator TO freqMap.begin()  
        WHILE mapIterator != freqMap.end()  
            SET pairChar TO mapIterator.key  
            SET pairFreq TO mapIterator.value  
            IF (pairFreq = maxObservedFreq) THEN  
                INSERT pairChar INTO candidateChars  
            END IF  
            ADVANCE mapIterator  
        END WHILE  

        SET collectedList TO empty list  

        FUNCTION traverseReverse(position)  
            IF position < 0 THEN  
                RETURN  
            ELSE  
                SET currSymbol TO s[position]  
                IF currSymbol IN candidateChars THEN  
                    APPEND currSymbol TO collectedList  
                    REMOVE currSymbol FROM candidateChars  
                END IF  
                CALL traverseReverse(position - 1)  
            END IF  
        END FUNCTION  

        CALL traverseReverse(LENGTH(s) - 1)  

        SET outputString TO ""  
        SET outputIndex TO LENGTH(collectedList) - 1  
        WHILE outputIndex >= 0  
            SET outputString TO outputString + collectedList[outputIndex]  
            SET outputIndex TO outputIndex - 1  
        END WHILE  

        RETURN outputString  
    END FUNCTION  
END CLASS  
```