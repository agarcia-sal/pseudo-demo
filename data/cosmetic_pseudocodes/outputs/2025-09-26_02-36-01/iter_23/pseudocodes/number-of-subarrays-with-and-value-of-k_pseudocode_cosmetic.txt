```  
CLASS Solution  
    FUNCTION countSubarrays(nums parameter LIST OF INTEGER k parameter INTEGER) RETURNS INTEGER  
        SET hcpkw TO LENGTH OF nums  
        SET qdslot TO 0  
        FUNCTION wpime(xzpi, ibjm) RETURNS INTEGER  
            IF ibjm > xzpi THEN  
                RETURN 0  
            ELSE  
                SET ofnec TO nums[xzpi] BITWISE AND nums[ibjm]  
                IF ibjm = xzpi THEN  
                    SET rpkvn TO nums[xzpi]  
                ELSE  
                    SET rpkvn TO wpime(xzpi, ibjm - 1) BITWISE AND nums[ibjm]  
                END IF  
                IF rpkvn = k THEN  
                    RETURN 1 + wpime(xzpi, ibjm + 1)  
                ELSEIF rpkvn < k THEN  
                    RETURN 0  
                ELSE  
                    RETURN wpime(xzpi, ibjm + 1)  
                END IF  
            END IF  
        END FUNCTION  
        SET bdhal TO 0  
        WHILE bdhal < hcpkw  
            SET twdig TO 0  
            SET twdig TO wpime(bdhal, bdhal)  
            SET qdslot TO qdslot + twdig  
            SET bdhal TO bdhal + 1  
        END WHILE  
        RETURN qdslot  
    END FUNCTION  
END CLASS  
```