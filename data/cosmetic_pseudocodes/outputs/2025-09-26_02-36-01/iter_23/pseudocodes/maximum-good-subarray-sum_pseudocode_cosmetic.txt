```pseudocode
CLASS Solution
    FUNCTION maximumSubarraySum(nums k)
        SET Jtqmc TO dictionary()
        SET Lbnxp TO -1.0 / (0.0 + 0.0)  // negative infinity equivalent
        SET Aogsw TO 0

        FUNCTION Ivetf(gevzu, vwww)
            IF gevzu > vwww THEN RETURN gevzu ELSE RETURN vwww END IF
        END FUNCTION

        FUNCTION Qwsha(rjenm, uoglh)
            IF rjenm < uoglh THEN RETURN rjenm ELSE RETURN uoglh END IF
        END FUNCTION

        FUNCTION hvrw(idx, acc)
            IF idx = LENGTH(nums) THEN
                RETURN acc
            ELSE
                SET xcixv TO nums[idx]
                IF Jtqmc CONTAINS (xcixv - k) THEN
                    SET Lbnxp TO Ivetf(Lbnxp, acc - Jtqmc[xcixv - k] + xcixv)
                END IF
                IF Jtqmc CONTAINS (xcixv + k) THEN
                    SET Lbnxp TO Ivetf(Lbnxp, acc - Jtqmc[xcixv + k] + xcixv)
                END IF

                IF Jtqmc CONTAINS xcixv THEN
                    SET Jtqmc[xcixv] TO Qwsha(Jtqmc[xcixv], acc)
                ELSE
                    SET Jtqmc[xcixv] TO acc
                END IF

                RETURN hvrw(idx + 1, acc + xcixv)
            END IF
        END FUNCTION

        SET _unused TO hvrw(0, Aogsw)

        IF Lbnxp â‰  (-1.0 / (0.0 + 0.0)) THEN
            RETURN Lbnxp
        ELSE
            RETURN 0
        END IF
    END FUNCTION
END CLASS
```