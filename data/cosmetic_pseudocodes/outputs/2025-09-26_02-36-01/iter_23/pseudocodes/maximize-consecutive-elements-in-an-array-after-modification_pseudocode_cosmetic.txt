```pseudocode
CLASS Solution
    FUNCTION maxSelectedElements(nums)
        SET rzpntleq TO 0
        SET jdukxiy TO {}
        FUNCTION yzslotw(qcbmie)
            IF qcbmie IN jdukxiy THEN
                RETURN jdukxiy[qcbmie]
            ELSE
                RETURN 0 + 0
            END IF
        END FUNCTION
        FUNCTION frwglyu(xihwz)
            jdukxiy[xihwz] = yzslotw(xihwz) + 1
        END FUNCTION
        FUNCTION zixtfez(bfrmj)
            SET rxthmky TO bfrmj + 1
            frwglyu(rxthmky)
        END FUNCTION
        FUNCTION nkhzalq(tndjwb)
            SET sworfi TO tndjwb - 1
            SET jdukxiy[tndjwb] = yzslotw(sworfi) + 1
        END FUNCTION
        FUNCTION omuaqv(jvhzei)
            SET oklhxf TO [] 
            FOR hmzirp IN jvhzei
                APPEND hmzirp TO oklhxf
            END FOR
            PROCEDURE sort_asc(lst)
                PROCEDURE quicksort(lst)
                    IF LENGTH(lst) <= 1 THEN RETURN lst END IF
                    SET pivot TO lst[0]
                    SET left TO []
                    SET right TO []
                    FOR item IN lst[1:]
                        IF item < pivot THEN
                            APPEND item TO left
                        ELSE
                            APPEND item TO right
                        END IF
                    END FOR
                    RETURN quicksort(left) + [pivot] + quicksort(right)
                END PROCEDURE
                RETURN quicksort(lst)
            END PROCEDURE
            RETURN sort_asc(oklhxf)
        END FUNCTION
        SET fwqkenp TO omuaqv(nums)
        PROCEDURE loop_recur(index)
            IF index >= LENGTH(fwqkenp) THEN RETURN END IF
            SET vqsipua TO fwqkenp[index]
            zixtfez(vqsipua)
            nkhzalq(vqsipua)
            SET rzpntleq TO MAX(rzpntleq, jdukxiy[vqsipua], jdukxiy[vqsipua + 1])
            loop_recur(index + 1)
        END PROCEDURE
        loop_recur(0)
        RETURN rzpntleq
    END FUNCTION
END CLASS
```