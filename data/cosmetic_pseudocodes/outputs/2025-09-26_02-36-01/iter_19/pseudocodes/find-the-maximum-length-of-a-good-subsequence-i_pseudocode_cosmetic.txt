CLASS Solution
    FUNCTION maximumLength(nums k)
        LET alpha TO LENGTH OF nums
        LET beta TO a list of lists of ones with dimensions alpha rows by (k + 1) columns
        LET omega TO 0
        LET idx_outer TO 0
        WHILE idx_outer < alpha
            LET val_outer TO nums[idx_outer]
            LET idx_mid TO 0
            WHILE idx_mid <= k
                LET idx_inner TO 0
                WHILE idx_inner < idx_outer
                    LET val_inner TO nums[idx_inner]
                    IF val_outer = val_inner THEN
                        LET delta TO beta[idx_inner][idx_mid] + 1
                        IF beta[idx_outer][idx_mid] < delta THEN beta[idx_outer][idx_mid] = delta END IF
                    ELSE
                        IF idx_mid > 0 THEN
                            LET temp_val TO beta[idx_inner][idx_mid - 1] + 1
                            IF beta[idx_outer][idx_mid] < temp_val THEN beta[idx_outer][idx_mid] = temp_val END IF
                        END IF
                    END IF
                    SET idx_inner TO idx_inner + 1
                END WHILE
                SET idx_mid TO idx_mid + 1
            END WHILE
            IF omega < beta[idx_outer][k] THEN omega = beta[idx_outer][k] END IF
            SET idx_outer TO idx_outer + 1
        END WHILE
        RETURN omega
    END FUNCTION
END CLASS