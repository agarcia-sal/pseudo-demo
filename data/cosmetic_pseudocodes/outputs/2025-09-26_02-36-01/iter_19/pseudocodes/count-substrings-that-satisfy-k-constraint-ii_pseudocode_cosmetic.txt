CLASS Solution
    FUNCTION countKConstraintSubstrings(s parameter k parameter queries parameter) RETURNS LIST OF INTEGER
      SET alpha TO LENGTH OF s
      SET delta_zeros TO LIST OF zero REPEATED alpha PLUS one TIMES
      SET epsilon_ones TO LIST OF zero REPEATED alpha PLUS one TIMES


      SET gamma TO zero
      WHILE gamma LESS THAN alpha
        SET delta_zeros AT gamma PLUS one TO delta_zeros AT gamma PLUS ( IF s AT gamma EQUALS character zero THEN 1 ELSE 0 )
        SET epsilon_ones AT gamma PLUS one TO epsilon_ones AT gamma PLUS ( IF s AT gamma EQUALS character one THEN 1 ELSE 0 )
        SET gamma TO gamma PLUS one
      END WHILE

      FUNCTION count_valid_substrings(x parameter y parameter) RETURNS INTEGER
        SET omega TO zero
        SET theta TO x
        WHILE theta LESS THAN OR EQUAL TO y
          SET mu TO theta
          SET nu TO y PLUS one
          WHILE mu LESS THAN nu
            SET pi TO ( mu PLUS nu ) DIVIDED BY 2
            SET sigma TO delta_zeros AT pi PLUS one MINUS delta_zeros AT theta
            SET tau TO epsilon_ones AT pi PLUS one MINUS epsilon_ones AT theta
            IF sigma LESS THAN OR EQUAL TO k OR tau LESS THAN OR EQUAL TO k
              SET mu TO pi PLUS one
            ELSE
              SET nu TO pi
            END IF
          END WHILE
          SET rho TO mu MINUS one
          IF rho GREATER THAN OR EQUAL TO theta
            SET omega TO omega PLUS ( rho MINUS theta PLUS one )
          END IF
          SET theta TO theta PLUS one
        END WHILE
        RETURN omega
      END FUNCTION

      SET result TO EMPTY LIST
      SET xi TO zero
      WHILE xi LESS THAN LENGTH OF queries
        SET lamda TO queries AT xi AT zero
        SET kappa TO queries AT xi AT one
        APPEND count_valid_substrings WITH PARAMETERS lamda AND kappa TO result
        SET xi TO xi PLUS one
      END WHILE

      RETURN result
    END FUNCTION
END CLASS