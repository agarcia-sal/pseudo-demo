CLASS Solution
    FUNCTION largestPalindrome(n k)
        SET resultString TO "0"
        IF n == 1 THEN
            SET candidate TO 9
            WHILE candidate >= 1 DO
                IF candidate % k == 0 THEN
                    SET resultString TO TO_STRING(candidate)
                    BREAK
                END IF
                SET candidate TO candidate - 1
            END WHILE
            RETURN resultString
        END IF

        SET halfDigitCount TO (n + 1) / 2
        SET halfStr TO ""
        FOR index FROM 1 TO halfDigitCount DO
            SET halfStr TO halfStr + "9"
        END FOR
        SET halfVal TO TO_INT(halfStr)
        
        DEFINE FUNCTION buildPalindrome(seg INT, length INT) RETURNS INT
            SET segStr TO TO_STRING(seg)
            IF length % 2 == 0 THEN
                RETURN TO_INT(segStr + REVERSE(segStr))
            ELSE
                RETURN TO_INT(segStr + REVERSE(SUBSTRING(segStr, 1, LENGTH(segStr) - 1)))
            END IF
        END FUNCTION
        
        SET currentHalf TO halfVal
        WHILE currentHalf > 0 DO
            SET candidateVal TO buildPalindrome(currentHalf, n)
            IF candidateVal % k == 0 THEN
                RETURN TO_STRING(candidateVal)
            END IF
            SET currentHalf TO currentHalf - 1
        END WHILE
        
        RETURN "0"
    END FUNCTION
END CLASS