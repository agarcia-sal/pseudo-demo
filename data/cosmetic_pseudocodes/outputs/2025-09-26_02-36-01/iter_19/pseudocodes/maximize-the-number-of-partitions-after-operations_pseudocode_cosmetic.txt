CLASS Solution  
	FUNCTION maxPartitionsAfterOperations(s parameter k parameter)  
		FUNCTION max_partitions(s parameter k parameter)  
			SET running_total variable TO 0  
			SET collected_symbols variable TO empty set  
			SET index_1 variable TO 1  
			WHILE index_1 variable LESS THAN OR EQUAL TO LENGTH OF s parameter  
				SET current_token variable TO element at position index_1 variable OF s parameter  
				IF SIZE OF collected_symbols variable IS LESS THAN k parameter  
					ADD current_token variable TO collected_symbols variable  
				ELSE  
					IF current_token variable IN collected_symbols variable  
						SET index_1 variable TO index_1 variable PLUS 1  
						CONTINUE  
					ELSE  
						SET running_total variable TO running_total variable PLUS 1  
						SET collected_symbols variable TO new set WITH current_token variable  
					END IF  
				END IF  
				SET index_1 variable TO index_1 variable PLUS 1  
			END WHILE  
			IF collected_symbols variable IS NOT empty set  
				SET running_total variable TO running_total variable PLUS (1 * 1)  
			END IF  
			RETURN running_total variable  
		END FUNCTION  

		SET max_result variable TO max_partitions(s parameter k parameter)  
		SET position variable TO 0  
		REPEAT  
			IF position variable IS GREATER THAN LENGTH OF s parameter MINUS 1  
				EXIT  
			END IF  
			SET char_code variable TO 97  
			REPEAT  
				IF char_code variable IS GREATER THAN 122  
					EXIT  
				END IF  
				SET substitution variable TO CHARACTER REPRESENTED BY char_code variable  
				IF substitution variable EQUALS element at position position variable PLUS 1 OF s parameter  
					SET char_code variable TO char_code variable PLUS 1  
					CONTINUE  
				END IF  
				SET new_string variable TO CONCATENATION OF  
					SUBSTRING OF s parameter FROM 1 TO position variable PLUS CONCATENATION OF substitution variable PLUS SUBSTRING OF s parameter FROM position variable PLUS 2 TO LENGTH OF s parameter  
				SET temp_max variable TO max_partitions(new_string variable, k parameter)  
				IF temp_max variable GREATER THAN max_result variable  
					SET max_result variable TO temp_max variable  
				END IF  
				SET char_code variable TO char_code variable PLUS 1  
			END REPEAT  
			SET position variable TO position variable PLUS 1  
		END REPEAT  
		RETURN max_result variable  
	END FUNCTION  
END CLASS