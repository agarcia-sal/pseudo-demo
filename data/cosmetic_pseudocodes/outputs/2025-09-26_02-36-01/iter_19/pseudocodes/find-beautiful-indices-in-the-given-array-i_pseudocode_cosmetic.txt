CLASS Solution  
    FUNCTION beautifulIndices(s parameter, a parameter, b parameter, k parameter)  
          SET x1 TO an empty list  
          SET m TO LENGTH OF s  
          SET n TO LENGTH OF a  
          SET u TO 0  
          WHILE u <= m - n  
              SET v TO 0  
              SET w TO true  
              REPEAT  
                  IF NOT (s[u + v] EQUALS a[v]) THEN  
                      SET w TO false  
                      BREAK  
                  END IF  
                  SET v TO v + 1  
              UNTIL v >= n  
              IF w THEN  
                  APPEND u TO x1  
              END IF  
              SET u TO u + 1  
          END WHILE  

          SET y1 TO an empty list  
          SET p TO LENGTH OF b  
          SET q TO 0  
          WHILE q <= m - p  
              SET r TO 0  
              SET t TO true  
              REPEAT  
                  IF NOT (s[q + r] EQUALS b[r]) THEN  
                      SET t TO false  
                      BREAK  
                  END IF  
                  SET r TO r + 1  
              UNTIL r >= p  
              IF t THEN  
                  APPEND q TO y1  
              END IF  
              SET q TO q + 1  
          END WHILE  

          SET z1 TO an empty list  
          SET c1 TO false  
          FOR each e1 IN x1 DO  
              SET f1 TO 0  
              WHILE f1 < LENGTH OF y1 AND NOT c1 DO  
                  IF (y1[f1] - e1) * (e1 - y1[f1]) >= -k * k THEN  
                      APPEND e1 TO z1  
                      SET c1 TO true  
                  END IF  
                  SET f1 TO f1 + 1  
              END WHILE  
              SET c1 TO false  
          END FOR  

          RETURN z1  
    END FUNCTION  
END CLASS