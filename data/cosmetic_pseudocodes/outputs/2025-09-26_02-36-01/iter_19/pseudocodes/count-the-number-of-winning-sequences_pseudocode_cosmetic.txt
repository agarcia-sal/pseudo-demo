CLASS Solution
    FUNCTION countWinningSequences(s)
        FUNCTION calc(a, b)
            IF (a LESS THAN b) IS FALSE AND (a GREATER THAN b) IS FALSE
                RETURN 0
            ELSE IF a LESS THAN b
                IF (a EQUALS 0) AND (b EQUALS 2)
                    RETURN 1
                ELSE
                    RETURN -1
                END IF
            ELSE
                IF (a EQUALS 2) AND (b EQUALS 0)
                    RETURN -1
                ELSE
                    RETURN 1
                END IF
            END IF
        END FUNCTION

        FUNCTION dfs(x, y, z)
            IF (LENGTH OF s MINUS x) LESS THAN OR EQUAL TO y
                RETURN 0
            END IF
            IF x GREATER THAN OR EQUAL TO LENGTH OF s
                IF y LESS THAN 0
                    RETURN 1
                ELSE
                    RETURN 0
                END IF
            END IF

            SET accumulator TO 0
            SET iterator TO 0
            WHILE iterator LESS THAN OR EQUAL TO 2
                IF iterator EQUALS z
                    SET iterator TO iterator PLUS 1
                    CONTINUE
                END IF
                SET temp TO dfs(x PLUS 1, y PLUS calc(d[AT s[x]], iterator), iterator)
                SET accumulator TO accumulator PLUS temp
                SET accumulator TO accumulator MINUS (mod MULTIPLIED BY (accumulator DIVIDED BY mod))
                SET iterator TO iterator PLUS 1
            END WHILE
            RETURN accumulator
        END FUNCTION

        SET mod TO (10 MULTIPLIED BY 10 MULTIPLIED BY 10 MULTIPLIED BY 10 MULTIPLIED BY 10 MULTIPLIED BY 10 MULTIPLIED BY 10 MULTIPLIED BY 10) PLUS 7
        SET d TO MAP CONTAINING KEY F WITH VALUE 0, KEY W WITH VALUE 1, AND KEY E WITH VALUE 2
        SET result TO dfs(0, 0, -1)
        CALL dfs cache CLEAR
        RETURN result
    END FUNCTION
END CLASS