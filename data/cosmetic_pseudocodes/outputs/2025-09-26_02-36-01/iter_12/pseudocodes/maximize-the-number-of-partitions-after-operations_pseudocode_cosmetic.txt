CLASS Solution   
    FUNCTION maxPartitionsAfterOperations(s parameter k parameter)  
        FUNCTION max_partitions(s parameter k parameter)  
            SET tally variable TO 0  
            SET char_pool variable TO an empty set  
            
            SET idx variable TO 0  
            WHILE idx < LENGTH(s parameter) DO  
                SET current_char variable TO s parameter[idx]  
                IF SIZE(char_pool) < k parameter THEN  
                    INSERT current_char INTO char_pool  
                ELSE  
                    IF current_char IS IN char_pool THEN  
                        SET idx TO idx + 1  
                        CONTINUE  
                    ELSE  
                        SET tally TO tally + 1  
                        SET char_pool TO A NEW SET CONTAINING current_char  
                    END IF  
                END IF  
                SET idx TO idx + 1  
            END WHILE  
            
            IF SIZE(char_pool) != 0 THEN  
                SET tally TO tally + 1  
            END IF  
            
            RETURN tally  
        END FUNCTION  
        
        SET outcome variable TO max_partitions(s parameter, k parameter)  
        
        SET pos variable TO 0  
        REPEAT  
            IF pos >= LENGTH(s parameter) THEN  
                BREAK  
            END IF  
            
            SET letter_var variable TO 'a'  
            WHILE letter_var <= 'z' DO  
                IF letter_var = s parameter[pos] THEN  
                    SET letter_var TO CHAR_CODE(letter_var) + 1  
                    CONTINUE  
                END IF  
                
                SET prefix_str variable TO ""  
                SET prefix_idx variable TO 0  
                WHILE prefix_idx < pos DO  
                    SET prefix_str TO prefix_str + s parameter[prefix_idx]  
                    SET prefix_idx TO prefix_idx + 1  
                END WHILE  
                
                SET suffix_str variable TO ""  
                SET suffix_idx variable TO pos + 1  
                WHILE suffix_idx < LENGTH(s parameter) DO  
                    SET suffix_str TO suffix_str + s parameter[suffix_idx]  
                    SET suffix_idx TO suffix_idx + 1  
                END WHILE  
                
                SET candidate string variable TO prefix_str + letter_var + suffix_str  
                
                SET trial variable TO max_partitions(candidate string variable, k parameter)  
                
                IF trial > outcome THEN  
                    SET outcome TO trial  
                END IF  
                
                SET letter_var TO CHAR_CODE(letter_var) + 1  
            END WHILE  
            
            SET pos TO pos + 1  
        UNTIL FALSE  
        
        RETURN outcome  
    END FUNCTION  
END CLASS