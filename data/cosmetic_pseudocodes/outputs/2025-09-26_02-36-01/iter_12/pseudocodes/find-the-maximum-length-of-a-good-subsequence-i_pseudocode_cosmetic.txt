CLASS Solution
    FUNCTION maximumLength(nums k)
        SET length_val TO 0
        SET total_elements TO LENGTH OF nums
        SET matrix_f TO EMPTY LIST
        SET outer_index TO 0
        WHILE outer_index < total_elements
            SET inner_list TO EMPTY LIST
            SET col_index TO 0
            WHILE col_index <= k
                APPEND 1 TO inner_list
                SET col_index TO col_index + 1
            END WHILE
            APPEND inner_list TO matrix_f
            SET outer_index TO outer_index + 1
        END WHILE

        SET max_length TO 0
        SET idx_i TO 0
        WHILE idx_i < total_elements
            SET current_element TO nums[idx_i]
            SET idx_h TO 0
            WHILE idx_h <= k
                SET idx_j TO 0
                WHILE idx_j < idx_i
                    SET compare_element TO nums[idx_j]
                    IF current_element = compare_element THEN
                        IF matrix_f[idx_i][idx_h] < (matrix_f[idx_j][idx_h] + 1) THEN
                            SET matrix_f[idx_i][idx_h] TO (matrix_f[idx_j][idx_h] + 1)
                        END IF
                    ELSE 
                        IF idx_h > 0 THEN
                            IF matrix_f[idx_i][idx_h] < (matrix_f[idx_j][idx_h - 1] + 1) THEN
                                SET matrix_f[idx_i][idx_h] TO (matrix_f[idx_j][idx_h - 1] + 1)
                            END IF
                        END IF
                    END IF
                    SET idx_j TO idx_j + 1
                END WHILE
                SET idx_h TO idx_h + 1
            END WHILE
            IF max_length < matrix_f[idx_i][k] THEN
                SET max_length TO matrix_f[idx_i][k]
            END IF
            SET idx_i TO idx_i + 1
        END WHILE

        RETURN max_length
    END FUNCTION
END CLASS