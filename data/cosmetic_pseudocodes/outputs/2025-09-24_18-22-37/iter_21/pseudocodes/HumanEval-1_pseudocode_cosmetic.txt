FUNCTION separate_paren_groups(str_paren)
    SET results_collection TO []
    SET temp_chars TO []
    SET depth_counter TO 0

    SET idx TO 0
    WHILE idx < LENGTH(str_paren)
        SET curr_char TO str_paren.at(idx)

        SWITCH curr_char
            CASE '(':
                SET depth_counter TO depth_counter + 1
                CALL temp_chars.APPEND(curr_char)
                BREAK
            CASE ')':
                SET depth_counter TO depth_counter - 1
                CALL temp_chars.APPEND(curr_char)

                IF depth_counter == 0 THEN
                    SET combined_str TO ""
                    FOR each ch IN temp_chars
                        SET combined_str TO combined_str + ch
                    END FOR
                    CALL results_collection.APPEND(combined_str)
                    CALL temp_chars.CLEAR()
                END IF
                BREAK
            DEFAULT:
                # do nothing for other characters
        END SWITCH

        SET idx TO idx + 1
    END WHILE

    RETURN results_collection
END FUNCTION