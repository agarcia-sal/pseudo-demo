FUNCTION sort_array(items)  
    DECLARE first_elem_sum, order_descending  
    IF 0 = LENGTH(items) THEN  
        RETURN []  
    END IF  

    SET first_elem_sum = items.at(0) + items.at(LENGTH(items) - 1)  

    SWITCH first_elem_sum % 2  
        CASE 0:  
            order_descending = TRUE  
        DEFAULT:  
            order_descending = FALSE  
    END SWITCH  

    RETURN SORTED(items) WITH descending order AS order_descending  
END FUNCTION