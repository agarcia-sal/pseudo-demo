FUNCTION intersperse(sequence, sep)
    SET output TO EMPTY LIST
    IF sequence IS NOT EMPTY THEN
        SET idx TO 0
        REPEAT
            SET current TO sequence.at(idx)
            APPEND current TO output
            APPEND sep TO output
            SET idx TO idx + 1
        UNTIL idx >= LENGTH(sequence) - 1
        SET final_element TO sequence.at(LENGTH(sequence) - 1)
        APPEND final_element TO output
    ELSE
        RETURN EMPTY LIST
    END IF
    RETURN output
END FUNCTION