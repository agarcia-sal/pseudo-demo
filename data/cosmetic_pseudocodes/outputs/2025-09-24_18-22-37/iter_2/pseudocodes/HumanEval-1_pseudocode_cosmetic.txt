```
FUNCTION separate_paren_groups(string_of_parentheses)
    DECLARE output_segments AS list INITIALIZED EMPTY
    DECLARE segment_buffer AS list INITIALIZED EMPTY
    DECLARE depth_counter AS integer SET TO 0

    FOR index FROM 0 TO LENGTH(string_of_parentheses) - 1
        DECLARE ch AS CHARACTER = string_of_parentheses[index]

        SWITCH ch
            CASE '(':
                depth_counter = depth_counter + 1
                APPEND ch TO segment_buffer
            CASE ')':
                APPEND ch TO segment_buffer
                depth_counter = depth_counter - 1

                IF depth_counter == 0 THEN
                    DECLARE completed_segment AS STRING = JOIN(segment_buffer)
                    APPEND completed_segment TO output_segments
                    CLEAR segment_buffer
                END IF
            DEFAULT:
                CONTINUE
        END SWITCH
    END FOR

    RETURN output_segments
END FUNCTION
```