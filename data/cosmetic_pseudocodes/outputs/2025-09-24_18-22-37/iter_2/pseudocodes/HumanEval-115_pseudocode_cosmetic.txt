```
FUNCTION max_fill(grid, capacity)
    IMPORT math
    total = 0
    FOR EACH row_element IN grid DO
        row_sum = 0
        FOR EACH item IN row_element DO
            row_sum = row_sum + item
        END FOR
        increments = row_sum / capacity
        rounded = math.ceil(increments)
        total = total + rounded
    END FOR
    RETURN total
END FUNCTION
```