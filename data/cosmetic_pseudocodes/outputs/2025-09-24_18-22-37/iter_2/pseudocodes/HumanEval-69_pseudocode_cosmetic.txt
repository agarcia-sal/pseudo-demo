```
FUNCTION search(arr)
    LET freqArray BE ARRAY OF ZEROS WITH SIZE (MAX(arr) + 1)
    FOR val IN arr DO
        freqArray[val] <- freqArray[val] + 1
    END FOR
    LET result BE -1
    FOR idx FROM 1 TO LENGTH(freqArray) - 1 DO
        IF freqArray[idx] >= idx THEN
            result <- idx
        END IF
    END FOR
    RETURN result
END FUNCTION
```