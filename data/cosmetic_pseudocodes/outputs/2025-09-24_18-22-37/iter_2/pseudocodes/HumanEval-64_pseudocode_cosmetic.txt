```
FUNCTION vowels_count(str_val)
    DECLARE vowels_list AS "aeiouAEIOU"
    DECLARE count_vowels AS 0
    FOR EACH char IN str_val DO
        IF vowels_list CONTAINS char THEN
            count_vowels = count_vowels + 1
        END IF
    END FOR
    DECLARE end_char AS str_val AT POSITION (LENGTH OF str_val)
    IF end_char EQUALS 'y' OR end_char EQUALS 'Y' THEN
        count_vowels = count_vowels + 1
    END IF
    RETURN count_vowels
END FUNCTION
```