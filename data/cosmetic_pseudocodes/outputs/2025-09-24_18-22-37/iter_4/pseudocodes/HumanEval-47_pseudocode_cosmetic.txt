FUNCTION median(input_array)
    SET sorted_array TO COPY OF input_array
    CALL SORT(sorted_array)
    SET n TO LENGTH OF sorted_array
    IF (n MOD 2) != 0 THEN
        SET middle_index TO (n - 1) / 2
        RETURN sorted_array[middle_index]
    ELSE
        SET first_middle TO (n / 2) - 1
        SET second_middle TO n / 2
        SET median_value TO (sorted_array[first_middle] + sorted_array[second_middle]) / 2.0
        RETURN median_value
    END IF
END FUNCTION