FUNCTION is_nested(str)
    DEFINE open_indices AS empty list
    DEFINE close_indices AS empty list
    SET i TO 0
    WHILE i < LENGTH OF str DO
        IF str[i] = '[' THEN
            ADD i TO open_indices
        ELSE
            ADD i TO close_indices
        ENDIF
        INCREMENT i BY 1
    ENDWHILE
    REVERSE close_indices
    SET nested_count TO 0
    SET close_pos TO 0
    SET closes_len TO LENGTH OF close_indices
    SET idx TO 0
    WHILE idx < LENGTH OF open_indices DO
        IF close_pos < closes_len THEN
            IF open_indices[idx] < close_indices[close_pos] THEN
                nested_count = nested_count + 1
                close_pos = close_pos + 1
            ENDIF
        ENDIF
        idx = idx + 1
    ENDWHILE
    IF nested_count >= 2 THEN
        RETURN TRUE
    ELSE
        RETURN FALSE
    ENDIF
END FUNCTION