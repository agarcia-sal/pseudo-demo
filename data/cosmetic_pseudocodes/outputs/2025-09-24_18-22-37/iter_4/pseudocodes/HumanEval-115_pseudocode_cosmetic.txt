FUNCTION max_fill(matrix, limit)
    IMPORT math
    total = 0
    index = 0
    WHILE index < LENGTH(matrix)
        row_sum = 0
        elements = matrix[index]
        j = 0
        WHILE j < LENGTH(elements)
            row_sum = row_sum + elements[j]
            j = j + 1
        END WHILE
        parts = row_sum / limit
        parts_ceil = math ceiling(parts)
        total = total + parts_ceil
        index = index + 1
    END WHILE
    RETURN total
END FUNCTION