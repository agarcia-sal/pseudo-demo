FUNCTION sort_array(input_list)
    SET intermediate_sorted_list TO input_list.sortedAscending()
    SET result_list TO intermediate_sorted_list.sortedWithComparator( function(curr_item)
        SET binary_representation TO toBinaryString(curr_item)
        SET binary_without_prefix TO substring(binary_representation, 2, length(binary_representation))
        SET count_ones TO 0
        SET char_index TO 0
        WHILE char_index < length(binary_without_prefix)
            IF characterAt(binary_without_prefix, char_index) EQUALS '1'
                SET count_ones TO count_ones + 1
            END IF
            SET char_index TO char_index + 1
        END WHILE
        RETURN count_ones
    END function )
    RETURN result_list
END FUNCTION