FUNCTION median(collection_of_values)
  LET sorted_values BE COPY OF collection_of_values
  sorted_values := SORTED(sorted_values)
  
  LET size_of_values BE LENGTH OF sorted_values
  LET is_odd_length BE (size_of_values MOD 2) EQUALS 1
  
  IF NOT is_odd_length THEN
      LET midpoint BE size_of_values DIV 2
      LET first_middle_element BE sorted_values.at(midpoint MINUS 1)
      LET second_middle_element BE sorted_values.at(midpoint)
      
      LET sum_middle_elements BE first_middle_element PLUS second_middle_element
      LET median_value BE sum_middle_elements DIV 2.0
      RETURN median_value
  ELSE
      LET middle_index BE size_of_values DIV 2
      LET median_value BE sorted_values.at(middle_index)
      RETURN median_value
  ENDIF
END FUNCTION