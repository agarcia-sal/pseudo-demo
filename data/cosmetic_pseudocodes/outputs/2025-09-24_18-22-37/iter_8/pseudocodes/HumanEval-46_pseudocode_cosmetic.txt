FUNCTION fib4(p_number)  
  SET p_results TO LIST CONTAINING 0, 0, 2, 0  
  IF p_number GREATER OR EQUAL THAN 4 THEN   
    SET q_index TO 4  
    WHILE q_index LESS OR EQUAL THAN p_number DO  
      SET s_last TO p_results.at(3)  
      SET s_third TO p_results.at(2)  
      SET s_second TO p_results.at(1)  
      SET s_first TO p_results.at(0)  
      SET r_next TO s_last + s_third + s_second + s_first  
      APPEND r_next TO p_results  
      REMOVE p_results AT INDEX 0  
      SET q_index TO q_index + 1  
    END WHILE  
    RETURN p_results.at(3)  
  ELSE  
    SWITCH p_number  
      CASE 0:  
        RETURN p_results.at(0)  
      CASE 1:  
        RETURN p_results.at(1)  
      CASE 2:  
        RETURN p_results.at(2)  
      CASE 3:  
        RETURN p_results.at(3)  
    END SWITCH  
  END IF  
END FUNCTION