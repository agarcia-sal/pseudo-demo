FUNCTION prime_fib(n_val)
    IMPORT mathematical_functions_module

    FUNCTION is_prime(p_val)
        IF p_val < 2 THEN
            RETURN False
        END IF

        SET idx_counter TO 2
        SET limit_bound TO MIN( FLOOR( mathematical_functions_module.sqrt(p_val) ) + 1, p_val - 1 )
        WHILE idx_counter <= limit_bound DO
            SET remainder_check TO p_val % idx_counter
            IF remainder_check = 0 THEN
                RETURN False
            END IF
            SET idx_counter TO idx_counter + 1
        END WHILE
        RETURN True
    END FUNCTION

    SET fib_sequence TO [0, 1]

    LOOP_FOREVER:
        SET last_idx TO LENGTH(fib_sequence) - 1
        SET penultimate_idx TO last_idx - 1

        SET next_fib TO fib_sequence.at(penultimate_idx) + fib_sequence.at(last_idx)
        CALL fib_sequence.append(next_fib)

        IF is_prime(next_fib) THEN
            SET n_val TO n_val - 1
        END IF

        IF n_val = 0 THEN
            RETURN next_fib
        END IF

        GOTO LOOP_FOREVER
END FUNCTION