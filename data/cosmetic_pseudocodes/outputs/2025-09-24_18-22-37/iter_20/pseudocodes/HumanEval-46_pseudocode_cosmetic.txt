FUNCTION fib4(delta)  
    INITIALIZE cache AS LIST CONTAINING [0, 0, 2, 0]  
    DECLARE counter  
      
    IF NOT (delta >= 4) THEN  
        DECLARE immediate_result  
        SET immediate_result TO cache.at(delta)  
        RETURN immediate_result  
    END IF  
      
    SET counter TO 4  
    WHILE counter <= delta DO  
        DECLARE partial_sum_first  
        DECLARE partial_sum_second  
        DECLARE next_candidate  
          
        SET partial_sum_first TO cache.at(0) + cache.at(1)  
        SET partial_sum_second TO cache.at(2) + cache.at(3)  
        SET next_candidate TO partial_sum_first + partial_sum_second  
          
        CALL cache.APPEND(next_candidate)  
          
        CALL cache.REMOVE_AT(0)  
          
        SET counter TO counter + 1  
    END WHILE  
      
    DECLARE final_output  
    SET final_output TO cache.at(3)  
      
    RETURN final_output  
END FUNCTION