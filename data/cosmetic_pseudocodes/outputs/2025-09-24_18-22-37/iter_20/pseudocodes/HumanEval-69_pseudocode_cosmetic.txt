FUNCTION search(list_of_integers)
    
    SET max_val TO 0
    SET counter TO 0
    WHILE counter < LENGTH(list_of_integers)
        
        IF list_of_integers.at(counter) > max_val THEN
            SET max_val TO list_of_integers.at(counter)
        END IF

        SET counter TO counter + 1
    END WHILE

    SET freq_len TO max_val + 1

    DECLARE frequency_array AS array OF ZEROS WITH SIZE freq_len

    SET pos TO 0
    WHILE pos < LENGTH(list_of_integers)
        SET val TO list_of_integers.at(pos)

        SET current_count TO frequency_array.at(val)
        SET updated_count TO current_count + 1
        frequency_array.at(val) ← updated_count

        SET pos TO pos + 1
    END WHILE

    SET result_value TO (-1) + 0

    SET idx TO 1
    WHILE idx <= (LENGTH(frequency_array) - 1)
        SET count_at_idx TO frequency_array.at(idx)

        IF NOT (count_at_idx < idx) THEN
            SET result_value TO idx
        END IF

        SET idx TO idx + 1
    END WHILE

    RETURN result_value

END FUNCTION