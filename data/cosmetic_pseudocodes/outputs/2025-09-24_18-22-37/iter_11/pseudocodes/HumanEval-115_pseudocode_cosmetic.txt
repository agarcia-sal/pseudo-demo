FUNCTION max_fill(grid, capacity)
    IMPORT math

    SET total_fill = 0
    SET row_index = 0
    WHILE row_index < LENGTH(grid)
        SET current_row = grid.at(row_index)
        SET sum_cells = 0
        SET cell_iterator = 0
        WHILE cell_iterator < LENGTH(current_row)
            SET cell_value = current_row.at(cell_iterator)
            SET sum_cells = sum_cells + cell_value
            SET cell_iterator = cell_iterator + 1
        END WHILE

        SET division_result = sum_cells / capacity
        SET ceil_value = math.ceil(division_result)
        SET total_fill = total_fill + ceil_value

        SET row_index = row_index + 1
    END WHILE

    RETURN total_fill
END FUNCTION