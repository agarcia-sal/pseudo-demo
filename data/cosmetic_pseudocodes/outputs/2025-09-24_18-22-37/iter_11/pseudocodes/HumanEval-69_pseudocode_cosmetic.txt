FUNCTION search(list_of_integers)  
    SET max_val TO 0  
    SET idx TO 0  
    WHILE idx < LENGTH OF list_of_integers  
        SET current_element TO list_of_integers.at(idx)  
        IF current_element > max_val THEN  
            SET max_val TO current_element  
        END IF  
        SET idx TO idx + 1  
    END WHILE  

    SET freq_arr TO array_of_zeros WITH LENGTH (max_val + 1)  

    SET pos TO 0  
    WHILE pos < LENGTH OF list_of_integers  
        SET elem TO list_of_integers.at(pos)  
        SET prev_count TO freq_arr.at(elem)  
        SET freq_arr AT elem TO prev_count + 1  
        SET pos TO pos + 1  
    END WHILE  

    SET result TO -1  
    SET counter TO 1  
    WHILE counter <= LENGTH OF freq_arr - 1  
        SET count_value TO freq_arr.at(counter)  
        IF count_value >= counter THEN  
            SET result TO counter  
        END IF  
        SET counter TO counter + 1  
    END WHILE  

    RETURN result  
END FUNCTION