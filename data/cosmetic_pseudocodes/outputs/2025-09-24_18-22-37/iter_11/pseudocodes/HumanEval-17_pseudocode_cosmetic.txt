FUNCTION parse_music(music_string)  
    SET duration_lookup TO DICTIONARY  
    INSERT INTO duration_lookup KEY 'o' VALUE 4  
    INSERT INTO duration_lookup KEY 'o|' VALUE 2  
    INSERT INTO duration_lookup KEY '.|' VALUE 1  
  
    SET result_list TO EMPTY LIST  
    SET tokens TO SPLIT music_string BY ' '  
  
    SET idx_counter TO 0  
    WHILE idx_counter < LENGTH(tokens)  
        SET current_token TO tokens AT idx_counter  
        IF current_token IS NOT EQUAL TO '' THEN  
            SET mapped_value TO duration_lookup AT current_token  
            APPEND mapped_value TO result_list  
        END IF  
        SET idx_counter TO idx_counter PLUS 1  
    END WHILE  
  
    RETURN result_list  
END FUNCTION