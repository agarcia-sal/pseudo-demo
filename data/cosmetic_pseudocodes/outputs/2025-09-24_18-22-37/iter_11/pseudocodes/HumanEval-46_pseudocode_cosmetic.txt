FUNCTION fib4(integer_p)
  SET result_sequence TO LIST [0, 0, 2, 0]
  IF NOT (integer_p >= 4)
    SET output_val TO result_sequence[integer_p]
    RETURN output_val
  END IF

  SET idx_counter TO 4
  WHILE idx_counter <= integer_p
    SET val_a TO result_sequence.at(3)
    SET val_b TO result_sequence.at(2)
    SET val_c TO result_sequence.at(1)
    SET val_d TO result_sequence.at(0)
    SET partial_sum TO val_a + val_b
    SET temp_sum TO partial_sum + val_c
    SET next_val TO temp_sum + val_d

    APPEND next_val TO result_sequence
    REMOVE ELEMENT AT INDEX 0 FROM result_sequence

    SET idx_counter TO idx_counter + 1
  END WHILE

  SET final_output TO result_sequence.at(3)
  RETURN final_output
END FUNCTION