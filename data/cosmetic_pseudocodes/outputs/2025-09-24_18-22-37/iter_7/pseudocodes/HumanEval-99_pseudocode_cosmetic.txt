FUNCTION closest_integer(param)
    IMPORT floor, ceil FROM math
    
    SET dot_count TO 0
    FOR idx FROM 0 TO LENGTH(param) - 1
        IF param[idx] EQUALS '.'
            SET dot_count TO dot_count + 1
        END IF
    END FOR
    
    SWITCH dot_count
        CASE 1:
            WHILE TRUE
                SET last_char TO param[LENGTH(param) - 1]
                IF last_char NOT EQUAL TO '0'
                    BREAK
                END IF
                SET param TO SUBSTRING(param, 0, LENGTH(param) - 1)
            END WHILE
        DEFAULT:
            /* no action */
    END SWITCH
    
    SET float_value TO FLOAT(param)
    
    SET len_param TO LENGTH(param)
    IF len_param >= 2
        SET last_two_chars TO SUBSTRING(param, len_param - 2, 2)
    ELSE
        SET last_two_chars TO ""
    END IF
    
    SWITCH last_two_chars
        CASE '.5':
            IF float_value > 0 THEN
                SET result TO ceil(float_value)
            ELSE
                SET result TO floor(float_value)
            END IF
        DEFAULT:
            IF len_param > 0 THEN
                SET result TO ROUND(float_value)
            ELSE
                SET result TO 0
            END IF
    END SWITCH
    
    RETURN result
END FUNCTION