FUNCTION search(input_array)
    SET max_element TO 0
    SET current_position TO 0
    WHILE current_position LESS THAN length of input_array
        IF input_array[current_position] GREATER THAN max_element THEN
            SET max_element TO input_array[current_position]
        ENDIF
        SET current_position TO current_position PLUS 1
    ENDWHILE

    SET counts TO array of zeros with size max_element PLUS 1
    SET iterator TO 0
    WHILE iterator LESS THAN length of input_array
        SET temp_value TO input_array[iterator]
        SET old_count TO counts[temp_value]
        SET counts[temp_value] TO old_count PLUS 1
        SET iterator TO iterator PLUS 1
    ENDWHILE

    SET result TO -1
    SET position TO 1
    WHILE position LESS THAN length of counts
        SWITCH (TRUE)
            CASE counts[position] GREATER THAN OR EQUAL TO position
                SET result TO position
            DEFAULT
                NOOP
        ENDSWITCH
        SET position TO position PLUS 1
    ENDWHILE

    RETURN result
END FUNCTION