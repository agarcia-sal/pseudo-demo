FUNCTION median(list_of_elements)
    DECLARE sorted_elements
    SET sorted_elements := COPY OF list_of_elements
    CALL sorted_elements.SORT()
    
    DECLARE size
    SET size := LENGTH OF sorted_elements
    
    DECLARE middle_index
    SET middle_index := size DIVIDED BY 2
    
    DECLARE remainder
    SET remainder := size MODULO 2
    
    SWITCH remainder
        CASE 1:
            RETURN sorted_elements[middle_index]
        CASE 0:
            DECLARE first_value
            SET first_value := sorted_elements[middle_index MINUS 1]
            
            DECLARE second_value
            SET second_value := sorted_elements[middle_index]
            
            DECLARE average_value
            SET average_value := first_value PLUS second_value
            SET average_value := average_value DIVIDED BY 2.0
            
            RETURN average_value
    END SWITCH
END FUNCTION