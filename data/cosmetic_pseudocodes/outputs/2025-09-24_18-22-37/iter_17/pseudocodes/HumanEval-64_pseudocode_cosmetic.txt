```
FUNCTION vowels_count(input_data)
  DECLARE count_accumulator = 0
  DECLARE vowel_set = "aeiouAEIOU"
  DECLARE character_ref, total_length, last_char

  total_length = LENGTH(input_data)
  DECLARE position = 0

  WHILE position < total_length DO
    character_ref = input_data.at(position)
    IF vowel_set.CONTAINS(character_ref) THEN
      count_accumulator = count_accumulator + 1
    END IF
    position = position + 1
  END WHILE

  last_char = input_data.at(total_length - 1)
  IF NOT (last_char != 'y' AND last_char != 'Y') THEN
    count_accumulator = count_accumulator + 1
  END IF

  RETURN count_accumulator
END FUNCTION
```