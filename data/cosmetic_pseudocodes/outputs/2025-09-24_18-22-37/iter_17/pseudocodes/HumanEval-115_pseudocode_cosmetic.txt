```
FUNCTION max_fill(grid, capacity)
   IMPORT math
   DECLARE container_total = 0
   DECLARE row_index = 0
   WHILE row_index < grid.length DO
      DECLARE row = grid.at(row_index)
      DECLARE row_sum = 0
      DECLARE i = 0
      WHILE i < row.length DO
         row_sum = row_sum + row.at(i)
         i = i + 1
      END WHILE
      DECLARE divided = row_sum / capacity
      DECLARE ceiling_val = math.ceiling(divided)
      container_total = container_total + ceiling_val
      row_index = row_index + 1
   END WHILE
   RETURN container_total
END FUNCTION
```