```
FUNCTION how_many_times(a_string, needle)
 var ptr := 0
 var tally := 0
 var limit := (LEN(a_string) - LEN(needle))
 WHILE ptr <= limit DO
  var segment := a_string.SUBSTR(ptr, LEN(needle))
  IF NOT (segment != needle) THEN
   tally := tally + 1
  ptr := ptr + 1
 RETURN tally
END FUNCTION
```