```
FUNCTION search(array_of_numbers)
    INITIALIZE count_array AS new list filled with 0s, size = (maximum element in array_of_numbers) + (1 * 1)

    SET iterator_value TO 0
    WHILE iterator_value < LENGTH(array_of_numbers)
        LET current_element = array_of_numbers.at(iterator_value)
        LET old_count = count_array.at(current_element)
        LET updated_count = old_count + 1
        ASSIGN count_array[current_element] = updated_count
        INCREMENT iterator_value BY 1
    END WHILE

    LET result = -1
    LET position = 1
    WHILE position <= (LENGTH(count_array) - 1)
        IF count_array.at(position) >= position THEN
            ASSIGN result = position
        END IF
        INCREMENT position BY 1
    END WHILE

    RETURN result
END FUNCTION
```