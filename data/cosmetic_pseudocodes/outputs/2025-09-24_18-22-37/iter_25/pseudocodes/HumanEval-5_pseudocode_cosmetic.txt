FUNCTION intersperse(input_sequence, separator)
    DECLARE output_sequence AS EMPTY LIST

    IF (input_sequence AT 0) IS UNDEFINED THEN
        RETURN output_sequence
    END IF

    DECLARE cursor_index AS 0
    DECLARE end_limit AS (LENGTH OF input_sequence) - (1)
    
    WHILE cursor_index < end_limit DO
        DECLARE current_element AS input_sequence AT cursor_index
        APPEND current_element TO output_sequence
        APPEND separator TO output_sequence
        SET cursor_index TO cursor_index + 1
    END WHILE
    
    DECLARE final_element AS input_sequence AT ((LENGTH OF input_sequence) - 1)
    APPEND final_element TO output_sequence

    RETURN output_sequence
END FUNCTION