FUNCTION max_fill(matrix, limit)
    DEFINE total_result AS 0
    FOR each_row IN matrix
        DEFINE intermediate_sum AS 0
        SET idx TO 0
        WHILE idx < LENGTH(each_row)
            SET intermediate_sum TO intermediate_sum + each_row.at(idx)
            INCREMENT idx BY 1
        END WHILE
        DEFINE division_value AS intermediate_sum / limit
        DEFINE ceil_value AS 0
        IF division_value == (division_value // 1)
            SET ceil_value TO division_value
        ELSE
            SET ceil_value TO (division_value // 1) + 1
        END IF
        SET total_result TO total_result + ceil_value
    END FOR
    RETURN total_result
END FUNCTION