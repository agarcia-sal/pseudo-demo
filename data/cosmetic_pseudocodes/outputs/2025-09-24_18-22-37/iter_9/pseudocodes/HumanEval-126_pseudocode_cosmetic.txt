```
FUNCTION is_sorted(sequence)
    SET mapping_counter AS dict FROM keys sequence WITH INITIAL 0
    FOR element IN sequence DO
        LET tmp_idx = element
        LET tmp_val = mapping_counter.at(tmp_idx)
        SET mapping_counter.at(tmp_idx) = tmp_val plus 1
    END FOR

    FOR key IN sequence DO
        LET cnt = mapping_counter[key]
        IF cnt greater than 2 THEN
            RETURN False
        END IF
    END FOR

    LET length_seq = length(sequence)
    LET position = 1
    LET is_ordered = True
    WHILE position less than length_seq AND is_ordered DO
        LET earlier = sequence.at(position minus 1)
        LET current = sequence.at(position)
        IF NOT (earlier less or equal current) THEN
            SET is_ordered = False
        END IF
        SET position = position plus 1
    END WHILE

    RETURN is_ordered
END FUNCTION
```