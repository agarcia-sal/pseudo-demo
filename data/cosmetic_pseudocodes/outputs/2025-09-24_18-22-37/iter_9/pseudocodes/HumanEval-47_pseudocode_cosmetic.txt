FUNCTION median(data_sequence)
    SET sorted_sequence TO COPY OF data_sequence
    SET sorted_sequence TO SORTED VERSION OF sorted_sequence

    SET seq_length TO LENGTH OF sorted_sequence
    SET mid_index TO seq_length DIVIDED BY 2

    IF (seq_length MODULO 2) NOT EQUAL TO 0 THEN
        RETURN sorted_sequence.at(mid_index)
    ELSE
        SET left_value TO sorted_sequence.at(mid_index MINUS 1)
        SET right_value TO sorted_sequence.at(mid_index)
        SET sum_values TO left_value PLUS right_value
        SET average_value TO sum_values DIVIDED BY 2.0
        RETURN average_value
    END IF
END FUNCTION