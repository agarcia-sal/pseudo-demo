FUNCTION closest_integer(input_value)
    IMPORT floor, ceil FROM math

    DECLARE dot_count AS INTEGER
    dot_count = 0
    FOR EACH char IN input_value
        IF char = '.'
            dot_count = dot_count + 1
        END IF
    END FOR

    IF dot_count = 1
        LOOP
            DECLARE last_char AS STRING
            last_char = input_value.at(input_value.LENGTH - 1)
            IF last_char != '0'
                BREAK
            END IF
            input_value = input_value.substring(0, input_value.LENGTH - 1)
        END LOOP
    END IF

    DECLARE numeric_value AS FLOAT
    numeric_value = FLOAT(input_value)

    DECLARE output_integer AS INTEGER
    DECLARE last_two_chars AS STRING
    IF input_value.LENGTH >= 2
        last_two_chars = input_value.substring(input_value.LENGTH - 2, input_value.LENGTH)
    ELSE
        last_two_chars = ""
    END IF

    IF last_two_chars = '.5'
        IF numeric_value > 0
            output_integer = ceil(numeric_value)
        ELSE
            output_integer = floor(numeric_value)
        END IF
    ELSE
        IF input_value.LENGTH > 0
            DECLARE rounded_integer AS INTEGER
            rounded_integer = ROUND(numeric_value)
            output_integer = rounded_integer
        ELSE
            output_integer = 0
        END IF
    END IF

    RETURN output_integer
END FUNCTION