FUNCTION minSubArraySum(array_of_numbers)
   SET accumulator TO 0
   SET peak TO 0

   FOR element IN array_of_numbers DO
      SET negated TO 0 - element
      SET accumulator TO accumulator + negated

      IF NOT (accumulator >= 0) THEN
         SET accumulator TO 0
      END IF

      IF accumulator > peak THEN
         SET peak TO accumulator
      END IF
   END FOR

   IF peak == 0 THEN
      SET candidates TO []
      FOR item IN array_of_numbers DO
         SET inverted TO 0 - item
         APPEND inverted TO candidates
      END FOR
      SET peak TO candidates[0]
      FOR index FROM 1 TO LENGTH OF candidates - 1 DO
         IF candidates[index] > peak THEN
            SET peak TO candidates[index]
         END IF
      END FOR
   END IF

   SET result TO 0 - peak
   RETURN result
END FUNCTION