FUNCTION max_fill(grid, capacity)
    IMPORT math
    DECLARE total_fill AS INTEGER = 0
    FOR EACH row IN grid DO
        DECLARE sum_elements AS INTEGER = 0
        FOR EACH element IN row DO
            sum_elements = sum_elements + element
        END FOR
        DECLARE ratio AS FLOAT = sum_elements / capacity
        DECLARE ceil_ratio AS INTEGER = math.ceil(ratio)
        total_fill = total_fill + ceil_ratio
    END FOR
    RETURN total_fill
END FUNCTION