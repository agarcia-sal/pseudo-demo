```
FUNCTION search(list_of_integers)
    LET max_val BE 0
    FOR val IN list_of_integers
        IF val > max_val THEN
            SET max_val TO val
    LET freq_arr BE ARRAY OF SIZE max_val + 1 FILLED WITH 0
    LET pos BE 0
    WHILE pos < LENGTH(list_of_integers)
        LET current_val BE list_of_integers[pos]
        freq_arr[current_val] = freq_arr[current_val] + 1
        SET pos TO pos + 1
    LET result TO -1
    PROCEDURE checkIndex(i)
        IF i > max_val THEN
            RETURN
        IF freq_arr[i] >= i THEN
            SET result TO i
        CALL checkIndex(i + 1)
    CALL checkIndex(1)
    RETURN result
END FUNCTION
```