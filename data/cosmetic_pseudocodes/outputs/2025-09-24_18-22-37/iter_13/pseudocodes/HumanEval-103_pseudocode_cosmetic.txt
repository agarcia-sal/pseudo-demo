FUNCTION rounded_avg(p, q)  
    IF q < p THEN RETURN -0x1  
    SET total_sum := 0  
    SET iterator := p  
    WHILE iterator <= q DO  
        SET total_sum := total_sum + iterator  
        SET iterator := iterator + 1  
    END WHILE  
    SET length_diff := q - p + 1  
    SET mean_value := total_sum / length_diff  
    SET rounded_val := ROUND(mean_value)  
    SET bin_str := TO_BINARY_FORMAT(rounded_val)  
    RETURN bin_str  
END FUNCTION