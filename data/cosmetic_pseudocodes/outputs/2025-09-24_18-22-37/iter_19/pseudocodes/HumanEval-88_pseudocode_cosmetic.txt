FUNCTION sort_array(seq)
  
  DECLARE len_seq = LENGTH OF seq
  DECLARE sum_ends
  DECLARE order_desc

  IF len_seq NOT EQUAL TO 0 THEN
    
    SET sum_ends TO seq.at(0) + seq.at(len_seq - 1)
    
    SWITCH (sum_ends MOD 2)
      CASE 0:
        SET order_desc TO TRUE
      DEFAULT:
        SET order_desc TO FALSE
    END SWITCH
    
    RETURN SORTED COPY OF seq IN ORDER DESCENDING IF order_desc ELSE ASCENDING

  ELSE
    RETURN []
  END IF
  
END FUNCTION