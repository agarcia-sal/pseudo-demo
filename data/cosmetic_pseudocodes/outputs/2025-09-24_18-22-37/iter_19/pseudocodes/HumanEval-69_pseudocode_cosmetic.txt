FUNCTION search(array_of_numbers)  
    SET count_list TO AN EMPTY LIST  
    SET max_val TO 0  
    REPEAT  
        FOR element IN array_of_numbers  
            IF element > max_val THEN  
                SET max_val TO element  
            END IF  
        END FOR  
        EXIT WHEN TRUE  
    END REPEAT  
    SET size_limit TO max_val + 1  
    FOR i FROM 0 TO size_limit - 1  
        APPEND 0 TO count_list  
    END FOR  
    FOR position FROM 0 TO LENGTH(array_of_numbers) - 1  
        SET number TO array_of_numbers.at(position)  
        SET current_count TO count_list.at(number)  
        SET updated_count TO current_count + 1  
        SET count_list[number] TO updated_count  
    END FOR  
    SET result_value TO -1  
    SET idx TO 1  
    WHILE idx <= (LENGTH(count_list) - 1)  
        SET freq_at_idx TO count_list.at(idx)  
        IF freq_at_idx >= idx THEN  
            SET result_value TO idx  
        END IF  
        SET idx TO idx + 1  
    END WHILE  
    RETURN result_value  
END FUNCTION