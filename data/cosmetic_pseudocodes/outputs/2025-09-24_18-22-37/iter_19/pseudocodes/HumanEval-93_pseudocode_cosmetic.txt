```
FUNCTION encode(input)
    SET shiftMap TO EMPTY DICTIONARY
    SET alphabetGroup TO "AEIOUaeiou"
    
    FOR idx FROM 1 TO LENGTH(alphabetGroup) DO
        SET currentLetter TO alphabetGroup.at(idx)
        SET shiftedAscii TO ASCII(currentLetter) + 2
        SET shiftedLetter TO CHAR(shiftedAscii)
        SET shiftMap[currentLetter] = shiftedLetter
    END FOR

    SET swappedText TO EMPTY STRING
    FOR i FROM 1 TO LENGTH(input) DO
        SET ch TO input.at(i)
        IF ch >= 'a' AND ch <= 'z' THEN
            SET swappedText = CONCAT(swappedText, TO_UPPER(ch))
        ELSE IF ch >= 'A' AND ch <= 'Z' THEN
            SET swappedText = CONCAT(swappedText, TO_LOWER(ch))
        ELSE
            SET swappedText = CONCAT(swappedText, ch)
        END IF
    END FOR

    SET resultBuffer TO EMPTY STRING
    REPEAT idx FROM 1 TO LENGTH(swappedText) DO
        SET element TO swappedText.at(idx)
        SWITCH element
            CASE shiftMap.CONTAINS_KEY(element) IS TRUE
                SET resultBuffer = CONCAT(resultBuffer, shiftMap[element])
            DEFAULT
                SET resultBuffer = CONCAT(resultBuffer, element)
        END SWITCH
    END REPEAT
    
    RETURN resultBuffer
END FUNCTION
```