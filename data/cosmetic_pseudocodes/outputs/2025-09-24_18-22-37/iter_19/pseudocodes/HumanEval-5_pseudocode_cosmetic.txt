FUNCTION intersperse(lst, sep)
    SWITCH (lst IS NOT EMPTY)
        CASE TRUE:
            SET output := []
            SET i := 0
            REPEAT
                IF i < (lst.LENGTH - 1) THEN
                    output.APPEND(lst.at(i))
                    output.APPEND(sep)
                ELSE
                    BREAK
                END IF
                i := i + 1
            UNTIL FALSE

            output.APPEND(lst.at(lst.LENGTH + (-1)))

            RETURN output
        CASE FALSE:
            RETURN []
    END SWITCH
END FUNCTION