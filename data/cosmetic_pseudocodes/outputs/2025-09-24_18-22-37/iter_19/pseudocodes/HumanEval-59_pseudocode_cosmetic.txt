```
FUNCTION largest_prime_factor(x)
    FUNCTION is_prime(m)
        DECLARE flag BOOLEAN
        SET flag = TRUE
        IF m < 2 THEN 
            SET flag = FALSE
        ELSE
            SET p = 2
            REPEAT
                IF m MOD p = 0 THEN
                    SET flag = FALSE
                    EXIT REPEAT
                ENDIF
                SET p = p + 1
            UNTIL p >= m
        ENDIF
        RETURN flag
    END FUNCTION

    SET result TO 1
    SET candidate TO 2
    WHILE candidate <= x
        DECLARE divisible BOOLEAN
        SET divisible = (x MOD candidate = 0)
        DECLARE prime_check BOOLEAN
        SET prime_check = is_prime(candidate)
        SWITCH
            CASE divisible âˆ§ prime_check:
                SET result = IF result > candidate THEN result ELSE candidate
            DEFAULT:
                NOOP
        END SWITCH
        SET candidate = candidate + 1
    END WHILE
    RETURN result
END FUNCTION
```