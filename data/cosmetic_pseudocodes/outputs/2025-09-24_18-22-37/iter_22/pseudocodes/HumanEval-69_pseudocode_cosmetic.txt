```
FUNCTION search(collection)
    SET count_array TO array_of_zeros WITH SIZE (max_value_in collection) PLUS (1) 
    SET iterator TO 0
    WHILE iterator LESS THAN length_of collection
        SET current_element TO collection AT POSITION iterator
        SET temp_count TO count_array AT POSITION current_element
        SET incremented_count TO temp_count PLUS 1
        SET count_array AT POSITION current_element TO incremented_count
        SET iterator TO iterator PLUS 1
    END WHILE
    SET result TO -1
    SET position TO 1
    REPEAT
        IF NOT (count_array AT POSITION position LESS THAN position) THEN
            SET result TO position
        END IF
        SET position TO position PLUS 1
    UNTIL position GREATER THAN (length_of count_array MINUS 1)
    RETURN result
END FUNCTION
```