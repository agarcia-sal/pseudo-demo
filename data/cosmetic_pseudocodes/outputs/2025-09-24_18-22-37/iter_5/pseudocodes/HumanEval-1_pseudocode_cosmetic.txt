FUNCTION separate_paren_groups(string_of_parentheses)
    SET result_collection TO []
    SET current_segment TO []
    SET nesting_level TO 0

    SET index TO 0
    WHILE index < LENGTH(string_of_parentheses)
        SET symbol TO string_of_parentheses[index]

        SWITCH symbol
            CASE '(':
                nesting_level = nesting_level + 1
                APPEND symbol TO current_segment
                BREAK
            CASE ')':
                nesting_level = nesting_level - 1
                APPEND symbol TO current_segment

                IF nesting_level == 0 THEN
                    SET combined_segment TO ""
                    FOR char IN current_segment DO
                        combined_segment = combined_segment + char
                    END FOR
                    APPEND combined_segment TO result_collection
                    CLEAR current_segment
                END IF
                BREAK
            DEFAULT:
                BREAK
        END SWITCH

        INCREMENT index BY 1
    END WHILE

    RETURN result_collection
END FUNCTION