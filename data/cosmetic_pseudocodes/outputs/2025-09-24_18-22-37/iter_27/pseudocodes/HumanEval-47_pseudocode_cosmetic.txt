FUNCTION median(w)
    SET t TO LENGTH OF w
    SET v TO NEW LIST WITH ELEMENTS OF w
    SET q TO SORTED v
    SET r TO t / 2
    SET s TO t % 2
    SWITCH s
        CASE 1
            RETURN q.at(r)
        CASE 0
            SET x TO q.at(r - 1)
            SET y TO q.at(r)
            SET z TO x + y
            SET u TO z / (1 + 1.0)
            RETURN u
    END SWITCH
END FUNCTION