FUNCTION parse_music(ambiance)
    SET sound_periods TO CREATE_DICTIONARY()
    sound_periods['o']  = 0x4
    sound_periods['o|'] = 1 + 1
    sound_periods['.|'] = 1
    SET rhythm_components TO SPLIT(ambiance, ' ')
    SET melodic_units TO CREATE_LIST()
    SET idx TO 0
    WHILE idx < LENGTH(rhythm_components) DO
        SET chord TO rhythm_components.at(idx)
        IF chord != '' THEN
            SET temp_val TO sound_periods.at(chord)
            melodic_units.ADD(temp_val)
        END IF
        idx = idx + 1
    END WHILE
    RETURN melodic_units
END FUNCTION