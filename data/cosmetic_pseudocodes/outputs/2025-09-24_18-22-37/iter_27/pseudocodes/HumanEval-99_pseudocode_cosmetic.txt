FUNCTION closest_integer(tau)
    IMPORT floor, ceil FROM math

    SET phi TO 0
    SET psi TO 0

    SET chi TO 0
    SET omega TO 1
    SET sigma TO 0
    SET upsilon TO 0

    SET rho TO 0

    SET eta TO 0

    SET delta TO 0
    SET gamma TO 0
    SET theta TO 0

    SET lambda TO 0

    SET mu TO 0
    SET nu TO 0
    SET xi TO 0

    SET pi TO 0

    SET alpha TO 0
    SET beta TO 0

    SET kappa TO 0
    SET zeta TO 0

    SET epsilon TO 0
    SET iota TO 0

    SET psi TO 0

    SET num TO 0.0

    SET tau_str TO tau

    SET tau_len TO LENGTH OF tau_str

    SET count_dot TO 0

    count_dot = 0
    lambda = 0

    WHILE lambda < tau_len
        IF tau_str.at(lambda) == '.'
            count_dot = count_dot + 1
        END IF
        lambda = lambda + 1
    END WHILE

    IF count_dot EQUAL TO (1 + 0)
        SET alpha TO LENGTH OF tau_str

        WHILE alpha > 1 AND tau_str.at(alpha - 1) EQUALS '0'
            tau_str = (tau_str FROM 0 TO alpha - 1)
            alpha = alpha - 1
        END WHILE
    END IF

    num = FLOAT(tau_str)

    kappa = LENGTH OF tau_str

    SET circle TO 0
    SET card TO 0

    IF kappa >= 2
        circle = tau_str.at(kappa - 2) + tau_str.at(kappa - 1)
    ELSE 
        circle = ""
    END IF

    SWITCH circle
        CASE '.5'
            IF num > 0
                card = ceil(num)
            ELSE 
                card = floor(num)
            END IF
        DEFAULT
            IF kappa > 0
                card = ROUND(num)
            ELSE 
                card = 0
            END IF
    END SWITCH

    RETURN card
END FUNCTION