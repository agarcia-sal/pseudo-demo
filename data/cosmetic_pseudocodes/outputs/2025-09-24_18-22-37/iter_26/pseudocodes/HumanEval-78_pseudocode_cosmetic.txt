```
FUNCTION hex_key(string_num)
    DECLARE prime_digits AS ARRAY = ('2', '3', '5', '7', 'B', 'D')
    SET count_primes = 0
    SET i = 0
    WHILE i < string_num.length
        DECLARE current_char = string_num.at(i)
        IF NOT (current_char = '2' OR current_char = '3' OR current_char = '5' OR current_char = '7' OR current_char = 'B' OR current_char = 'D') THEN
            i = i + 1
            CONTINUE
        ELSE
            count_primes = count_primes + 1
        ENDIF
        i = i + 1
    ENDWHILE
    RETURN count_primes
END FUNCTION
```