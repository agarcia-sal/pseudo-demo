```
FUNCTION parse_music(music_string)
    INITIALIZE duration_lookup AS DICTIONARY WITH KEYS 'o' → 4, 'o|' → 2, '.|' → 1
    DECLARE result_list AS EMPTY LIST
    DECLARE pieces AS LIST = SPLIT music_string BY ' '
    DECLARE idx AS INTEGER = 0
    WHILE idx < LENGTH(pieces) DO
        DECLARE current_piece AS STRING = pieces.at(idx)
        IF current_piece EQUALS '' THEN
            SET idx = idx + 1
            CONTINUE
        END IF
        DECLARE tmp_val AS INTEGER = duration_lookup.at(current_piece)
        APPEND tmp_val TO result_list
        SET idx = idx + 1
    END WHILE
    RETURN result_list
END FUNCTION
```