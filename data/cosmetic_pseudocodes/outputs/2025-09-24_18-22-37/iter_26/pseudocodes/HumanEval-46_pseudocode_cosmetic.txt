FUNCTION fib4(param_x)
  VAR buffer ← [0, 0, 2, 0]
  IF NOT (param_x ≥ 4)
    RETURN buffer.at(param_x)
  END IF

  VAR cursor ← 4
  WHILE cursor ≤ param_x
    VAR a ← buffer.at(buffer.length − 1)
    VAR b ← buffer.at(buffer.length − 2)
    VAR c ← buffer.at(buffer.length − 3)
    VAR d ← buffer.at(buffer.length − 4)
    VAR sum ← a + b + c + d

    buffer.append(sum)
    buffer.pop_front()

    cursor ← cursor + 1
  END WHILE

  RETURN buffer.at(buffer.length − 1)
END FUNCTION