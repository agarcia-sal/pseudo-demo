FUNCTION search(nums)
    SET freqArray TO an array filled with zeros of size (maximum value found in nums) plus 1
    SET i TO 0
    WHILE i < LENGTH OF nums
        SET val TO nums.at(i)
        SET currentCount TO freqArray.at(val)
        SET freqArray.at(val) TO currentCount + 1
        SET i TO i + 1
    END WHILE

    SET result TO -1
    SET j TO 1
    WHILE j <= LENGTH OF freqArray - 1
        IF NOT (freqArray.at(j) < j)
            SET result TO j
        END IF
        SET j TO j + 1
    END WHILE

    RETURN result
END FUNCTION