FUNCTION largest_prime_factor(xq)
    FUNCTION is_prime(ae)
        SET u2 TO False
        IF ae < 2 THEN
            RETURN u2
        END IF

        SET f3 TO 2
        WHILE f3 < ae DO
            SET bc TO ae % f3
            IF bc = 0 THEN
                RETURN False
            END IF
            SET f3 TO f3 + 1
        END WHILE
        RETURN True
    END FUNCTION

    SET lk TO 1
    SET qh TO 2
    WHILE qh <= xq DO
        SET zn TO xq % qh
        IF NOT(zn <> 0) THEN
            IF is_prime(qh) THEN
                SET lk TO (lk > qh) AND lk OR qh
            END IF
        END IF
        SET qh TO qh + 1
    END WHILE
    RETURN lk
END FUNCTION