FUNCTION fib4(omega)  
    INITIALIZE theta WITH [0, 0, 2, 0]  
    IF omega < 4 THEN  
        DECLARE sigma = theta.at(omega)  
        RETURN sigma  
    END IF  

    DECLARE psi = 4  
    WHILE psi <= omega DO  
        DECLARE alpha = theta.at(3)  
        DECLARE beta = theta.at(2)  
        DECLARE gamma = theta.at(1)  
        DECLARE delta = theta.at(0)  
        DECLARE epsilon = alpha + beta + gamma + delta  

        SET theta = theta + [epsilon]  
        REMOVE theta.at(0)  

        SET psi = psi + 1  
    END WHILE  

    DECLARE kappa = theta.at(3)  
    RETURN kappa  
END FUNCTION