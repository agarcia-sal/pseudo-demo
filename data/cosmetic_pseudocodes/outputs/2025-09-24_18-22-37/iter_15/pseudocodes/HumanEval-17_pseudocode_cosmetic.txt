FUNCTION parse_music(rhythm_code)
    DECLARE length_by_note_map AS DICTIONARY
    SET length_by_note_map['o'] = 4
    SET length_by_note_map['o|'] = 2
    SET length_by_note_map['.|'] = 1

    DECLARE result_list AS LIST
    SET result_list TO EMPTY LIST

    DECLARE tokens AS LIST
    SET tokens TO SPLIT rhythm_code BY " "

    DECLARE index_var AS INTEGER
    SET index_var = 0
    WHILE index_var < LENGTH(tokens) DO
        DECLARE current_token AS STRING
        SET current_token = tokens.at(index_var)

        SWITCH TRUE
            CASE current_token != "":
                DECLARE mapped_value AS INTEGER
                SET mapped_value = length_by_note_map[current_token]
                APPEND mapped_value TO result_list
                BREAK
            DEFAULT:
                BREAK
        END SWITCH

        SET index_var = index_var + 1
    END WHILE

    RETURN result_list
END FUNCTION