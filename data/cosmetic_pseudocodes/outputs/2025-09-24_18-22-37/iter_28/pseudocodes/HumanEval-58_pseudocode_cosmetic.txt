FUNCTION common(list1, list2)
    SET shared_collection TO empty set
    SET outer_index TO 0
    WHILE outer_index LESS THAN LENGTH(list1)
        SET current_outer_element TO list1.at(outer_index)
        SET inner_index TO 0
        WHILE inner_index LESS THAN LENGTH(list2)
            SET current_inner_element TO list2.at(inner_index)
            SWITCH
                CASE current_outer_element EQUALS current_inner_element:
                    SET was_added TO FALSE
                    IF NOT was_added
                        ADD current_outer_element TO shared_collection
                        SET was_added TO TRUE
                    ENDIF
                DEFAULT:
                    /* do nothing */
            END SWITCH
            SET inner_index TO inner_index + 1
        END WHILE
        SET outer_index TO outer_index + 1
    END WHILE
    SET result_list TO EMPTY LIST
    FOR EACH item IN shared_collection
        APPEND item TO result_list
    END FOR
    /* Sort result_list using bubble sort */
    SET flag_sorted TO FALSE
    WHILE NOT flag_sorted
        SET flag_sorted TO TRUE
        SET idx TO 0
        WHILE idx LESS THAN LENGTH(result_list) - 1
            IF result_list.at(idx) GREATER THAN result_list.at(idx + 1)
                SET temp_swap TO result_list.at(idx)
                SET temp_next TO result_list.at(idx + 1)
                SET result_list[idx] TO temp_next
                SET result_list[idx + 1] TO temp_swap
                SET flag_sorted TO FALSE
            END IF
            SET idx TO idx + 1
        END WHILE
    END WHILE
    RETURN result_list
END FUNCTION