FUNCTION sort_array(array_of_integers)
    SET temp1 TO array_of_integers
    SET temp2 TO EMPTY LIST
    SET idx1 TO 0
    WHILE idx1 < LENGTH(temp1) DO
        SET idx2 TO idx1 + 1
        WHILE idx2 < LENGTH(temp1) DO
            IF temp1.at(idx1) > temp1.at(idx2) THEN
                SET aux TO temp1.at(idx1)
                SET temp1.at(idx1) TO temp1.at(idx2)
                SET temp1.at(idx2) TO aux
            END IF
            INCREMENT idx2
        END WHILE
        INCREMENT idx1
    END WHILE

    SET idx3 TO 0
    WHILE idx3 < LENGTH(temp1) DO
        SET element TO temp1.at(idx3)
        SET binary_str TO CONVERT_TO_BINARY(element)
        SET ones_count TO 0
        SET pos TO 2
        WHILE pos < LENGTH(binary_str) DO
            IF binary_str.at(pos) = '1' THEN
                SET ones_count TO ones_count + 1
            END IF
            INCREMENT pos
        END WHILE
        APPEND (element, ones_count) TO temp2
        INCREMENT idx3
    END WHILE

    SET idx4 TO 0
    SET flag_sorted TO FALSE
    WHILE flag_sorted = FALSE DO
        SET flag_sorted TO TRUE
        SET idx4 TO 0
        WHILE idx4 < LENGTH(temp2) - 1 DO
            IF temp2.at(idx4).second > temp2.at(idx4 + 1).second THEN
                SET temp_aux TO temp2.at(idx4)
                SET temp2.at(idx4) TO temp2.at(idx4 + 1)
                SET temp2.at(idx4 + 1) TO temp_aux
                SET flag_sorted TO FALSE
            END IF
            INCREMENT idx4
        END WHILE
    END WHILE

    SET sorted_final TO EMPTY LIST
    SET idx5 TO 0
    WHILE idx5 < LENGTH(temp2) DO
        APPEND temp2.at(idx5).first TO sorted_final
        INCREMENT idx5
    END WHILE
    RETURN sorted_final
END FUNCTION