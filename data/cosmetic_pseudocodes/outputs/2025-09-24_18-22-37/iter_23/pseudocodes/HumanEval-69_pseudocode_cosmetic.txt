```
FUNCTION search(array_of_numbers)
    LET size_of_frequencies BE (MAXIMUM value IN array_of_numbers) + (1+0)
    DECLARE count_array AS AN ARRAY OF size_of_frequencies ELEMENTS, ALL SET TO 0
    LET cursor BE 0
    WHILE cursor < LENGTH OF array_of_numbers
        LET current_val BE array_of_numbers.at(cursor)
        LET old_count BE count_array.at(current_val)
        LET new_count BE old_count + (1)
        count_array.at(current_val) <- new_count
        cursor <- cursor + (1)
    END WHILE

    LET result_flag BE -1
    LET pos BE 1
    WHILE pos < LENGTH OF count_array
        LET threshold BE count_array.at(pos)
        IF threshold >= pos THEN
            result_flag <- pos
        END IF
        pos <- pos + (1)
    END WHILE

    RETURN result_flag
END FUNCTION
```