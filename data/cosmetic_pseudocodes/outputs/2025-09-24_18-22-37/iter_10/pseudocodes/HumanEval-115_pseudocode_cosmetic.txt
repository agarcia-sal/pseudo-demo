FUNCTION max_fill(matrix, threshold)
    IMPORT math
    SET total_cells TO 0
    SET accumulated_sum TO 0
    FOR EACH line IN matrix DO
        SET partial_sum TO 0
        FOR element IN line DO
            partial_sum ← partial_sum plus element
        END FOR
        SET divider TO threshold
        SET division_result TO partial_sum divided by divider
        SET adjusted_value TO math ceiling of division_result
        accumulated_sum ← accumulated_sum plus adjusted_value
    END FOR
    RETURN accumulated_sum
END FUNCTION