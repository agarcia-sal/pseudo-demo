FUNCTION prime_fib(input_val)
    IMPORT mathematical_functions_module

    FUNCTION is_prime(check_num)
        IF check_num LESS THAN 2 THEN
            RETURN False
        ENDIF
        
        SET limit_val TO MIN((INTEGER PART OF mathematical_functions_module.sqrt(check_num) PLUS 1), (check_num MINUS 1))
        SET divisor TO 2
        
        WHILE divisor LESS THAN OR EQUAL limit_val
            IF (check_num MODULO divisor) EQUALS 0 THEN
                RETURN False
            ENDIF
            SET divisor TO divisor PLUS 1
        ENDWHILE
        
        RETURN True
    END FUNCTION

    SET fib_sequence TO LIST WITH ELEMENTS 0, 1
    
    FOR ;; ; TRUE 
        SET last_idx TO (LENGTH OF fib_sequence) MINUS 1
        SET new_val TO fib_sequence.at(last_idx) PLUS fib_sequence.at(last_idx MINUS 1)
        APPEND new_val TO fib_sequence
        
        IF is_prime(fib_sequence.at(last_idx PLUS 1)) THEN
            SET input_val TO input_val MINUS 1
        ENDIF
        
        IF input_val EQUALS 0 THEN
            RETURN fib_sequence.at(last_idx PLUS 1)
        ENDIF
    ENDFOR
END FUNCTION