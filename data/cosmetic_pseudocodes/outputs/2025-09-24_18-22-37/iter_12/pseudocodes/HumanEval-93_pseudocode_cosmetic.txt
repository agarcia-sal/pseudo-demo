FUNCTION encode(p1)
  SET p2 TO "aeiouAEIOU"
  SET p3 TO EMPTY_DICTIONARY
  SET p4 TO 0
  WHILE p4 < LENGTH(p2)
    SET p5 TO p2.at(p4)
    SET p6 TO CHAR_FROM_ASCII(ASCII_VALUE(p5) + 2)
    SET p3[p5] TO p6
    SET p4 TO p4 + 1
  END WHILE
  SET p7 TO EMPTY_STRING
  SET p8 TO 0
  FOR p8 < LENGTH(p1)
    SET p9 TO p1.at(p8)
    IF p9 IN p2
      SET p10 TO p3[p9]
      SET p7 TO p7 + p10
    ELSE
      SET p7 TO p7 + p9
    END IF
    SET p8 TO p8 + 1
  END FOR
  SET p11 TO EMPTY_STRING
  FOR p12 IN p7
    IF p12 == LOWERCASE(p12)
      SET p11 TO p11 + UPPERCASE(p12)
    ELSE
      SET p11 TO p11 + LOWERCASE(p12)
    END IF
  END FOR
  RETURN p11
END FUNCTION