FUNCTION search(numbers)
    SET temp_max TO 0
    SET idx TO 0
    WHILE idx LESS THAN LENGTH OF numbers
        IF numbers.at(idx) GREATER THAN temp_max
            SET temp_max TO numbers.at(idx)
        SET idx TO idx PLUS 1
    END WHILE
    SET freq_arr TO array_of_zeros WITH LENGTH temp_max PLUS 1
    SET pos TO 0
    WHILE pos LESS THAN LENGTH OF numbers
        SET val TO numbers.at(pos)
        SET old_count TO freq_arr.at(val)
        SET freq_arr[val] TO old_count PLUS 1
        SET pos TO pos PLUS 1
    END WHILE
    SET result TO NEGATIVE 1
    FOR counter FROM LENGTH OF freq_arr MINUS 1 DOWNTO 1 STEP -1
        IF freq_arr.at(counter) GREATER THAN OR EQUAL TO counter
            SET result TO counter
            BREAK
    RETURN result
END FUNCTION