FUNCTION mean_absolute_deviation(array_input)  
    DECLARE count_elements AS INTEGER  
    SET count_elements = LENGTH(array_input)  
    DECLARE sum_values AS NUMBER  
    SET sum_values = 0  
    DECLARE idx AS INTEGER  
    SET idx = 0  
    WHILE idx < count_elements DO  
        SET sum_values = sum_values PLUS array_input.at(idx)  
        SET idx = idx PLUS 1  
    END WHILE  
    DECLARE average_value AS NUMBER  
    SET average_value = sum_values DIVIDED BY count_elements  
    DECLARE total_deviation AS NUMBER  
    SET total_deviation = 0  
    FOR idx FROM 0 TO count_elements MINUS 1 DO  
        DECLARE current_diff AS NUMBER  
        SET current_diff = array_input.at(idx) MINUS average_value  
        DECLARE abs_diff AS NUMBER  
        IF current_diff GREATER OR EQUAL TO 0 THEN  
            SET abs_diff = current_diff  
        ELSE  
            SET abs_diff = 0 MINUS current_diff  
        END IF  
        SET total_deviation = total_deviation PLUS abs_diff  
    END FOR  
    DECLARE mad_result AS NUMBER  
    SET mad_result = total_deviation DIVIDED BY count_elements  
    RETURN mad_result  
END FUNCTION