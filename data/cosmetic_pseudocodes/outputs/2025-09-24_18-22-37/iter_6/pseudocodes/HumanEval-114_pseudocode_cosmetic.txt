FUNCTION minSubArraySum(array_of_numbers)
  SET idx TO 0
  SET acc_value TO 0
  SET peak_value TO 0
  WHILE idx < LENGTH(array_of_numbers)
    SET current_val TO -(array_of_numbers[idx])
    SET acc_value TO acc_value + current_val
    IF acc_value >= 0 THEN
      /* no change */
    ELSE
      SET acc_value TO 0
    END IF
    IF acc_value > peak_value THEN
      SET peak_value TO acc_value
    END IF
    SET idx TO idx + 1
  END WHILE

  IF peak_value <> 0 THEN
    /* no change */
  ELSE
    SET neg_list TO EMPTY LIST
    SET pos_idx TO 0
    WHILE pos_idx < LENGTH(array_of_numbers)
      APPEND -(array_of_numbers[pos_idx]) TO neg_list
      SET pos_idx TO pos_idx + 1
    END WHILE

    SET peak_val_candidate TO neg_list[0]
    SET candidate_idx TO 1
    WHILE candidate_idx < LENGTH(neg_list)
      IF neg_list[candidate_idx] > peak_val_candidate THEN
        SET peak_val_candidate TO neg_list[candidate_idx]
      END IF
      SET candidate_idx TO candidate_idx + 1
    END WHILE
    SET peak_value TO peak_val_candidate
  END IF

  SET result_min_sum TO -(peak_value)
  RETURN result_min_sum
END FUNCTION