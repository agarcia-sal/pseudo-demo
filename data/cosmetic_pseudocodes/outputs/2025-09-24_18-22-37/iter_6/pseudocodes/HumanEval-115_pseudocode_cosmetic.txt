FUNCTION max_fill(grid, capacity)
    IMPORT math
    SET xA1 TO 0
    SET idxR TO 0
    WHILE idxR LESS THAN LENGTH(grid)
        SET tmpRow TO grid[idxR]
        SET sumRow TO 0
        SET idxC TO 0
        WHILE idxC LESS THAN LENGTH(tmpRow)
            SET sumRow TO sumRow PLUS tmpRow[idxC]
            SET idxC TO idxC PLUS 1
        END WHILE
        SET divVal TO sumRow DIVIDED BY capacity
        SET ceilVal TO math ceiling of divVal
        SET xA1 TO xA1 PLUS ceilVal
        SET idxR TO idxR PLUS 1
    END WHILE
    RETURN xA1
END FUNCTION