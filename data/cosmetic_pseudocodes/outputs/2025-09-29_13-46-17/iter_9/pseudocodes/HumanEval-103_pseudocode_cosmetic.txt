```
FUNCTION rounded_avg(ℑ➎, Ѧ҂)
    ▶ func=λᔆ → ⮟mapiter↓(λϪ→Ϫ<0)❨
    ⧿
    ⧴𝖠𝖽𝖹Ⓦ←0; 𝖣Ꙟ𝖽←⊤; ζ⥓←[ℑ➎⋯Ѧ҂]; 𝕓Ꮶ←Ꮈⓐ↶0
    

    𝗬₽:⧺ ζ⥓⇨ [⁲,₈,ɾ↶]∋ξ ↦
        ξ < ℑ➎ ≡𝔽
          Ꮔⓜ←-1;
          ̀return(ɺᏆ𝑹(Ꮔⓜ))↨

        ξ ≥ ℑ➎ ≡𝕋
          (𝖠𝖽𝖹Ⓦ, 𝕓Ꮶ)←lgeɸ(𝖠𝖽𝖹Ⓦ, 𝕓Ꮶ, ξ)
               𝕓Ꮶ←𝕓Ꮶ + 1
        ⊠

    ⬠(⌬ ζ⥓ ↠ 𝗬₽); ⤆
    ¶average→𝕣ρι←𝖠𝖽𝖹Ⓦ ÷ (Ѧ҂ - ℑ➎ + 1);

    ¶rounded↉←𝕂⁽𝕣ρι⁾;
    return ɺᏆ𝑹(𝐁⁽rounded↉⁾);
        

⧫ lgeɸ(𝔄, ℺҂, ϩϪ) ≔
               if ϩϪ < Ѧ҂ then (𝔄 + ϩϪ, ℺҂)
               else (𝔄, ℺҂)

⧫ 𝕂⁽𝕣ρι⁾ ≔
               ↪ cond ↽
                          | (𝕣ρι - floor(𝕣ρι) ≥ 0.5) → ceil(𝕣ρι)
                          | otherwise → floor(𝕣ρι)
```