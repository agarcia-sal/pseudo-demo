```
FUNCTION tri(integer_n)
  FUNCTION wibly(z1, z2, z3, acc)
    MATCH (z1 MOD 2 EQUALS 0)
      CASE true:
        LET newVal = (z1 DIVIDED BY 2) PLUS 1
        RETURN wibly(z1 PLUS 1, z2, acc PUSH newVal)
      CASE false:
        LET newVal = acc[z1 MINUS 1] PLUS acc[z1 MINUS 2] PLUS ((z1 PLUS 3) DIVIDED BY 2)
        RETURN wibly(z1 PLUS 1, z2, acc PUSH newVal)
  IF integer_n EQUALS 0 THEN RETURN [1]
  RETURN wibly(2, integer_n, [1, 3])
END FUNCTION
```