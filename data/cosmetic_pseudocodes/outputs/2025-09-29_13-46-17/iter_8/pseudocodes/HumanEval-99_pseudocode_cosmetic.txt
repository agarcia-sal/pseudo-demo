```
FUNCTION closest_integer(value)
  IMPORT floor, ceil FROM math

  FUNCTION owoahlak(hmxzq, biqv)
    IF biqv == 0
      RETURN hmxzq
    ELSE
      RETURN owoahlak(LEFT(hmxzq, LENGTH(hmxzq) - 1), biqv - 1)
    END IF
  END FUNCTION

  FUNCTION ____iyaoe(valuez)
    IF SUM([1 | c IN valuez WHERE c == '.']) != 1
      RETURN valuez
    ELSE
      FUNCTION vkekyz(fff, uuoz)
        IF uuoz >= LENGTH(fff)
          RETURN fff
        ELSE IF RIGHT(fff, 1) == '0'
          RETURN vkekyz(LEFT(fff, LENGTH(fff) - 1), uuoz + 1)
        ELSE
          RETURN fff
        END IF
      END FUNCTION
      RETURN vkekyz(valuez, 0)
    END IF
  END FUNCTION

  LET trimmed = ____iyaoe(value)
  LET num = FLOAT(trimmed)

  FUNCTION ___dllg(rsq, kqq)
    IF kqq >= LENGTH(rsq) - 1
      RETURN FALSE
    ELSE IF SUBSTRING(rsq, kqq, kqq + 2) == '.5'
      RETURN TRUE
    ELSE
      RETURN ___dllg(rsq, kqq + 1)
    END IF
  END FUNCTION

  FUNCTION _auymq(vzrx, nmtqb)
    LET cond = vzrx
    LET err = nmtqb
    IF cond == TRUE
      IF nmtqb > 0
        RETURN ceil(vzrx)
      ELSE
        RETURN floor(vzrx)
      END IF
    ELSE
      RETURN NULL
    END IF
  END FUNCTION

  LET has_half = (LENGTH(trimmed) >= 2 AND RIGHT(trimmed, 2) == '.5')

  IF has_half
    IF num > 0
      LET _result = ceil(num)
    ELSE
      LET _result = floor(num)
    END IF
  ELSE IF LENGTH(trimmed) > 0
    LET _result = ROUND(num)
  ELSE
    LET _result = 0
  END IF

  RETURN _result
END FUNCTION
```