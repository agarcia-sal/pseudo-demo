```
FUNCTION parse_music(music_string)
  DEFINE nd_map AS DICTIONARY: 'o' = 4, 'o|' = 2, '.|' = 1
  FUNCTION helper(tokens, idx, result)
    IF idx >= LENGTH(tokens) THEN
      RETURN result
    ELSE
      SET current_token TO tokens[idx]
      IF current_token != "" THEN
        APPEND nd_map[current_token] TO result
      END IF
      RETURN helper(tokens, idx + 1, result)
    END IF
  END FUNCTION
  SET tokens_list TO SPLIT music_string BY " "
  RETURN helper(tokens_list, 0, EMPTY LIST)
END FUNCTION
```