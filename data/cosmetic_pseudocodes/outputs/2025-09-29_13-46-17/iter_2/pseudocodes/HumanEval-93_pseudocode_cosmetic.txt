```
FUNCTION encode(message)
  vowels = "AEIOUaeiou"
  vowels_replace = {}
  
  FUNCTION add_mappings(i)
    IF i == LENGTH(vowels) THEN RETURN END IF
    c = vowels[i]
    vowels_replace[c] = CHAR(ASCII(c) + 2)
    add_mappings(i + 1)
  END FUNCTION
  
  add_mappings(0)
  
  swapped_message = ""
  INDEX = 0
  WHILE INDEX < LENGTH(message)
    c = message[INDEX]
    IF c IS LOWERCASE THEN
      swapped_message = swapped_message + TO_UPPERCASE(c)
    ELSE
      swapped_message = swapped_message + TO_LOWERCASE(c)
    END IF
    INDEX = INDEX + 1
  END WHILE

  FUNCTION map_chars(idx)
    IF idx == LENGTH(swapped_message) THEN RETURN "" END IF
    current_char = swapped_message[idx]
    IF vowels_replace CONTAINS current_char THEN
      RETURN vowels_replace[current_char] + map_chars(idx + 1)
    ELSE
      RETURN current_char + map_chars(idx + 1)
    END IF
  END FUNCTION

  RETURN map_chars(0)
END FUNCTION
```