```
FUNCTION search(list_of_integers)
  LET max_val = 0
  FOR val IN list_of_integers DO
    IF val > max_val THEN max_val = val
  END FOR

  LET freq_list = []
  FOR i FROM 0 TO max_val DO
    APPEND 0 TO freq_list
  END FOR

  PROCEDURE count_elements(idx)
    IF idx = LENGTH(list_of_integers) THEN RETURN
    LET current = list_of_integers[idx]
    freq_list[current] = freq_list[current] + 1
    count_elements(idx + 1)
  END PROCEDURE

  count_elements(0)

  LET answer = -1

  PROCEDURE find_answer(i)
    IF i > max_val THEN RETURN
    IF freq_list[i] >= i THEN answer = i
    find_answer(i + 1)
  END PROCEDURE

  find_answer(1)

  RETURN answer
END FUNCTION
```