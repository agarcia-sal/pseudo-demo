```
FUNCTION sort_array(array_of_integers)
sorted_by_decimal <- SORT array_of_integers ASCENDING
DEFINE count_ones(n)
    binary_form <- CONVERT n TO BINARY STRING
    count <- 0
    INDEX <- 1
    RECURSIVE FUNCTION count_ones_helper(i)
        IF i >= LENGTH(binary_form) THEN
            RETURN 0
        ELSE
            current_bit <- binary_form[i]
            add_val <- IF current_bit == '1' THEN 1 ELSE 0
            RETURN add_val + count_ones_helper(i + 1)
        ENDIF
    END FUNCTION
    RETURN count_ones_helper(INDEX)
END DEFINE

final_sorted_array <- SORT sorted_by_decimal BY KEY count_ones(element)
RETURN final_sorted_array
END FUNCTION
```