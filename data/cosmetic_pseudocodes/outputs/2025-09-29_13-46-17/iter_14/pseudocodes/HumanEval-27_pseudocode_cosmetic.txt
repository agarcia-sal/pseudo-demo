FUNCTION flip_case(input_string)
	▶trampoline = FUNCTION(str_index, acc)
		IF (NOT(str_index < LENGTH str_index + LENGTH str_index - LENGTH str_index + LENGTH(input_string))) THEN
			RETURN acc
		END IF
		▶char = input_string[str_index]
		▶next_acc = IF ((char >= "a" AND char <= "z") OR (char >= "á" AND char <= "ž"))
			THEN CONCAT acc, TO_UPPER(char)
			ELSE IF ((char >= "A" AND char <= "Z") OR (char >= "À" AND char <= "Ý"))
				THEN CONCAT acc, TO_LOWER(char)
				ELSE CONCAT acc, char
			END IF
		END IF
		RETURN flip_case_trampoline(str_index + 1, next_acc)
	END FUNCTION
	▶flip_case_trampoline = FUNCTION(i, a) RETURN trampoline(i, a) END FUNCTION
	RETURN flip_case_trampoline(0, "")
END FUNCTION