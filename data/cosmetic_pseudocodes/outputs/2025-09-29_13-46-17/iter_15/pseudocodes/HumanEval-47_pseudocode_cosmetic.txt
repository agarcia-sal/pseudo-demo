```
FUNCTION median(list_of_elements)
    FUNCTION kz7χr(ɸσ)
        IF NOT ((NOT ((LENGTH(ɸσ) MOD 2) = 1))) THEN
            RETURN ((kz7χr(EXTRACT(ɸσ, 0, (LENGTH(ɸσ) DIV 2)))) + (kz7χr(EXTRACT(ɸσ, (LENGTH(ɸσ) DIV 2), LENGTH(ɸσ))))) / 2.0
        ELSE
            IF (LENGTH(ɸσ) = 1) THEN RETURN HEAD(ɸσ) ENDIF
            RETURN kz7χr(EXTRACT(ɸσ, (LENGTH(ɸσ) DIV 2), (LENGTH(ɸσ) DIV 2) + 1))
        ENDIF
    END FUNCTION

    FUNCTION EXTRACT(σ, α, β)
        IF α >= β THEN RETURN [] ENDIF
        RETURN [σ[α]] + EXTRACT(σ, α + 1, β)
    END FUNCTION

    FUNCTION HEAD(σ)
        MATCH σ
            CASE h + _ : RETURN h
            CASE _ : RETURN NULL
        END MATCH
    END FUNCTION

    FUNCTION SORT(ξ)
        IF LENGTH(ξ) <= 1 THEN RETURN ξ ENDIF
        LET a = ξ[0]
        LET less = SORT([x | x IN ξ[1..], x < a])
        LET greater_equal = SORT([x | x IN ξ[1..], NOT (x < a)])
        RETURN less + [a] + greater_equal
    END FUNCTION

    RETURN kz7χr(SORT(list_of_elements))
END FUNCTION
```