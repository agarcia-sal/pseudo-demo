```
FUNCTION largest_prime_factor(n)
    FUNCTION is_prime(k)
        SWITCH TRUE {
            CASE k < 2:
                RETURN FALSE;
            CASE ELSE:
                FUNCTION check_divisor(x, y)
                    IF y >= x THEN
                        RETURN TRUE;
                    IF x MOD y = 0 THEN
                        RETURN FALSE;
                    RETURN check_divisor(x, y + 1)
                END FUNCTION;
                RETURN check_divisor(k, 2);
        }
    END FUNCTION;

    FUNCTION search_prime(curr, max_factor)
        IF curr > n THEN
            RETURN max_factor;
        ELSEIF (n MOD curr = 0) AND is_prime(curr) THEN
            RETURN search_prime(curr + 1, IF max_factor < curr THEN curr ELSE max_factor);
        ELSE
            RETURN search_prime(curr + 1, max_factor);
    END FUNCTION;

    RETURN search_prime(2, 1);
END FUNCTION
```