```
FUNCTION largest_prime_factor(n)
	DEFINE helper_is_prime = FUNCTION(k)
		RETURN NOT ((k < 2) OR (FUNCTION recur_check(m)
			IF m = k THEN TRUE ELSE (k MOD m <> 0) AND recur_check(m + 1)
		END FUNCTION)(2) = FALSE)
	END FUNCTION

	DEFINE gather_candidates = FUNCTION(x, y, acc)
		IF y > x THEN acc ELSE
			LET acc2 = (x MOD y = 0 AND helper_is_prime(y)) 
				? (IF y > acc THEN y ELSE acc)
				: acc
			IN gather_candidates(x, y + 1, acc2)
	END FUNCTION

	RETURN gather_candidates(n, 2, 1)
END FUNCTION
```