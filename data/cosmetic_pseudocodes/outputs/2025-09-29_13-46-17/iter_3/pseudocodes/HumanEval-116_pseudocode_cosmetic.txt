```
FUNCTION sort_array(arrayOfIntegers)
    FUNCTION countOnesInBinary(num)
        SET countOnes TO 0
        SET binaryString TO BINARY_REPRESENTATION_OF(num)
        SET index TO 2
        REPEAT WHILE index < LENGTH_OF(binaryString)
            IF binaryString[index] = '1' THEN
                SET countOnes TO countOnes + 1
            END IF
            SET index TO index + 1
        END REPEAT
        RETURN countOnes
    END FUNCTION

    SET tempSortedArray TO arrayOfIntegers
    SET tempSortedArray TO SORTED tempSortedArray IN ASCENDING ORDER

    FUNCTION sortByCountKey(unsortedList, currentIndex, acc)
        IF currentIndex >= LENGTH_OF(unsortedList) THEN
            RETURN acc
        END IF
        SET element TO unsortedList[currentIndex]
        SET key TO countOnesInBinary(element)
        SET position TO currentIndex
        WHILE position > 0 AND countOnesInBinary(acc[position - 1]) > key
            SET acc[position] TO acc[position - 1]
            SET position TO position - 1
        END WHILE
        SET acc[position] TO element
        RETURN sortByCountKey(unsortedList, currentIndex + 1, acc)
    END FUNCTION

    SET finalSorted TO sortByCountKey(tempSortedArray, 0, COPY_OF(tempSortedArray))
    RETURN finalSorted
END FUNCTION
```