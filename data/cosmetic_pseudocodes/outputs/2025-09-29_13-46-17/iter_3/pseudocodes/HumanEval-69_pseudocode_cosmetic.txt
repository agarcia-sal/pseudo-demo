```
FUNCTION search(list_of_integers)
    FUNCTION check_frequency(pos)
        IF pos > LENGTH frequencyArr - 1 THEN
            RETURN -1
        ELSE IF NOT (frequencyArr[pos] < pos) THEN
            SET result TO check_frequency(pos + 1)
            IF result > pos THEN RETURN result
            RETURN pos
        END IF
        RETURN check_frequency(pos + 1)
    END FUNCTION

    SET frequencyArr TO []
    FOR i FROM 0 TO MAX_VALUE(list_of_integers) + 1 - 1
        APPEND 0 TO frequencyArr

    FOR each num_element IN list_of_integers
        SET frequencyArr[num_element] TO frequencyArr[num_element] + 1

    RETURN check_frequency(1)
END FUNCTION
```