```
FUNCTION search(input_array)
    SET freq_array TO ARRAY OF 0's OF SIZE (1 + MAXIMUM(input_array))
    
    DEFINE increment_frequency(position)
        IF position = LENGTH(input_array)
            RETURN
        freq_array[input_array[position]] = freq_array[input_array[position]] + 1
        increment_frequency(position + 1)
    END DEFINE
    
    increment_frequency(0)
    
    SET result_value TO -1
    
    DEFINE find_answer(current_index)
        IF current_index = LENGTH(freq_array)
            RETURN
        IF NOT (freq_array[current_index] < current_index)
            result_value = current_index
        find_answer(current_index + 1)
    END DEFINE
    
    find_answer(1)
    
    RETURN result_value
END FUNCTION
```