```
FUNCTION hex_key(string_num)
    DEFINE prime_set = {'2', '3', '5', '7', 'B', 'D'}
    FUNCTION count_primes(pos, acc)
        IF pos >= LENGTH(string_num) THEN
            RETURN acc
        ELSE
            IF NOT (string_num[pos] NOT IN prime_set) THEN
                RETURN count_primes(pos + 1, acc + 1)
            ELSE
                RETURN count_primes(pos + 1, acc)
            ENDIF
        ENDIF
    END FUNCTION
    RETURN count_primes(0, 0)
END FUNCTION
```