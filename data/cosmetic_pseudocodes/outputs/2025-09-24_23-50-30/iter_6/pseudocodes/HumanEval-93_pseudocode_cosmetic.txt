```
FUNCTION encode(message)
    LET vowel_collection = "aeiouAEIOU"
    LET replacement_map = EMPTY DICTIONARY
    LET idx = 0
    WHILE idx < LENGTH(vowel_collection)
        LET ch = vowel_collection[idx]
        replacement_map[ch] = CHARACTER_FROM_ASCII(ASCII_VALUE(ch) + 2)
        idx = idx + 1
    END WHILE

    LET toggled_message = ""
    LET pos = 0
    WHILE pos < LENGTH(message)
        LET current_char = message[pos]
        IF current_char >= 'a' AND current_char <= 'z'
            toggled_message = toggled_message + CHARACTER_FROM_ASCII(ASCII_VALUE(current_char) - 32)
        ELSE IF current_char >= 'A' AND current_char <= 'Z'
            toggled_message = toggled_message + CHARACTER_FROM_ASCII(ASCII_VALUE(current_char) + 32)
        ELSE
            toggled_message = toggled_message + current_char
        END IF
        pos = pos + 1
    END WHILE

    LET output_string = ""
    LET index = 0
    WHILE index < LENGTH(toggled_message)
        LET element = toggled_message[index]
        IF element IN replacement_map
            output_string = output_string + replacement_map[element]
        ELSE
            output_string = output_string + element
        END IF
        index = index + 1
    END WHILE

    RETURN output_string
END FUNCTION
```