```
FUNCTION fib4(integer_x)
    SET buffer TO LIST OF [0, 0, 2, 0]

    DEFINE FUNCTION helper(current_i, limit_i, window)
        IF NOT (current_i > limit_i)
            SET sum_val TO window[0] + window[1] + window[2] + window[3]
            SET new_window TO (window[1], window[2], window[3], sum_val)
            RETURN helper(current_i + 1, limit_i, new_window)
        ELSE
            RETURN window[3]
        END IF
    END FUNCTION

    SWITCH
        CASE integer_x < 4:
            RETURN buffer[integer_x]
        DEFAULT:
            RETURN helper(4, integer_x, (buffer[0], buffer[1], buffer[2], buffer[3]))
    END SWITCH
END FUNCTION
```