```
FUNCTION search(list_of_integers)
    SET frequency_array TO array_filled_with_zeros(size = (max_element_in(list_of_integers) + 1))
    DEFINE increment_frequency(current_list, idx)
        IF current_list IS empty THEN
            RETURN
        LET head_element TO first_element_of(current_list)
        LET tail_elements TO rest_of_list(current_list)
        SET frequency_array[head_element] TO frequency_array[head_element] + 1
        CALL increment_frequency(tail_elements, idx + 1)
    CALL increment_frequency(list_of_integers, 0)

    SET result_value TO -1
    DEFINE find_answer(index)
        IF index > length_of(frequency_array) - 1 THEN
            RETURN
        IF NOT (frequency_array[index] < index) THEN
            SET result_value TO index
        CALL find_answer(index + 1)
    CALL find_answer(1)
    RETURN result_value
END FUNCTION
```