```
FUNCTION is_sorted(sequence)
    SET frequency_map TO empty dictionary
    FOR item IN sequence
        IF item IN frequency_map
            SET frequency_map[item] TO frequency_map[item] + 1
        ELSE
            SET frequency_map[item] TO 1
    IF EXISTS element IN sequence WHERE frequency_map[element] > 2
        RETURN False
    FOR idx FROM 1 TO LENGTH(sequence) - 1
        IF sequence[idx - 1] > sequence[idx]
            RETURN False
    RETURN True
END FUNCTION
```