```
FUNCTION filter_by_substring(collection, pattern)
  DEFINE FUNCTION select_items(index, accum)
    IF index >= LENGTH(collection) THEN
      RETURN accum
    ENDIF
    IF CONTAINS(collection[index], pattern) THEN
      ASSIGN accum TO accum + [collection[index]]
    ENDIF
    RETURN select_items(index + 1, accum)
  ENDFUNCTION

  RETURN select_items(0, [])
END FUNCTION
```