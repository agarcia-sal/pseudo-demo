```
FUNCTION sort_array(units)
    FUNCTION bin_one_count_picker(val)
        SET bits_string TO TO_BINARY(val)
        SET counter TO 0
        FOR idx FROM 3 TO LENGTH(bits_string) + 2
            IF bits_string[LENGTH(bits_string) - idx + 2] == '1' THEN
                SET counter TO counter + 1
            END IF
        END FOR
        RETURN counter
    END FUNCTION

    SET temp_sorted TO SORT(units)
    SET output_list TO SORT(temp_sorted) WITH bin_one_count_picker AS KEY
    RETURN output_list
END FUNCTION
```