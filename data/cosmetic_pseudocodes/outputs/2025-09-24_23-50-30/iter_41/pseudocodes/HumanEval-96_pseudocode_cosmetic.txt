```
FUNCTION count_up_to(p)
  SET q TO 2
  SET r TO []
  WHILE q < p
    SET s TO true
    CALL check_divisor(q, 2, s)
    IF s
      SET t TO LENGTH(r)
      SET r[t] TO q
    END IF
    SET q TO q + 1
  END WHILE
  RETURN r
END FUNCTION

FUNCTION check_divisor(x, y, flag)
  IF y >= x THEN
    RETURN
  END IF
  IF (x - (x / y) * y) = 0 THEN
    SET flag TO false
    RETURN
  END IF
  CALL check_divisor(x, y + 1, flag)
END FUNCTION
```