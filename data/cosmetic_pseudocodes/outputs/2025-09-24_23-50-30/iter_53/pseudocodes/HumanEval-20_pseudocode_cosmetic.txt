FUNCTION find_closest_elements(Delta) 
  DEFINE Inner(i, j, Closest, MinDist) 
    IF i >= LENGTH(Delta) THEN 
      RETURN Closest 
    ELSE 
      IF j >= LENGTH(Delta) THEN 
        RETURN Inner(i + 1, 0, Closest, MinDist) 
      ELSE 
        IF NOT (i = j) THEN 
          LET Diff = ABS(Delta[i] - Delta[j]) 
          IF MinDist IS NULL OR Diff < MinDist THEN 
            LET NewClosest = (Delta[i] < Delta[j]) ? (Delta[i], Delta[j]) : (Delta[j], Delta[i]) 
            RETURN Inner(i, j + 1, NewClosest, Diff) 
          ELSE 
            RETURN Inner(i, j + 1, Closest, MinDist) 
          ENDIF 
        ELSE 
          RETURN Inner(i, j + 1, Closest, MinDist) 
        ENDIF 
      ENDIF 
    ENDIF 
  ENDDEFINE 
  RETURN Inner(0, 0, NULL, NULL) 
ENDFUNCTION