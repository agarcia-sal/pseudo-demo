FUNCTION closest_integer(pixi)
    IMPORT floor, ceil FROM math

    FUNCTION trim_zeros(seq)
        IF COUNT OF '.' IN seq IS NOT EQUAL TO 1
            RETURN seq
        ELSE
            FUNCTION recurse_trim(square)
                IF LENGTH OF square IS 0 OR LAST CHARACTER OF square IS NOT '0'
                    RETURN square
                ELSE
                    RETURN recurse_trim(ALL CHARACTERS OF square EXCEPT THE LAST ONE)
                END IF
            END FUNCTION
            RETURN recurse_trim(seq)
        END IF
    END FUNCTION

    SET blum TO trim_zeros(pixi)
    SET blaaf TO FLOAT CONVERSION OF blum

    SWITCH TRUE
        CASE (LAST TWO CHARACTERS OF blum ARE '.5'):
            IF blaaf > 0 THEN SET sploo TO ceil(blaaf) ELSE SET sploo TO floor(blaaf)
        CASE (LENGTH OF blum > 0):
            SET sploo TO INTEGER ROUND OF blaaf
        DEFAULT:
            SET sploo TO 0
    END SWITCH

    RETURN sploo
END FUNCTION