FUNCTION encode(psi)
  SET tau = "aeiouAEIOU"
  DEFINE upsilon
  upsilon = EMPTY DICTIONARY
  FOR phi IN tau
    upsilon[phi] = CHARACTER(ASCII(phi) + 2)
  END FOR
  SET omega = EMPTY STRING
  SET chi = LENGTH(psi) - 1
  DEFINE FUNCTION sigma(theta, i)
    IF i > chi THEN RETURN theta END IF
    DEFINE gamma = psi[i]
    DEFINE delta = (gamma IN tau) ? upsilon[gamma] : gamma
    RETURN sigma(theta + delta, i + 1)
  END FUNCTION
  SET kappa = ''
  FOR xi IN psi
    IF xi IS UPPERCASE THEN
      kappa = kappa + TO_LOWERCASE(xi)
    ELSE IF xi IS LOWERCASE THEN
      kappa = kappa + TO_UPPERCASE(xi)
    ELSE
      kappa = kappa + xi
    END IF
  END FOR
  RETURN sigma('', 0)
END FUNCTION