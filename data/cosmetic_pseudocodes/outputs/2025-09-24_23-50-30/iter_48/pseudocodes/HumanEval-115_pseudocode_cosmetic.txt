```
FUNCTION max_fill(array, threshold)
  IMPORT math
  DECLARE result = 0
  DECLARE idx = 0
  DECLARE length = LENGTH(array)
  WHILE idx < length
    DECLARE sum_val = 0
    DECLARE jdx = 0
    DECLARE row_len = LENGTH(array[idx])
    REPEAT
      sum_val = sum_val + array[idx][jdx]
      jdx = jdx + 1
    UNTIL jdx = row_len
    DECLARE div_val = sum_val / threshold
    DECLARE ceil_val = -(INT(-(div_val)))
    result = result + ceil_val
    idx = idx + 1
  END WHILE
  RETURN result
END FUNCTION
```