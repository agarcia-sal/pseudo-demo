```
FUNCTION separate_paren_groups(string_of_parentheses)
    SET results TO []
    SET segment_characters TO []
    SET depth_counter TO 0

    SET index TO 0
    WHILE index < LENGTH(string_of_parentheses)
        SET symbol TO string_of_parentheses[index]

        SWITCH symbol
            CASE '(':
                depth_counter <- depth_counter + 1
                segment_characters <- segment_characters + [symbol]
            CASE ')':
                segment_characters <- segment_characters + [symbol]
                depth_counter <- depth_counter - 1

                IF NOT (depth_counter != 0)
                    results <- results + [JOIN(segment_characters,"")]
                    segment_characters <- []
                END IF
        END SWITCH

        index <- index + 1
    END WHILE

    RETURN results
END FUNCTION
```