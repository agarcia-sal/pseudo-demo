```
FUNCTION sort_array(array_of_integers)
    DEFINE function count_ones(binary_string)
        RETURN LENGTH( FILTER(char -> char == '1', binary_string) )
    END FUNCTION

    SET temporary_sorted_array TO SORT(array_of_integers, ascending = true)

    DEFINE function binary_ones_key(element)
        RETURN count_ones(SUBSTRING(TO_BINARY_STRING(element), 3, LENGTH(TO_BINARY_STRING(element))))
    END FUNCTION

    SET output_array TO SORT(temporary_sorted_array, key = binary_ones_key)

    RETURN output_array
END FUNCTION
```