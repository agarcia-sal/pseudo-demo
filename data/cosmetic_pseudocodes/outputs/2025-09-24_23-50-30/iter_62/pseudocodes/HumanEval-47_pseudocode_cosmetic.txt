```
FUNCTION median(collection)
    FUNCTION median_helper(sequence)
        IF (LENGTH(sequence) MOD 2) = 1 THEN
            RETURN sequence[(LENGTH(sequence) DIV 2)]
        ELSE
            RETURN (sequence[(LENGTH(sequence) DIV 2) - 1] + sequence[(LENGTH(sequence) DIV 2)]) / 2.0
    END FUNCTION

    SET sorted_seq TO SORT(collection)
    RETURN median_helper(sorted_seq)
END FUNCTION
```