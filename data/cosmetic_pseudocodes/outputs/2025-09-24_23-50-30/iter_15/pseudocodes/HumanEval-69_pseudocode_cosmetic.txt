```
FUNCTION search(list_of_integers)
  DECLARE freq_queue AS queue INITIALIZED EMPTY
  SET max_elem TO 0
  FOR idx FROM 0 TO LENGTH(list_of_integers) - 1
    IF list_of_integers[idx] > max_elem THEN
      SET max_elem TO list_of_integers[idx]
  END FOR

  SET freq_array TO array OF LENGTH (max_elem + 1) FILLED WITH 0
  SET ptr TO 0
  WHILE ptr < LENGTH(list_of_integers)
    freq_array[list_of_integers[ptr]] = freq_array[list_of_integers[ptr]] + 1
    SET ptr TO ptr + 1
  END WHILE

  SET result_var TO -1
  SET cursor TO 1
  WHILE cursor <= LENGTH(freq_array) - 1
    IF NOT (freq_array[cursor] < cursor)
      SET result_var = cursor
    END IF
    SET cursor TO cursor + 1
  END WHILE

  RETURN result_var
END FUNCTION
```