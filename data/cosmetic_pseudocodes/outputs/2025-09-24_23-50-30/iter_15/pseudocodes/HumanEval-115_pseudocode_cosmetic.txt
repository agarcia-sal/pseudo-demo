```
FUNCTION max_fill(grid, capacity)
    SET TALLY TO 0
    FOR EACH row_element IN grid DO
        SET subtotal TO 0
        FOR EACH entry IN row_element DO
            subtotal = subtotal + entry
        END FOR
        IF subtotal MOD capacity IS 0 THEN
            SET quotient TO subtotal DIV capacity
        ELSE
            SET quotient TO (subtotal DIV capacity) + 1
        END IF
        TALLY = TALLY + quotient
    END FOR
    RETURN TALLY
END FUNCTION
```