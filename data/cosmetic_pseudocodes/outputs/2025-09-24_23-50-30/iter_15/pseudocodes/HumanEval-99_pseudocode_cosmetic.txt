```
FUNCTION closest_integer(value)
    IMPORT ceil, floor FROM math

    SET p TO 0
    FOR EACH w IN value
        IF w IS '.'
            INCREMENT p BY 1
        END IF
    END FOR

    IF p <> 1 THEN
        GOTO skip_trim
    END IF

    BEGIN_LOOP:
        IF LENGTH OF value IS 0 THEN
            GOTO end_loop
        END IF

        SET last_char TO SUBSTRING(value, LENGTH(value), LENGTH(value))

        IF last_char <> '0' THEN
            GOTO end_loop
        END IF

        SET value TO SUBSTRING(value, 1, LENGTH(value) - 1)
        GOTO BEGIN_LOOP

    end_loop:
    skip_trim:

    SET x TO CONVERT_TO_FLOAT(value)

    IF LENGTH(value) >= 2 THEN
        SET last_two TO SUBSTRING(value, LENGTH(value) - 1, LENGTH(value))
    ELSE
        SET last_two TO ""
    END IF

    IF last_two = '.5' THEN
        IF x > 0 THEN
            SET y TO ceil(x)
        ELSE
            SET y TO floor(x)
        END IF
    ELSE IF LENGTH(value) > 0 THEN
        SET y TO (x + 0.5) - 0.5 + 0.5 - 0.5 + ROUND(x)
        # The above is just ROUND(x), written with neutral extra expressions to change style
        SET y TO ROUND(x)
    ELSE
        SET y TO 0
    END IF

    RETURN y
END FUNCTION
```