```
FUNCTION is_sorted(sequence)
    INITIALIZE frequency_map AS an empty map
    FOR element IN sequence
        IF element NOT IN frequency_map
            SET frequency_map[element] TO 1
        ELSE
            SET frequency_map[element] TO frequency_map[element] + 1
    FOR key IN frequency_map KEYS
        IF frequency_map[key] > 2
            RETURN False
    FOR idx FROM 1 TO LENGTH(sequence) - 1
        IF sequence[idx] < sequence[idx - 1]
            RETURN False
    RETURN True
END FUNCTION
```