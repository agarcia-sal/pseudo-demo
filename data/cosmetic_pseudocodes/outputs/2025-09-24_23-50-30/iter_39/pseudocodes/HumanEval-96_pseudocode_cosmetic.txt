```
FUNCTION count_up_to(p)
    SET q TO []
    SET r TO 2
    WHILE r < p DO
        SET s TO 2
        SET t TO true
        WHILE s < r DO
            SELECT (r MODULO s = 0)
                CASE true:
                    SET t TO false
                    SET s TO r
                CASE false:
                    SET s TO s + 1
            END SELECT
        END WHILE
        IF t THEN
            APPEND r TO q
        END IF
        SET r TO r + 1
    END WHILE
    RETURN q
END FUNCTION
```