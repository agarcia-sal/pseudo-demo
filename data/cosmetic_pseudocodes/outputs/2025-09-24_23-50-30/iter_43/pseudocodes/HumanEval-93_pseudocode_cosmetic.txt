```
FUNCTION encode(input)
    SET keys TO "aeiouAEIOU"
    SET mapping TO EMPTY DICTIONARY
    FOR index FROM 0 TO LENGTH(keys) - 1
        SET char_current TO keys[index]
        SET mapping[char_current] TO CHARACTER(ASCII(char_current) + 2)
    END FOR
    SET swapped TO EMPTY STRING
    FOR position FROM 0 TO LENGTH(input) - 1
        SET char_original TO input[position]
        SET char_swapped TO IF char_original IS LOWERCASE THEN TO_UPPERCASE(char_original) ELSE TO_LOWERCASE(char_original) END IF
        APPEND char_swapped TO swapped
    END FOR
    SET result TO EMPTY STRING
    FOR offset FROM 0 TO LENGTH(swapped) - 1
        SET char_check TO swapped[offset]
        SET mapped_char TO mapping[char_check]
        IF mapped_char IS DEFINED THEN
            APPEND mapped_char TO result
        ELSE
            APPEND char_check TO result
        END IF
    END FOR
    RETURN result
END FUNCTION
```