```
FUNCTION largest_prime_factor(p)
    FUNCTION is_prime(q)
        SWITCH
            CASE q < 2:
                RETURN False
            DEFAULT:
                SET r TO 2
                WHILE r < q
                    SWITCH q MOD r
                        CASE 0:
                            RETURN False
                        DEFAULT:
                            SET r TO r + 1
                RETURN True
    END FUNCTION

    SET s TO 1
    SET t TO 2
    WHILE t <= p
        IF (p MOD t = 0) AND (is_prime(t) = True)
            SET s TO (s >= t) * s + (s < t) * t
        SET t TO t + 1
    RETURN s
END FUNCTION
```