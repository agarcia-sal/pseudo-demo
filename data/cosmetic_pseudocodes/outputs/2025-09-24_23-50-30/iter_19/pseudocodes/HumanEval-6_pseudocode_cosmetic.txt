```
FUNCTION parse_nested_parens(str)
  FUNCTION parse_paren_group(s)
    maximum_depth ← 0
    current_depth ← 0
    index ← 1
    WHILE index ≤ LENGTH(s) DO
      character ← s[index]
      IF character ≠ '(' THEN
        current_depth ← current_depth - 1
      ELSE
        current_depth ← current_depth + 1
        IF maximum_depth < current_depth THEN maximum_depth ← current_depth END IF
      END IF
      index ← index + 1
    END WHILE
    RETURN maximum_depth
  END FUNCTION

  parts ← []
  temp ← ""
  FOR i FROM 1 TO LENGTH(str) DO
    c ← str[i]
    IF c = " " THEN
      IF temp ≠ "" THEN APPEND temp TO parts END IF
      temp ← ""
    ELSE
      temp ← temp + c
    END IF
  END FOR
  IF temp ≠ "" THEN APPEND temp TO parts END IF

  depths ← []
  FOR each_part IN parts DO
    APPEND parse_paren_group(each_part) TO depths
  END FOR

  RETURN depths
END FUNCTION
```