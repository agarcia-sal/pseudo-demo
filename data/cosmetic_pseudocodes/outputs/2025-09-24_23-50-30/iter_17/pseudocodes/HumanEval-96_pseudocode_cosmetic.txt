```
FUNCTION count_up_to(x)
  SET results TO dictionary with keys as integers and values as booleans
  FOR k FROM 2 TO x - 1
    ASSIGN results[k] = true
  END FOR

  SET m TO 2
  WHILE m < x
    IF results[m] IS false
      ASSIGN m = m + 1
      CONTINUE
    END IF
    SET n TO 2
    WHILE n < m
      IF m % n = 0
        ASSIGN results[m] = false
        BREAK
      END IF
      ASSIGN n = n + 1
    END WHILE
    ASSIGN m = m + 1
  END WHILE

  SET output TO empty array
  FOR key IN keys of results
    IF results[key]
      APPEND key TO output
    END IF
  END FOR

  RETURN output
END FUNCTION
```