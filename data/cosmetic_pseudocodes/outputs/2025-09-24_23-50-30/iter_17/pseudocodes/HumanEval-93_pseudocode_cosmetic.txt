```
FUNCTION encode(input)
	TEXT vowels_set = "AEIOUaeiou"
	MAP shifts = EMPTY DICTIONARY
	INDEX pos = 0
	WHILE pos < LENGTH(vowels_set)
		CHAR current = GET(vowels_set, pos)
		SET shifts[current] = CHAR(ASCII(current) + 2)
		pos = pos + 1
	END WHILE

	ARRAY swapped_chars = []
	INTEGER idx = 0
	WHILE idx < LENGTH(input)
		CHAR ch = SUBSTRING(input, idx, 1)
		IF ch >= "a" AND ch <= "z" THEN
			APPEND(swapped_chars, CHR(ASCII(ch) - 32))
		ELSE IF ch >= "A" AND ch <= "Z" THEN
			APPEND(swapped_chars, CHR(ASCII(ch) + 32))
		ELSE
			APPEND(swapped_chars, ch)
		END IF
		idx = idx + 1
	END WHILE

	STRING transformed = ""
	FOR EACH symbol IN swapped_chars DO
		IF CONTAINS_KEY(shifts, symbol) THEN
			transformed = CONCAT(transformed, shifts[symbol])
		ELSE
			transformed = CONCAT(transformed, symbol)
		END IF
	END FOR
	RETURN transformed
END FUNCTION
```