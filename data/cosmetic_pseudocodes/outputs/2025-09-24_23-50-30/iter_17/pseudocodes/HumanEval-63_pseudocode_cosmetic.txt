```
FUNCTION fibfib(counter)
    SELECT counter
        CASE 0:
            RETURN 0
        CASE 1:
            RETURN 0
        CASE 2:
            RETURN 1
    END SELECT
    SET stack ← [counter]
    SET cache ← DICTIONARY WITH KEYS 0,1,2 VALUES 0,0,1
    WHILE stack NOT EMPTY
        SET top ← stack.POP()
        IF top NOT IN cache
            IF top - 1 NOT IN cache OR top - 2 NOT IN cache OR top - 3 NOT IN cache
                stack.PUSH(top)
                IF top - 1 NOT IN cache
                    stack.PUSH(top - 1)
                END IF
                IF top - 2 NOT IN cache
                    stack.PUSH(top - 2)
                END IF
                IF top - 3 NOT IN cache
                    stack.PUSH(top - 3)
                END IF
            ELSE
                SET cache[top] ← cache[top - 1] + cache[top - 2] + cache[top - 3]
            END IF
        END IF
    END WHILE
    RETURN cache[counter]
END FUNCTION
```