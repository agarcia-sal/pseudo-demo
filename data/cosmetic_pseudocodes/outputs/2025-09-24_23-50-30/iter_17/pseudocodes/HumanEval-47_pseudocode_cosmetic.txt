```
FUNCTION median(sequence)
  SET temp_sequence TO NEW SEQUENCE CONTAINING ALL ELEMENTS OF sequence
  SORT temp_sequence IN ASCENDING ORDER

  SET total TO LENGTH OF temp_sequence
  IF NOT (total MOD 2 EQUALS 0)
    RETURN VALUE AT POSITION (total - 1) DIV 2 IN temp_sequence
  END IF

  SET mid1 TO (total DIV 2) - 1
  SET mid2 TO total DIV 2
  SET val1 TO VALUE AT POSITION mid1 IN temp_sequence
  SET val2 TO VALUE AT POSITION mid2 IN temp_sequence

  RETURN (val1 + val2) / 2.0
END FUNCTION
```