```
FUNCTION separate_paren_groups(string_of_parentheses)
    SET result_collection TO []
    SET active_chars TO []
    SET depth_counter TO 0

    FUNCTION process_index(idx)
        IF idx > LENGTH(string_of_parentheses)
            RETURN
        END IF

        SET curr_char TO string_of_parentheses[idx]

        SWITCH true
            CASE curr_char = '(':
                SET depth_counter TO depth_counter + 1
                APPEND curr_char TO active_chars
            CASE curr_char = ')':
                SET depth_counter TO depth_counter - 1
                APPEND curr_char TO active_chars

                IF depth_counter = 0
                    APPEND JOIN(active_chars, "") TO result_collection
                    SET active_chars TO []
                END IF
        END SWITCH

        CALL process_index(idx + 1)
    END FUNCTION

    CALL process_index(1)
    RETURN result_collection
END FUNCTION
```