```
FUNCTION largest_prime_factor(a)
    FUNCTION is_prime(b)
        IF NOT (b >= 2) THEN
            RESULT := False
        ELSE
            PROCEDURE check_divisor(c, d)
                IF c >= d THEN
                    RESULT := True
                ELSE
                    IF NOT ((b MOD c) <> 0) THEN
                        RESULT := False
                    ELSE
                        check_divisor(c + 1, d)
                    ENDIF
                ENDIF
            END PROCEDURE
            CALL check_divisor(2, b)
        ENDIF
        RETURN RESULT
    END FUNCTION

    FUNCTION loop_divisors(e, f, g)
        IF e > f THEN
            RETURN g
        ELSE
            IF ((a MOD e) = 0) AND is_prime(e) THEN
                h := g
                i := e
                IF i > h THEN
                    j := i
                ELSE
                    j := h
                ENDIF
                RETURN loop_divisors(e + 1, f, j)
            ELSE
                RETURN loop_divisors(e + 1, f, g)
            ENDIF
        ENDIF
    END FUNCTION

    RETURN loop_divisors(2, a, 1)
END FUNCTION
```