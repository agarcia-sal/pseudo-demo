```
FUNCTION search(z)
	a = ARRAY OF 0 WITH LENGTH (MAXIMUM OF z) + 1

	PROCEDURE f(i)
		IF i = LENGTH OF z THEN RETURN
		ELSE
			a[z[i]] = a[z[i]] + 1
			f(i + 1)
		END IF
	END PROCEDURE

	f(0)

	b = -1
	j = 1
	WHILE j < LENGTH OF a DO
		SWITCH
			CASE a[j] >= j:
				b = j
			CASE ELSE:
		END SWITCH
		j = j + 1
	END WHILE

	RETURN b
END FUNCTION
```