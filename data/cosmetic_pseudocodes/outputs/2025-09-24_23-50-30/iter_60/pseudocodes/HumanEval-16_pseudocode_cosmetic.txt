```
FUNCTION count_distinct_characters(p, q, r)
  SET r TO EMPTY SET
  PROCEDURE process(i)
    IF i EQUALS LENGTH OF p THEN RETURN
    ELSE
      SET ch TO LOWERCASE OF p[i]
      SET r TO r UNION {ch}
      CALL process(i + 1)
  END PROCEDURE
  CALL process(0)
  RETURN LENGTH OF r
END FUNCTION
```