```
FUNCTION anti_shuffle(p)
	SUBFUNCTION f(q, r)
		IF q = [] THEN RETURN r END IF
		RETURN f(REST q, APPEND r, JOIN(SORT_CHARACTERS(FIRST q)))
	END SUBFUNCTION
	RETURN JOIN(f(SPLIT p BY " ", []), " ")
END FUNCTION
```