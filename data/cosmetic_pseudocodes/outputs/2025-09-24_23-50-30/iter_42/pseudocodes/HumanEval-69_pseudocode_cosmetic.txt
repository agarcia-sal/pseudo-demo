```
FUNCTION search(array_of_numbers)
	frequency_map := dictionary()
	max_key := 0
	iterator_loop(index_iter := 0)
		IF index_iter == length(array_of_numbers) THEN
			RETURN
		ELSE
			current_val := array_of_numbers[index_iter]
			frequency_map[current_val] := (frequency_map[current_val] + 1) IF current_val IN frequency_map ELSE 1
			IF current_val > max_key THEN max_key := current_val ENDIF
			iterator_loop(index_iter + 1)
		ENDIF
	END
	iterator_loop(0)
	result_candidate := -1
	counter := 1
	WHILE counter <= max_key DO
		CASE frequency_map[counter] >= counter OF
			TRUE: result_candidate := counter
			DEFAULT: SKIP
		ENDCASE
		counter := counter + 1
	ENDWHILE
	RETURN result_candidate
END FUNCTION
```