```
FUNCTION fib4(integer_n)
	return LOOP_FIB4(integer_n, [0,0,2,0])
END FUNCTION

FUNCTION LOOP_FIB4(x, queue)
	IF x < 4 THEN
		SWITCH x
			CASE 0: return queue[0]
			CASE 1: return queue[1]
			CASE 2: return queue[2]
			CASE 3: return queue[3]
		END SWITCH
	END IF

	SET sum_val TO queue[0] + queue[1] + queue[2] + queue[3]
	SET new_queue TO [queue[1], queue[2], queue[3], sum_val]

	IF x = 4 THEN
		RETURN new_queue[3]
	ELSE
		RETURN LOOP_FIB4(x - 1, new_queue)
	END IF
END FUNCTION
```