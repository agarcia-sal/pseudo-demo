```
FUNCTION parse_music(music_string)
    LET mapping = NEW EMPTY MAP
    mapping['o|'] = 2
    mapping['o'] = 4
    mapping['.|'] = 1

    LET tokens = music_string SPLIT BY ' '
    LET results = EMPTY LIST
    LET index = LENGTH(tokens) - 1

    WHILE index >= 0
        LET current = tokens[index]
        IF current = ''
            SET index = index - 1
            CONTINUE
        END IF
        INSERT mapping[current] AT START OF results
        SET index = index - 1
    END WHILE

    RETURN results
END FUNCTION
```