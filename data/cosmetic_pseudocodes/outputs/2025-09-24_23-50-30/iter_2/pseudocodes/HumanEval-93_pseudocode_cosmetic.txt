```
FUNCTION encode(message)
    SET vowels_map TO EMPTY DICTIONARY
    SET vowel_chars TO LIST OF CHARACTERS 'a','e','i','o','u','A','E','I','O','U'
    DEFINE build_map(index)
        IF index EQUALS LENGTH OF vowel_chars THEN
            RETURN
        ELSE
            SET ch TO vowel_chars[index]
            SET vowels_map[ch] TO CHARACTER_WITH_ASCII(ASCII_OF(ch) + 2)
            CALL build_map(index + 1)
        END IF
    END DEFINE
    CALL build_map(0)
    SET toggled TO EMPTY LIST
    FOR i FROM LENGTH(message)-1 DOWNTO 0 STEP -1
        SET toggled TO [SWAP_CASE(message[i])] + toggled
    END FOR
    SET result TO ""
    FOR each_char IN toggled
        IF NOT (each_char IN vowels_map) THEN
            SET result TO result + each_char
        ELSE
            SET result TO result + vowels_map[each_char]
        END IF
    END FOR
    RETURN result
END FUNCTION
```