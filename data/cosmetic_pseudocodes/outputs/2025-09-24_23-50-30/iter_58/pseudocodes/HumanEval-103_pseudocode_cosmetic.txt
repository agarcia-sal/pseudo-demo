```
FUNCTION rounded_avg(p, q)
    IF NOT (p <= q) THEN RETURN (-1)
    DEFINE FUNCTION loop(r, s)
        IF r > q THEN RETURN s
        ELSE RETURN loop(r + 1, s + r)
    END FUNCTION
    SET t TO loop(p, 0)
    SET u TO (t) DIV ((q - p) + (1 - 0))
    SET v TO ROUND(u)
    SET w TO BINARY FORMAT OF v
    RETURN w
END FUNCTION
```