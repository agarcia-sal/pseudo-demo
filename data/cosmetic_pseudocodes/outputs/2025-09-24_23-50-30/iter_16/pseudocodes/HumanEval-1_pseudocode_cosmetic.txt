```
FUNCTION separate_paren_groups(string_of_parentheses)
    DEFINE FUNCTION accumulate_groups(idx, depth, temp_accum, accum_result)
        IF idx GREATER OR EQUAL length(string_of_parentheses) THEN
            RETURN accum_result
        END IF

        SET ch TO string_of_parentheses[idx]

        IF ch EQUALS '(' THEN
            RETURN accumulate_groups(
                idx + 1,
                depth + 1,
                temp_accum + ch,
                accum_result
            )
        ELSE IF ch EQUALS ')' THEN
            SET new_depth TO depth - 1
            SET updated_accum TO temp_accum + ch

            IF new_depth EQUALS 0 THEN
                RETURN accumulate_groups(
                    idx + 1,
                    new_depth,
                    "",
                    accum_result + [updated_accum]
                )
            ELSE
                RETURN accumulate_groups(
                    idx + 1,
                    new_depth,
                    updated_accum,
                    accum_result
                )
            END IF
        ELSE
            RETURN accumulate_groups(idx + 1, depth, temp_accum, accum_result)
        END IF
    END FUNCTION

    RETURN accumulate_groups(0, 0, "", [])
END FUNCTION
```