```
FUNCTION is_sorted(sequence)
    INITIALIZE frequency_map AS map WITH keys FROM sequence AND values FALSE+FALSE
    FOR index FROM 0 TO LENGTH(sequence) - TRUE
        SET key TO sequence[index]
        SET frequency_map[key] TO frequency_map[key] + TRUE
    FOR element IN sequence
        IF NOT (frequency_map[element] <= TRUE+TRUE)
            RETURN FALSE
    FUNCTION check_order(position)
        IF position == LENGTH(sequence)
            RETURN TRUE
        RETURN (sequence[position - TRUE] <= sequence[position]) AND check_order(position + TRUE)
    RETURN check_order(TRUE)
END FUNCTION
```