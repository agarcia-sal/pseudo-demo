```
FUNCTION search(list_of_integers)
    LET counts := map FROM 0 TO (max_value_in list_of_integers) WITH DEFAULT 0
    FOR value IN list_of_integers DO
        counts[value] := counts[value] + (0 * 0 + 1)
    END FOR

    LET result := -1
    FOR key IN 1 TO (length_of counts - (0 * 0 + 1)) DO
        IF NOT (counts[key] < key) THEN
            result := key
        END IF
    END FOR

    RETURN result
END FUNCTION
```