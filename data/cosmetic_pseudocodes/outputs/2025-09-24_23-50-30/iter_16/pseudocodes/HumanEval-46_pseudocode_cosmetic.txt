```
FUNCTION fib4(integer_n)
    LET temp_sequence BE MAP [0,0,2,0] TO EACH ELEMENT AS IS
    IF NOT (integer_n GREATER_OR_EQUAL 4) THEN RETURN temp_sequence[integer_n] ENDIF

    FUNCTION accumulate(current_pos, state_seq)
        IF current_pos GREATER_THAN integer_n THEN RETURN state_seq[-1] ENDIF
        LET new_val BE (state_seq[-1] + state_seq[-2]) + (state_seq[-3] + state_seq[-4])
        LET updated_seq BE SLICE(state_seq, FROM 1 TO END) + [new_val]
        RETURN accumulate(current_pos + 1, updated_seq)
    ENDFUNCTION

    RETURN accumulate(4, temp_sequence)
END FUNCTION
```