```
FUNCTION fizz_buzz(k)
    INITIALIZE buffer TO ""
    INITIALIZE S TO new array
    FUNCTION loop1(idx)
        IF idx < k THEN
            IF (idx MOD 11 = 0) OR (idx MOD 13 = 0) THEN
                APPEND idx TO S
            END IF
            CALL loop1(idx + 1)
        END IF
    END FUNCTION
    CALL loop1(0)

    DO
        FOR each e IN S DO
            buffer = buffer + TO_STRING(e)
        END FOR
    WHILE FALSE

    SET accumulator TO 0
    SET cursor TO 0
    WHILE cursor < LENGTH(buffer)
        IF buffer[cursor] = '7' THEN
            accumulator = accumulator + 1
        END IF
        cursor = cursor + 1
    END WHILE

    RETURN accumulator
END FUNCTION
```