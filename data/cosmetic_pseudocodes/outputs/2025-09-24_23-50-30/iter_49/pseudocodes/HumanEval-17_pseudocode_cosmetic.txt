```
FUNCTION parse_music(input_sequence)
    DEFINE FUNCTION unfold(collection, index, accumulator)
        IF index >= LENGTH(collection) THEN
            RETURN accumulator
        ELSE
            LET element REPLACE_WITH collection[index]
            IF LENGTH(element) <> 0 THEN
                RETURN unfold(collection, index + 1, accumulator + [lookup[element]])
            ELSE
                RETURN unfold(collection, index + 1, accumulator)
            END IF
        END IF
    END FUNCTION

    LET lookup = {
        'o' : 4,
        'o|' : 2,
        '.|' : 1
    }

    LET tokens = SPLIT input_sequence BY ' '
    RETURN unfold(tokens, 0, [])
END FUNCTION
```