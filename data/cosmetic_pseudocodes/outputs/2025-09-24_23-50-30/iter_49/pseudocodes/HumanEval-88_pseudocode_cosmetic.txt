```
FUNCTION sort_array(sequence)
  DEFINE helper(sequence_inner)
    SWITCH LENGTH OF sequence_inner
      CASE 0:
        RETURN []
      DEFAULT:
        LET alpha = sequence_inner[0]
        LET beta = sequence_inner[LENGTH OF sequence_inner - 1]
        LET gamma = (alpha + beta) MOD 2
        LET order_flag = (NOT (gamma % 2 == 1))   // equivalent to: gamma == 0
        LET delta = ORDER_DESCENDING IF order_flag ELSE ORDER_ASCENDING
        RETURN SORT(sequence_inner, delta)
    END SWITCH
  END DEFINE
  RETURN helper(sequence)
END FUNCTION
```