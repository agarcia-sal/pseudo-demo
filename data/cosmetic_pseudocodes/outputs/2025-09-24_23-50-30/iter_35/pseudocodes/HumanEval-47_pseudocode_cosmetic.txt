```
FUNCTION median(list_of_elements)
    SET sorted_list TO EMPTY LIST
    FOR EACH element IN list_of_elements
        CALL insert_sorted(sorted_list, element)
    END FOR

    SET total_count TO LENGTH OF sorted_list
    SET midpoint TO total_count / 2

    SELECT 
        CASE (total_count % 2 = 1):
            RETURN sorted_list[midpoint]
        CASE DEFAULT:
            SET left_val TO sorted_list[midpoint - 1]
            SET right_val TO sorted_list[midpoint]
            RETURN (left_val + right_val) / 2.0
    END SELECT
END FUNCTION

FUNCTION insert_sorted(arr, x)
    IF arr IS EMPTY
        APPEND x TO arr
    ELSE
        SET index TO 0
        WHILE index < LENGTH OF arr AND arr[index] < x
            SET index TO index + 1
        END WHILE
        INSERT x INTO arr AT index
    END IF
END FUNCTION
```