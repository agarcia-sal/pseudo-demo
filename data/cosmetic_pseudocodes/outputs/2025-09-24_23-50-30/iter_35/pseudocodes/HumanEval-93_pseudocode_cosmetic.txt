```
FUNCTION encode(input_data)
    SET key_chars TO LIST OF CHARACTERS IN "aeiouAEIOU"
    SET substitution_map TO EMPTY MAP
    FOR index FROM 0 TO LENGTH(key_chars) - 1
        SET char_key TO key_chars[index]
        SET ascii_val TO INTEGER VALUE OF char_key
        ADD TO substitution_map: char_key MAPPED TO CHARACTER OF (ascii_val + 2)
    END FOR
    SET toggled_data TO EMPTY STRING
    FOR pos FROM 0 TO LENGTH(input_data) - 1
        SET curr_char TO input_data[pos]
        IF 'A' <= curr_char <= 'Z' THEN
            SET toggled_data TO CONCATENATE(toggled_data, CHARACTER(ASCII(curr_char) + 32))
        ELSE IF 'a' <= curr_char <= 'z' THEN
            SET toggled_data TO CONCATENATE(toggled_data, CHARACTER(ASCII(curr_char) - 32))
        ELSE
            SET toggled_data TO CONCATENATE(toggled_data, curr_char)
        END IF
    END FOR
    SET output_string TO EMPTY STRING
    FOR idx FROM 0 TO LENGTH(toggled_data) - 1
        SET ch TO toggled_data[idx]
        SET replacement_char TO substitution_map[ch]
        IF replacement_char IS DEFINED THEN
            SET output_string TO CONCATENATE(output_string, replacement_char)
        ELSE
            SET output_string TO CONCATENATE(output_string, ch)
        END IF
    END FOR
    RETURN output_string
END FUNCTION
```