```
FUNCTION is_happy(token)
    IF NOT (3 <= LENGTH OF token) THEN RETURN False
    LET pos = 0
    WHILE pos <= LENGTH OF token - 3 DO
        SWITCH TRUE
            CASE token[pos] = token[pos + 1]: RETURN False
            CASE token[pos + 1] = token[pos + 2]: RETURN False
            CASE token[pos] = token[pos + 2]: RETURN False
        END SWITCH
        pos = pos + 1
    END WHILE
    RETURN True
END FUNCTION
```