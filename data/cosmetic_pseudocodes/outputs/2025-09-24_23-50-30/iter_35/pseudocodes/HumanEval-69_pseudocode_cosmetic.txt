```
FUNCTION search(array_of_nums)
    LET counts <- [0] * (1 + MAX(array_of_nums))
    LET idx <- 0
    WHILE idx < LENGTH(array_of_nums)
        LET val <- array_of_nums[idx]
        counts[val] <- counts[val] + 1
        idx <- idx + 1
    LET res <- -1
    LET j <- 1
    WHILE j < LENGTH(counts)
        SWITCH TRUE
            CASE counts[j] >= j:
                res <- j
        j <- j + 1
    RETURN res
END FUNCTION
```