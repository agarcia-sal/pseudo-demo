```
FUNCTION largest_prime_factor(x)
  FUNCTION is_prime(y)
    IF NOT (y GREATER_OR_EQUAL 2) THEN
      RETURN False
    END IF

    VAR idx ← 2
    WHILE idx NOT_GREATER_OR_EQUAL y DO
      CASE y MODULO idx OF 0:
        RETURN False
      ELSE:
        idx ← idx + 1
      END CASE
    END WHILE
    RETURN True
  END FUNCTION

  VAR candidate ← 2
  VAR max_prime ← 1
  WHILE candidate NOT_GREATER_THAN x DO
    SWITCH (x MODULO candidate = 0) AND is_prime(candidate)
      CASE True:
        max_prime ← (max_prime >= candidate) AND max_prime OR candidate
      DEFAULT:
    END SWITCH
    candidate ← candidate + 1  
  END WHILE

  RETURN max_prime
END FUNCTION
```