```
FUNCTION is_sorted(sequence)
    DECLARE frequency_map AS dictionary INITIALIZED WITH keys FROM sequence AND values 0
    DECLARE index_var AS integer INITIALIZED TO 0
    WHILE index_var < LENGTH(sequence)
        SET frequency_map[sequence[index_var]] TO frequency_map[sequence[index_var]] + 1
        SET index_var TO index_var + 1
    END WHILE
    FOR each key IN frequency_map KEYS
        IF frequency_map[key] > 2 THEN
            RETURN False
        END IF
    END FOR
    DECLARE pos AS integer INITIALIZED TO 1
    DECLARE is_non_decreasing AS boolean INITIALIZED TO True
    WHILE pos < LENGTH(sequence) AND is_non_decreasing
        SET is_non_decreasing TO (sequence[pos - 1] <= sequence[pos]) AND is_non_decreasing
        SET pos TO pos + 1
    END WHILE
    RETURN is_non_decreasing
END FUNCTION
```