```
FUNCTION separate_paren_groups(string_of_parentheses)
    DEFINE result_groups AS []
    DEFINE current_fragment AS []
    DEFINE depth_counter AS 0

    DEFINE FUNCTION process_chars(index)
        IF index EQUALS LENGTH(string_of_parentheses) THEN
            RETURN
        END IF
        DEFINE sym AS string_of_parentheses[index]
        IF sym = '(' THEN
            depth_counter = depth_counter + 1
            APPEND sym TO current_fragment
        ELSE IF sym = ')' THEN
            depth_counter = depth_counter - 1
            APPEND sym TO current_fragment
            IF depth_counter = 0 THEN
                APPEND JOIN(current_fragment) TO result_groups
                current_fragment = []
            END IF
        END IF
        process_chars(index + 1)
    END FUNCTION

    process_chars(0)
    RETURN result_groups
END FUNCTION
```