```
FUNCTION flip_case(str)
    IF str IS EMPTY THEN
        RETURN ""
    ELSE
        first_char = str[0]
        rest_flipped = flip_case(str[1:])
        flipped_char = IF first_char IS UPPERCASE THEN TO_LOWERCASE(first_char) ELSE TO_UPPERCASE(first_char)
        RETURN CONCAT(flipped_char, rest_flipped)
    END IF
END FUNCTION
```