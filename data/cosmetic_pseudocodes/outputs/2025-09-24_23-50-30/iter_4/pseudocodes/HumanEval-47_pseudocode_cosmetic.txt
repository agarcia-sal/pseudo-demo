```
FUNCTION median(list_of_elements)
    DEFINE retrieve_element(idx) = list_of_elements[idx]
    DEFINE n = LENGTH(list_of_elements)
    DEFINE sorted_elements = []
    FOR element IN list_of_elements DO
        INSERT element INTO sorted_elements IN ORDER
    END FOR
    SET list_of_elements = sorted_elements
    
    RETURN CASE (n % 2) = 1 OF
        TRUE: retrieve_element((n - 1) / 2)
        FALSE: (retrieve_element((n / 2) - 1) + retrieve_element(n / 2)) / 2.0
    END CASE
END FUNCTION
```