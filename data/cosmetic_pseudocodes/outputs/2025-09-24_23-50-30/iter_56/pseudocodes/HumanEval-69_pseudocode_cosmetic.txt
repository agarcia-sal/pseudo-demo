```
FUNCTION search(sequence_of_numbers)
  let freq_array := ARRAY_NEW(size = (MAX_VALUE(sequence_of_numbers) + 1), initial_value = 0)
  
  PROCEDURE iterate_elements(pos)
    IF pos > LENGTH(sequence_of_numbers) THEN RETURN
    LET elem := sequence_of_numbers[pos]
    freq_array[elem] := freq_array[elem] + 1
    iterate_elements(pos + 1)
  END PROCEDURE

  iterate_elements(1)
  
  LET result := -1
  LET idx := 1

  WHILE idx < LENGTH(freq_array) DO
    LET cond := NOT (freq_array[idx] < idx)
    IF cond THEN result := idx
    idx := idx + 1
  END WHILE

  RETURN result
END FUNCTION
```