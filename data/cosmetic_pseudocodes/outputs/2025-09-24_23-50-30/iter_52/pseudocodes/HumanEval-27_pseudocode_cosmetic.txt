```
FUNCTION flip_case(observed_string)
    FUNCTION toggle(position)
        IF position >= LENGTH(observed_string) THEN
            RETURN EMPTY_LIST
        ELSE
            current_char <- CHARACTER_AT(observed_string, position)
            toggled_char <-
                IF current_char >= 'a' AND current_char <= 'z' THEN
                    TO_UPPER(current_char)
                ELSE IF current_char >= 'A' AND current_char <= 'Z' THEN
                    TO_LOWER(current_char)
                ELSE
                    current_char
            END IF
            RETURN CONCATENATE(toggled_char, toggle(position + 1))
        END IF
    END FUNCTION
    RETURN JOIN(toggle(0))
END FUNCTION
```