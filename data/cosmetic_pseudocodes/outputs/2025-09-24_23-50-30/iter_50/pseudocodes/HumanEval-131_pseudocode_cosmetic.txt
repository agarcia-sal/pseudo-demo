```
FUNCTION digits(n)
    FUNCTION process_chars(index, accum_product, count_odds, char_array)
        IF index >= LENGTH(char_array)
            RETURN (accum_product, count_odds)
        ELSE
            SET current_char TO char_array[index]
            SET digit_val TO TO_INT(current_char)
            IF (digit_val MOD 2) = 1
                RETURN process_chars(index + 1, accum_product * digit_val, count_odds + 1, char_array)
            ELSE
                RETURN process_chars(index + 1, accum_product, count_odds, char_array)
            END IF
        END IF
    END FUNCTION

    SET chars_list TO TO_LIST(STR(n))
    SET (final_product, final_odd_count) TO process_chars(0, 1, 0, chars_list)

    RETURN (final_odd_count = 0) ? 0 : final_product
END FUNCTION
```