```
FUNCTION parse_music(music_string)
    DEFINE get_value = FUNCTION(key)
        BEGIN
            SELECT key
                CASE 'o'
                    RETURN 4
                CASE 'o|'
                    RETURN 2
                CASE '.|'
                    RETURN 1
            END SELECT
        END
    END FUNCTION

    DECLARE output_list = []
    DECLARE keys_list = []
    DECLARE idx_counter = 1
    DECLARE temp_note = ""
    DECLARE str_len = LENGTH(music_string)

    WHILE idx_counter <= str_len
        temp_note = ""
        WHILE (idx_counter <= str_len) AND (SUBSTRING(music_string, idx_counter, idx_counter) != " ")
            temp_note = temp_note + SUBSTRING(music_string, idx_counter, idx_counter)
            idx_counter = idx_counter + 1
        END WHILE
        IF LENGTH(temp_note) > 0 THEN keys_list.ADD(temp_note)
        idx_counter = idx_counter + 1
    END WHILE

    FOR EACH elem IN keys_list
        output_list.ADD( get_value(elem) )
    END FOR

    RETURN output_list
END FUNCTION
```