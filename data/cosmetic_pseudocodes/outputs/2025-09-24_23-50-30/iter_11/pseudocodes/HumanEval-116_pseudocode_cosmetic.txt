```
FUNCTION sort_array(nums)
    DEFINE helper(x)
        RETURN LEN(FILTER c IN STR(BIN(x)) WHERE c = '1')
    END

    SET nums_sorted = LIST OF nums
    nums_sorted = SORT nums_sorted BY (a,b) -> a - b

    FOR i = 1 TO LENGTH(nums_sorted) - 1
        FOR j = 0 TO LENGTH(nums_sorted) - i - 1
            IF helper(nums_sorted[j]) > helper(nums_sorted[j + 1]) OR 
               (helper(nums_sorted[j]) = helper(nums_sorted[j + 1]) AND nums_sorted[j] > nums_sorted[j + 1])
                SWAP nums_sorted[j], nums_sorted[j + 1]
            ENDIF
        ENDFOR
    ENDFOR

    RETURN nums_sorted
END FUNCTION
```