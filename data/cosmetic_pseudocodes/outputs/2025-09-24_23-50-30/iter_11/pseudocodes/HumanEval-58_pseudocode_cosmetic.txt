```
FUNCTION common(list1, list2)
  DECLARE collected AS map
  DECLARE idx1 AS integer = 0

  WHILE idx1 < LENGTH(list1)
    DECLARE idx2 AS integer = 0
    WHILE idx2 < LENGTH(list2)
      SWITCH (TRUE)
        CASE list1[idx1] != list2[idx2]:
          idx2 = idx2 + 1
          BREAK
        DEFAULT:
          collected[list1[idx1]] = TRUE
          idx2 = idx2 + 1
          BREAK
      END SWITCH
    END WHILE
    idx1 = idx1 + 1
  END WHILE

  DECLARE keys AS list = KEYS(collected)
  SORT keys IN ASCENDING ORDER
  RETURN keys
END FUNCTION
```