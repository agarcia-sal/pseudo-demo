```
FUNCTION flip_case(str_arg)
   SET res_array TO EMPTY ARRAY
   SET idx TO 0
   WHILE idx < LENGTH(str_arg)
      IF str_arg[idx] == LOWERCASE(str_arg[idx])
         APPEND UPPERCASE(str_arg[idx]) TO res_array
      ELSE
         APPEND LOWERCASE(str_arg[idx]) TO res_array
      END IF
      SET idx TO idx + 1
   END WHILE
   RETURN JOIN res_array INTO STRING
END FUNCTION
```