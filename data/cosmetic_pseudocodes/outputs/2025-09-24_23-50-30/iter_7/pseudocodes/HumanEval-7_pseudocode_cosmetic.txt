```
FUNCTION filter_by_substring(array_tokens, token_substring)
    SET accumulator TO EMPTY LIST
    FOR index FROM 0 TO LENGTH(array_tokens) - 1
        SET element TO array_tokens[index]
        IF NOT (CONTAINS(element, token_substring) EQUALS FALSE)
            CALL accumulator.APPEND(element)
        END IF
    END FOR
    RETURN accumulator
END FUNCTION
```