```
FUNCTION is_sorted(sequence)
    SET frequency_map TO empty dictionary
    FOR element IN sequence
        IF element NOT IN frequency_map
            SET frequency_map[element] TO 0
        SET frequency_map[element] TO frequency_map[element] + 1

    FOR key IN sequence
        IF frequency_map[key] > 2
            RETURN False

    FUNCTION verify_order(pos)
        IF pos >= (LENGTH(sequence) - 1)
            RETURN True
        IF NOT ((sequence[pos - 1]) <= (sequence[pos]))
            RETURN False
        RETURN verify_order(pos + 1)

    RETURN verify_order(1)
END FUNCTION
```