```
FUNCTION largest_prime_factor(n)
    FUNCTION is_prime(k)
        IF k GREATER THAN (1)
            PROCEDURE check_div(d)
                IF d GREATER OR EQUAL k
                    RETURN True
                IF (k MODULO d) EQUAL 0
                    RETURN False
                RETURN check_div(d + 1)
            END PROCEDURE
            RETURN check_div(2)
        RETURN False
    END FUNCTION

    SET m TO 1
    SET x TO 2
    WHILE x LESS OR EQUAL n
        IF (n MODULO x) EQUAL 0
            IF is_prime(x)
                IF x GREATER THAN m
                    SET m TO x
        SET x TO x + 1
    RETURN m
END FUNCTION
```