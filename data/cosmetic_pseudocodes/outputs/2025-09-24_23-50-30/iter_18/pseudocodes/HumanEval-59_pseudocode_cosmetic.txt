```
FUNCTION largest_prime_factor(n)
    FUNCTION is_prime(k)
        IF 1 GREATER OR EQUAL k
            RETURN False

        SET u TO 2
        WHILE u LESS THAN k
            IF (k DIV u) * u = k
                RETURN False
            SET u TO u + 1
        RETURN True
    END FUNCTION

    SET p TO 1
    SET q TO 2

    WHILE q LESS OR EQUAL n
        IF (n DIV q) * q = n
            IF is_prime(q) = True
                IF q GREATER THAN p
                    SET p TO q
        SET q TO q + 1
    RETURN p
END FUNCTION
```