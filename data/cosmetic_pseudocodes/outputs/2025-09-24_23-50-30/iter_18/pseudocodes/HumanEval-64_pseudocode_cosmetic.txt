```
FUNCTION vowels_count(string_input)
    SET vowels_map TO DICTIONARY()
    FOR EACH char IN "aeiouAEIOU"
        vowels_map[char] = TRUE
    END FOR

    SET count_accumulator TO 0
    SET index_counter TO 0
    SET input_length TO LENGTH(string_input)

    WHILE index_counter < input_length
        IF vowels_map[string_input[index_counter]] = TRUE
            count_accumulator = count_accumulator + 1
        END IF
        index_counter = index_counter + 1
    END WHILE

    SET last_character TO string_input[input_length - 1]
    IF last_character != 'y' AND last_character != 'Y'
        RETURN count_accumulator
    END IF

    RETURN count_accumulator + 1
END FUNCTION
```