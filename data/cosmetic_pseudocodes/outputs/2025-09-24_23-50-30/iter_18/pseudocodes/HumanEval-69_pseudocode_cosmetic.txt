```
FUNCTION search(list_of_integers)
    SET frequency_map TO DICTIONARY WITH DEFAULT VALUE 0
    FOR integer_element FROM 0 TO max_value_in(list_of_integers)
        frequency_map[integer_element] = 0
    FOR order_index FROM 0 TO LENGTH(list_of_integers) - 1
        SET current_value TO list_of_integers[order_index]
        frequency_map[current_value] = frequency_map[current_value] + 1
    SET result TO -1
    SET keys_list TO ARRAY_CONSTRUCT_KEYS_OF(frequency_map)
    SET key_counter TO 1
    WHILE key_counter < LENGTH(keys_list)
        SET current_key TO keys_list[key_counter]
        IF NOT (frequency_map[current_key] < current_key)
            result = current_key
        END IF
        key_counter = key_counter + 1
    END WHILE
    RETURN result
END FUNCTION
```