```
FUNCTION search(array_of_numbers)
    SET bag TO []
    SET apex TO 0
    REPEAT
        EXIT WHEN apex >= LENGTH OF array_of_numbers
        APPEND 0 TO bag
        SET apex TO apex + 1
    END REPEAT
    SET node TO 0
    WHILE node < LENGTH OF array_of_numbers
        LET element BE array_of_numbers[node]
        LET existing_value BE bag[element]
        SET bag[element] TO existing_value + 1
        SET node TO node + 1
    END WHILE
    SET result TO -1
    SET pointer TO 1
    LOOP
        BREAK WHEN pointer > LENGTH OF bag - 1
        IF NOT (bag[pointer] < pointer) THEN
            SET result TO pointer
        END IF
        SET pointer TO pointer + 1
    END LOOP
    RETURN result
END FUNCTION
```