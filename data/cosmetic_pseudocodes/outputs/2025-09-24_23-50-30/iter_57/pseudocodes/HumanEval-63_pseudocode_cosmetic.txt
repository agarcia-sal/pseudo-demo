```
FUNCTION fibfib(index_r)
    SWITCH index_r
        CASE 0:
            RETURN 0;
        CASE 1:
            RETURN 0;
        CASE 2:
            RETURN 1;
        DEFAULT:
            DEFINE FUNCTION recur_loop(state_a, state_b, state_c, state_d)
                WHILE TRUE DO
                    IF state_d > index_r THEN
                        RETURN state_c;
                    END IF
                    LET temp_x = state_b + state_c + state_a;
                    state_a = state_b;
                    state_b = state_c;
                    state_c = temp_x;
                    state_d = state_d + 1;
                END WHILE
            END FUNCTION
            RETURN recur_loop(0, 0, 1, 3);
    END SWITCH
END FUNCTION
```