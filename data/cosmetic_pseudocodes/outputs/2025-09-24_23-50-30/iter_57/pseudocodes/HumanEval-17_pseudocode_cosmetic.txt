```
FUNCTION parse_music(music_string)
  SET mapping_local TO EMPTY DICTIONARY
  ASSIGN mapping_local['o'] = 4
  ASSIGN mapping_local['o|'] = 2
  ASSIGN mapping_local['.|'] = 1

  SET tokens_local TO SPLIT music_string BY ' '
  SET result_local TO EMPTY LIST

  SET index_local TO 0
  WHILE index_local < LENGTH OF tokens_local
    SET token_local TO tokens_local[index_local]
    IF NOT (token_local = '')
      APPEND mapping_local[token_local] TO result_local
    ENDIF
    SET index_local = index_local + 1
  ENDWHILE

  RETURN result_local
END FUNCTION
```