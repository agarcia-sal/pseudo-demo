```
FUNCTION fib(value)
    SWITCH value
        CASE 0:
            RETURN 0
        CASE 1:
            RETURN 1
    END SWITCH

    SET stack TO [value, value MINUS 1, value MINUS 2]
    SET results TO {}

    WHILE stack IS NOT EMPTY
        POP current FROM stack

        IF current IN results
            CONTINUE
        END IF

        IF current EQUALS 0
            results[0] = 0
        ELSEIF current EQUALS 1
            results[1] = 1
        ELSE
            IF (current MINUS 1) NOT IN results
                PUSH current
                PUSH current MINUS 1
                CONTINUE
            END IF
            IF (current MINUS 2) NOT IN results
                PUSH current
                PUSH current MINUS 2
                CONTINUE
            END IF
            results[current] = results[current MINUS 1] PLUS results[current MINUS 2]
        END IF
    END WHILE

    RETURN results[value]
END FUNCTION
```