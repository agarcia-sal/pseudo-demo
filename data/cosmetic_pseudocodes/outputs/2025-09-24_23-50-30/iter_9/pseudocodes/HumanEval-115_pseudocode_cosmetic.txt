FUNCTION max_fill(grid, capacity)
    DECLARE total AS INTEGER = 0
    FOR eachRow FROM 0 TO LENGTH(grid) - 1
        DECLARE rowSum AS INTEGER = 0
        FOR cellIndex FROM 0 TO LENGTH(grid[eachRow]) - 1
            SET rowSum = rowSum + grid[eachRow][cellIndex]
        END FOR
        IF (rowSum MOD capacity) = 0
            SET total = total + (rowSum DIV capacity)
        ELSE
            SET total = total + ((rowSum DIV capacity) + 1)
        END IF
    END FOR
    RETURN total
END FUNCTION