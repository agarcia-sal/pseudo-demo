```
FUNCTION search(collection)
    LET counts BE new_array_of_zeros(length(find_max(collection)) + 1)
    LET result = -1
    FOR counter = 1 TO length(counts) - 1
        IF counts[counter] < counter THEN
            CONTINUE
        END IF
        result = counter
    END FOR
    FOR item IN collection
        counts[item] = counts[item] + 1
    END FOR
    RETURN result
END FUNCTION
```