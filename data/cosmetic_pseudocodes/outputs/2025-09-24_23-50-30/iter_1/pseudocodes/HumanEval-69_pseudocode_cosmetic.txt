```
FUNCTION search(list_of_integers)
    LET max_val BE THE MAXIMUM VALUE IN list_of_integers
    CREATE frequency_list AS AN ARRAY OF SIZE (max_val + 1), INITIALIZED WITH ZEROS
    FOR i FROM 0 TO LENGTH OF list_of_integers MINUS 1 DO
        LET num BE list_of_integers[i]
        frequency_list[num] = frequency_list[num] + 1
    END FOR
    LET answer BE -1
    LET limit BE LENGTH OF frequency_list
    FOR idx FROM 1 TO limit - 1 DO
        IF frequency_list[idx] >= idx THEN
            answer = idx
        END IF
    END FOR
    RETURN answer
END FUNCTION
```