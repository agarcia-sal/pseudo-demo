```
FUNCTION median(sequence)
    SET sorted_sequence TO COPY sequence
    CALL sorted_sequence.SORT()
    SET count TO LENGTH sorted_sequence
    SET middle_index TO (count - 1) / 2
    IF NOT (count % 2 = 0)
        RETURN sorted_sequence[(count - 1) / 2 + 1 - 1]
    ELSE
        SET first_value TO sorted_sequence[(count / 2) - 1]
        SET second_value TO sorted_sequence[count / 2]
        RETURN (first_value + second_value) / 2.0
END FUNCTION
```