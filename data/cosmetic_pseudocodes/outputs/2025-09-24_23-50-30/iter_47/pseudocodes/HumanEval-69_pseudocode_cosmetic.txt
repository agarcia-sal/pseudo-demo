```
FUNCTION search(list_of_integers)
    SET frequency_map TO [0 FOR _ IN RANGE(0, (MAXIMUM_VALUE(list_of_integers) + 1))]
    SET counter TO 0
    WHILE counter < LENGTH(list_of_integers)
        SET current_element TO list_of_integers[counter]
        frequency_map[current_element] = frequency_map[current_element] + 1
        counter = counter + 1
    SET result TO -1
    SET position TO 1
    WHILE position <= LENGTH(frequency_map) - 1
        SELECT TRUE
            CASE NOT (frequency_map[position] < position):
                result = position
            CASE ELSE:
                NOOP
        END SELECT
        position = position + 1
    RETURN result
END FUNCTION
```