```
FUNCTION largest_prime_factor(x)
    FUNCTION is_prime(y)
        SWITCH
            CASE y < 2:
                RETURN False
        END SWITCH
        SET m TO 2
        WHILE m < y
            IF NOT (y MOD m <> 0)
                RETURN False
            SET m TO m + 1
        RETURN True
    END FUNCTION

    SET a TO 1
    SET b TO 2
    WHILE b <= x
        SWITCH
            CASE (x MOD b = 0) AND (is_prime(b)):
                IF a < b
                    SET a TO b
        END SWITCH
        SET b TO b + 1
    RETURN a
END FUNCTION
```