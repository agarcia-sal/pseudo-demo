```
FUNCTION fibfib(unused_param)
    SWITCH unused_param
        CASE 0:
        CASE 1:
            RETURN 0
        CASE 2:
            RETURN 1
        DEFAULT:
            DEFINE stack_list = [unused_param]
            DEFINE result_map = {}
            WHILE LENGTH(stack_list) > 0
                DEFINE current_index = stack_list[-1]
                IF current_index IN result_map
                    REMOVE_LAST(stack_list)
                    CONTINUE
                ELSEIF current_index == 0 OR current_index == 1
                    result_map[current_index] = 0
                    REMOVE_LAST(stack_list)
                ELSEIF current_index == 2
                    result_map[current_index] = 1
                    REMOVE_LAST(stack_list)
                ELSEIF (current_index-1) IN result_map AND (current_index-2) IN result_map AND (current_index-3) IN result_map
                    result_map[current_index] = result_map[current_index - 1] + result_map[current_index - 2] + result_map[current_index - 3]
                    REMOVE_LAST(stack_list)
                ELSE
                    FOR index_var IN [current_index - 1, current_index - 2, current_index - 3]
                        IF index_var NOT IN result_map
                            APPEND(stack_list, index_var)
                    END FOR
                END IF
            END WHILE
            RETURN result_map[unused_param]
    END SWITCH
END FUNCTION
```