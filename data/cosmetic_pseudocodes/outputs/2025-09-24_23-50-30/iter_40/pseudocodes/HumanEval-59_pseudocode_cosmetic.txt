```
FUNCTION largest_prime_factor(x)
    FUNCTION is_prime(y)
        IF NOT (y >= 2) THEN 
            RETURN False
        SET m TO 2
        WHILE m < y DO
            IF ((y MOD m) = 0) THEN
                RETURN False
            SET m TO m + 1
        RETURN True
    END FUNCTION

    SET a TO 1
    SET b TO 2
    WHILE b <= x DO
        IF ((x MOD b) = 0) THEN
            SWITCH is_prime(b)
                CASE True:
                    IF b > a THEN
                        SET a TO b
        SET b TO b + 1
    RETURN a
END FUNCTION
```