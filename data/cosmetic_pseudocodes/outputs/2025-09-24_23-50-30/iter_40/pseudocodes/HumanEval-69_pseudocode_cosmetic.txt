```
FUNCTION search(list_of_integers)
    SET count_map TO array_filled_with(0, maximum_value_in(list_of_integers) + 1)
    FOR number IN list_of_integers DO
        LET temp_idx = number
        LET temp_val = count_map[temp_idx] + 1
        count_map[temp_idx] = temp_val
    END FOR

    LET result = -1
    LET i = 1
    WHILE i < LENGTH(count_map) DO
        LET cond = count_map[i] >= i
        IF cond THEN
            result = i
        END IF
        i = i + 1
    END WHILE

    RETURN result
END FUNCTION
```