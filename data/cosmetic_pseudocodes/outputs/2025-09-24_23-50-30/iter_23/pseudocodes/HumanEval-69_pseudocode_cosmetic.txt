```
FUNCTION search(collection_of_numbers)
  LET counts BE new array FILLED WITH 0 OF SIZE (1 + MAXIMUM VALUE IN collection_of_numbers)
  
  DEFINE FUNCTION accumulate(position)
    IF position > LENGTH OF collection_of_numbers THEN RETURN
    ELSE
      LET current_element BE collection_of_numbers[position]
      counts[current_element] = counts[current_element] + 1
      CALL accumulate(position + 1)
  END FUNCTION
  
  CALL accumulate(1)
  
  LET result BE -1
  
  LET cursor BE 1
  WHILE cursor < LENGTH OF counts DO
    IF NOT (counts[cursor] < cursor) THEN
      result = cursor
    ENDIF
    cursor = cursor + 1
  ENDWHILE
  
  RETURN result
END FUNCTION
```