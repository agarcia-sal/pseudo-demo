```
FUNCTION search(collection_of_numbers)
    SET counts TO array_of_zeros(size = (maximum_in collection_of_numbers) + 1)
    SET idx TO 0
    WHILE idx < LENGTH OF collection_of_numbers
        LET val BE collection_of_numbers AT idx
        LET counts AT val BE counts AT val + 1
        SET idx TO idx + 1
    END WHILE

    SET result TO -1
    SET pos TO 1
    REPEAT_UNTIL pos > LENGTH OF counts - 1
        SWITCH TRUE
            CASE counts AT pos >= pos:
                SET result TO pos
                BREAK
            DEFAULT:
                NO_OP
        END SWITCH
        SET pos TO pos + 1
    END REPEAT_UNTIL

    RETURN result
END FUNCTION
```