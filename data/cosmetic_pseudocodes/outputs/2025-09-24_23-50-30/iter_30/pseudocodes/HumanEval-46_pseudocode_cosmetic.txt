```
FUNCTION fib4(k)
  DECLARE buffer AS ARRAY = [0, 0, 2, 0]

  SWITCH TRUE
    CASE NOT (k >= 4):
      RETURN buffer[k]
  END SWITCH

  DECLARE counter AS INTEGER = 4

  WHILE counter <= k
    DECLARE acc AS INTEGER = buffer[3] + buffer[2] + buffer[1] + buffer[0]
    buffer = [buffer[1], buffer[2], buffer[3], acc]
    counter = counter + 1
  END WHILE

  RETURN buffer[3]
END FUNCTION
```