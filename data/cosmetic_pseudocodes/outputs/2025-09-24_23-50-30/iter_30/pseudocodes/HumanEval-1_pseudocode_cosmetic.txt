```
FUNCTION separate_paren_groups(parentheses_seq)
  DECLARE results ARRAY = []
  DECLARE buffer ARRAY = []
  DECLARE depth_counter INTEGER = 0
  
  DECLARE FUNCTION process_index(idx INTEGER)
    IF idx >= LENGTH(parentheses_seq) THEN
      RETURN
    END IF
    DECLARE ch CHARACTER = parentheses_seq[idx]
    SELECT ch
      CASE '('
        depth_counter ← depth_counter + 1
        APPEND ch TO buffer
      CASE ')'
        depth_counter ← depth_counter - 1
        APPEND ch TO buffer
        IF NOT(depth_counter ≠ 0) THEN
          APPEND JOIN(buffer) TO results
          CLEAR buffer
        END IF
    END SELECT
    process_index(idx + 1)
  END FUNCTION
  
  process_index(0)
  RETURN results
END FUNCTION
```