```
FUNCTION parse_music(music_string)
    LET durations_by_note BE A MAP FROM STRING TO INTEGER
    durations_by_note['o'] := 4
    durations_by_note['o|'] := 2
    durations_by_note['.|'] := 1

    LET tokens BE ARRAY OF STRING := SPLIT(music_string, " ")
    LET result_list BE EMPTY ARRAY OF INTEGER

    FOR index FROM 0 TO LENGTH(tokens) - 1 DO
        LET current_token BE tokens[index]
        IF current_token != "" THEN
            APPEND durations_by_note[current_token] TO result_list
        ENDIF
    ENDFOR

    RETURN result_list
END FUNCTION
```