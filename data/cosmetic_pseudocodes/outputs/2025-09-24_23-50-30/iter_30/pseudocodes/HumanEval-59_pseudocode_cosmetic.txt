```
FUNCTION largest_prime_factor(x)
  FUNCTION is_prime_number(y)
    SWITCH
      CASE y < 2: RETURN False
    END SWITCH
    SET m = 2
    WHILE NOT (m >= y)
      SWITCH
        CASE (y MOD m) = 0: RETURN False
      END SWITCH
      SET m = m + 1
    END WHILE
    RETURN True
  END FUNCTION

  SET candidate = 1
  SET index = 2
  WHILE index <= x
    IF (x MOD index = 0) THEN
      SELECT
        CASE is_prime_number(index) = True:
          IF candidate < index THEN candidate = index END IF
      END SELECT
    END IF
    SET index = index + 1
  END WHILE
  RETURN candidate
END FUNCTION
```