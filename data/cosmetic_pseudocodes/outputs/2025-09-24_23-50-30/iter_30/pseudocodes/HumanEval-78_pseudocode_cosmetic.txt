```
FUNCTION hex_key(input_str)
    SET prime_chars TO {'B', '2', 'D', '7', '3', '5'}
    DEFINE count_primes(pos, acc)
        SWITCH pos >= LENGTH(input_str)
            CASE TRUE:
                RETURN acc
            CASE FALSE:
                SELECT WHEN input_str[pos] IN prime_chars THEN
                    RETURN count_primes(pos + 1, acc + 1)
                ELSE
                    RETURN count_primes(pos + 1, acc)
    END DEFINE
    RETURN count_primes(0, 0)
END FUNCTION
```