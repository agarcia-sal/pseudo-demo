FUNCTION median(list_input)
    SET sorted_collection TO list_input AS ARRAY
    SET sorted_collection TO sorted_collection SORTED IN ASCENDING ORDER

    SET size TO LENGTH OF sorted_collection
    SWITCH (size MOD 2)
        CASE 0:
            SET half_idx TO size / 2
            RETURN (sorted_collection[half_idx - 1] + sorted_collection[half_idx]) / 2.0
        CASE 1:
            RETURN sorted_collection[(size - 1) / 2]
    END SWITCH
END FUNCTION