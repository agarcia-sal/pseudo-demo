```
FUNCTION rolling_max(sequence)
    SET current_peak TO null
    SET output_sequence TO []

    DEFINE helper(index)
        IF index = LENGTH(sequence)
            RETURN
        END IF
        SELECT TRUE
            CASE current_peak IS null:
                SET current_peak TO sequence[index]
            CASE ELSE:
                SET current_peak TO (current_peak + sequence[index] + ABS(current_peak - sequence[index])) / 2
        END SELECT
        APPEND current_peak TO output_sequence
        CALL helper(index + 1)
    END DEFINE

    CALL helper(0)
    RETURN output_sequence
END FUNCTION
```