```
FUNCTION search(list_of_integers)
    SET frequency_map TO ARRAY FILLED WITH 0 OF SIZE (1 + MAXIMUM_ELEMENT_OF(list_of_integers))
    PROCEDURE tally_frequencies(idx)
        IF idx EQUALS LENGTH_OF(list_of_integers)
            RETURN
        frequency_map[ list_of_integers[idx] ] ← frequency_map[ list_of_integers[idx] ] + 1
        CALL tally_frequencies(idx + 1)
    CALL tally_frequencies(0)
    SET outcome TO -1
    SET current ← LENGTH_OF(frequency_map) - 1
    WHILE current > 0
        IF NOT (frequency_map[current] < current)
            outcome ← current
        current ← current - 1
    RETURN outcome
END FUNCTION
```