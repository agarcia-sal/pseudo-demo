```
FUNCTION median(x1)
    FUNCTION x2(x3, x4)
        IF x4 = x3 THEN RETURN [] ELSE
            RETURN [x3[0]] + (x2(SUBLIST(x3, 1, LENGTH(x3)-1), x4))
    END FUNCTION

    ASSIGN x5 ← x2(SORTED(x1), LENGTH(x1))
    ASSIGN x6 ← LENGTH(x5)
    SWITCH TRUE
        CASE NOT (x6 MOD 2 = 0):
            RETURN x5[(x6 DIV 2)]
        CASE ELSE:
            ASSIGN x7 ← (x5[(x6 DIV 2)-1]) + (x5[(x6 DIV 2)])
            RETURN x7 / 2.0
    END SWITCH
END FUNCTION
```