```
FUNCTION parse_music(u)
    SET v TO DICTIONARY MAPPING 'o' TO 4, 'o|' TO 2, '.|' TO 1
    SET w TO []
    DEFINE FUNCTION x(z, y)
        IF z â‰  '' THEN APPEND v[z] TO y
        RETURN y
    END FUNCTION
    RETURN FOLD x OVER SPLIT u BY ' ' STARTING WITH w
END FUNCTION
```