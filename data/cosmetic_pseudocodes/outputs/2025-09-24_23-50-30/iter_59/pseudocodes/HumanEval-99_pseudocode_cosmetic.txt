```
FUNCTION closest_integer(x1)
    IMPORT floor, ceil FROM math

    FUNCTION a2(z8)
        IF COUNT OF '.' IN z8 = 1 THEN
            REPEAT
                IF z8[-1] = '0' THEN
                    SET z8 TO SUBSTRING z8 FROM 0 TO LENGTH(z8) - 1
                ELSE
                    BREAK
                END IF
            UNTIL FALSE
        END IF
        RETURN z8
    END FUNCTION

    SET x7 TO a2(x1)
    SET x3 TO FLOAT(x7)

    SWITCH TRUE
        CASE SUBSTRING(x7, LENGTH(x7) - 1, LENGTH(x7)) = '.5':
            IF x3 > 0 THEN
                SET x9 TO ceil(x3)
            ELSE
                SET x9 TO floor(x3)
            END IF
        CASE LENGTH(x7) > 0:
            SET x9 TO ROUND(x3)
        DEFAULT:
            SET x9 TO 0
    END SWITCH

    RETURN x9
END FUNCTION
```