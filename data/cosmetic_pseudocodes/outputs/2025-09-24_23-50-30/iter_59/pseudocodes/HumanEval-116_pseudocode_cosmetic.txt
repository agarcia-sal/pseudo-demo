```
FUNCTION sort_array(a)
    FUNCTION count_ones(s)
        SET c TO 0
        SET i TO 0
        WHILE i < LENGTH(s) DO
            SWITCH s[i]
                CASE '1':
                    SET c TO c + 1
                DEFAULT:
                    NOP
            END SWITCH
            SET i TO i + 1
        END WHILE
        RETURN c
    END FUNCTION

    FUNCTION by_ones(x, y)
        SET px TO count_ones(TO_BINARY_STRING(x))
        SET py TO count_ones(TO_BINARY_STRING(y))
        IF px < py THEN
            RETURN -1
        ELSE IF px > py THEN
            RETURN 1
        ELSE
            IF x < y THEN
                RETURN -1
            ELSE IF x > y THEN
                RETURN 1
            ELSE
                RETURN 0
            END IF
        END IF
    END FUNCTION

    SET b TO COPY_LIST(a)
    SET i TO 0
    WHILE i < LENGTH(b) - 1 DO
        SET j TO 0
        WHILE j < LENGTH(b) - i - 1 DO
            IF by_ones(b[j], b[j + 1]) > 0 THEN
                SET temp TO b[j]
                SET b[j] TO b[j + 1]
                SET b[j + 1] TO temp
            END IF
            SET j TO j + 1
        END WHILE
        SET i TO i + 1
    END WHILE

    RETURN b
END FUNCTION
```