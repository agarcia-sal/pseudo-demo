```
FUNCTION largest_prime_factor(a0)
    FUNCTION is_prime(a1)
        SWITCH
            CASE NOT (a1 >= 2):
                RETURN False
            CASE ELSE:
                SET a2 TO 2
                LABEL_LOOP:
                WHILE a2 <= a1 - 1 DO
                    SWITCH
                        CASE (a1 MOD a2) = 0:
                            RETURN False
                        CASE ELSE:
                            SET a2 TO a2 + 1
                    END SWITCH
                END WHILE
                RETURN True
        END SWITCH
    END FUNCTION

    SET a3 TO 1
    SET a4 TO 2

    LABEL_OUTER:
    WHILE a4 <= a0 DO
        SELECT CASE TRUE
            CASE NOT ((a0 MOD a4) <> 0 OR NOT is_prime(a4)):
                SET a3 TO CASE WHEN a3 > a4 THEN a3 ELSE a4 END
            CASE ELSE:
                NOOP
        END SELECT
        SET a4 TO a4 + 1
    END WHILE

    RETURN a3
END FUNCTION
```