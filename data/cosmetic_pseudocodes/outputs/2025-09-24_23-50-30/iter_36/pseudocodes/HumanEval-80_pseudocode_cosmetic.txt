```
FUNCTION is_happy(tokens)
  IF NOT (3 <= LENGTH(tokens)) THEN
    RETURN false
  END IF
  PROCEDURE check_triplet(pos)
    IF pos > LENGTH(tokens) - 3 THEN
      RETURN true
    END IF
    LET first = tokens[pos]
    LET second = tokens[pos + 1]
    LET third = tokens[pos + 2]
    IF (first = second) OR (second = third) OR (first = third) THEN
      RETURN false
    ELSE
      RETURN check_triplet(pos + 1)
    END IF
  END PROCEDURE
  RETURN check_triplet(1)
END FUNCTION
```