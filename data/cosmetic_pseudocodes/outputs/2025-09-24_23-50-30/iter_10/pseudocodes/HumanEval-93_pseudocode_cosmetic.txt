```
FUNCTION encode(input)
  LET symbols:STRING = ""
  FOR EACH char IN input
    LET flipped:CHAR = (char >= 'a' AND char <= 'z') ? TO_UPPER(char) : TO_LOWER(char)
    LET ascii_code:INTEGER = TO_ASCII(flipped)
    LET is_vowel:BOOLEAN = false
    FOR EACH v IN ['a','e','i','o','u','A','E','I','O','U']
      IF flipped == v THEN is_vowel = true BREAK
    END FOR
    LET transformed:CHAR = IF is_vowel THEN TO_CHAR(ascii_code + 2) ELSE flipped ENDIF
    symbols = CONCAT(symbols, transformed)
  END FOR
  RETURN symbols
END FUNCTION
```