```
FUNCTION search(array)
  LET counts BE a list of zeros with length (maximum of array plus 1)
  LET probe_index BE 0
  WHILE probe_index LESS THAN LENGTH counts DO
    LET element_index BE 0
    WHILE element_index LESS THAN LENGTH array DO
      IF array[element_index] EQUALS probe_index THEN
        counts[probe_index] <- counts[probe_index] + 1
      END IF
      element_index <- element_index + 1
    END WHILE
    probe_index <- probe_index + 1
  END WHILE
  LET result_marker BE -1
  FOR marker IN 1 TO (LENGTH counts) - 1 DO
    IF counts[marker] >= marker THEN
      result_marker <- marker
    END IF
  END FOR
  RETURN result_marker
END FUNCTION
```