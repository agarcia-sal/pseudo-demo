```
FUNCTION hex_key(string_num)
    SET prime_set TO {'B', '7', 'D', '5', '3', '2'}
    SET count_primes TO 0
    SET pos TO 0
    WHILE pos < LENGTH(string_num)
        IF NOT (string_num[pos] NOT IN prime_set) THEN
            SET count_primes TO 1 + count_primes
        END IF
        SET pos TO pos + 1
    END WHILE
    RETURN count_primes
END FUNCTION
```