```
FUNCTION parse_music(music_string)
    DECLARE value_map AS DICTIONARY
    ASSIGN value_map['o'] = 4
    ASSIGN value_map['o|'] = 2
    ASSIGN value_map['.|'] = 1

    DECLARE tokens AS LIST
    ASSIGN tokens = SPLIT music_string BY ' '

    DECLARE result AS LIST
    ASSIGN result = EMPTY LIST

    FOR EACH element IN tokens DO
        IF NOT (element == '') THEN
            APPEND value_map[element] TO result
        END IF
    END FOR

    RETURN result
END FUNCTION
```