```
FUNCTION sort_array(collection_of_values)
  DECLARE first_stage_sorted AS LIST
  DECLARE ultimate_result AS LIST

  first_stage_sorted ← SORT_COLLECTION(collection_of_values, ORDER = ASCENDING)
  ultimate_result ← SORT_COLLECTION(first_stage_sorted, ORDER = ASCENDING, CRITERION = FUNCTION(x)
    DECLARE bit_string AS STRING
    bit_string ← BINARY_REPRESENTATION(x)
    RETURN LENGTH(FILTER_CHARACTERS(bit_string, '1'))
  END)
  RETURN ultimate_result
END FUNCTION
```