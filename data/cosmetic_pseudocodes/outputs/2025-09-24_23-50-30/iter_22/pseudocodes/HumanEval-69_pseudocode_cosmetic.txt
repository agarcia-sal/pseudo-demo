```
FUNCTION search(numbers)
    INITIALIZE counts AS an array filled with zeroes sized (max_element_in numbers + 1)
    DEFINE i AS 0
    LOOP WHILE i < LENGTH(numbers)
        SET current_val TO numbers[i]
        SET counts[current_val] TO counts[current_val] + 1
        INCREMENT i BY 1
    INITIALIZE result TO -1
    SET j TO 1
    WHILE j < LENGTH(counts)
        IF counts[j] >= j THEN
            SET result TO j
        INCREMENT j BY 1
    RETURN result
END FUNCTION
```