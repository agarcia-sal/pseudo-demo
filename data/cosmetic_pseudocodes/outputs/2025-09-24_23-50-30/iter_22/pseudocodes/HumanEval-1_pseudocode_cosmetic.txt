```
FUNCTION separate_paren_groups(string_of_parentheses)
    DEFINE FUNCTION process_chars(chars, depth, acc_string, acc_results, pos)
        IF pos EQUALS LENGTH(chars)
            RETURN acc_results
        END IF

        DEFINE current_char AS chars[pos]

        IF current_char IS '(' THEN
            RETURN process_chars(chars, depth + 1, acc_string + current_char, acc_results, pos + 1)
        ELSE IF current_char IS ')'
            SET new_depth TO depth - 1
            SET new_acc_string TO acc_string + current_char

            IF new_depth EQUALS 0 THEN
                RETURN process_chars(chars, new_depth, "", acc_results + [new_acc_string], pos + 1)
            ELSE
                RETURN process_chars(chars, new_depth, new_acc_string, acc_results, pos + 1)
            END IF
        ELSE
            RETURN process_chars(chars, depth, acc_string, acc_results, pos + 1)
        END IF
    END FUNCTION

    RETURN process_chars(CONVERT_TO_LIST(string_of_parentheses), 0, "", [], 0)
END FUNCTION
```