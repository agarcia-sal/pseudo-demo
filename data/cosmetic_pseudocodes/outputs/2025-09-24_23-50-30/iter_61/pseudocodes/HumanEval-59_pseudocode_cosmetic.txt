```
FUNCTION largest_prime_factor(x)
	FUNCTION is_prime(y)
		IF NOT (y GREATER_OR_EQUALS 2)
			RETURN False
		SET m TO 2
		WHILE (m LESS_THAN y)
			IF ((y MODULO m) EQUALS 0)
				RETURN False
			SET m TO m PLUS 1
		END WHILE
		RETURN True
	END FUNCTION

	SET r TO 1
	SET z TO 2

	WHILE z LESS_OR_EQUALS x 
		SWITCH (x MODULO z EQUALS 0, is_prime(z))
			CASE (True, True):
				IF r LESS_THAN z
					SET r TO z
		SET z TO z PLUS 1
	END WHILE

	RETURN r
END FUNCTION
```