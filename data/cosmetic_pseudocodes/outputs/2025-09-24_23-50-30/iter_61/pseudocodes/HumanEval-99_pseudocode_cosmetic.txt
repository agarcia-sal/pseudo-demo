```
FUNCTION closest_integer(u)
	IMPORT floor, ceil FROM math

	FUNCTION truncate_zeroes(v, w)
		SWITCH TRUE
			CASE w <= 0: RETURN v
			CASE v[w] != '0': RETURN v
			DEFAULT: RETURN truncate_zeroes(v[0 TO w-1], w - 1)
		END SWITCH
	END FUNCTION

	SWITCH (u.CONTAINS('.'))
		CASE NOT TRUE: ASSIGN v = u
		DEFAULT: ASSIGN v = truncate_zeroes(u, u.LENGTH - 1)
	END SWITCH

	ASSIGN n = FLOAT(v)
	SWITCH TRUE
		CASE v.ENDS_WITH('.5'):
			SWITCH n > 0
				CASE TRUE: ASSIGN r = ceil(n)
				DEFAULT: ASSIGN r = floor(n)
			END SWITCH
		CASE v.LENGTH > 0: ASSIGN r = round(n)
		DEFAULT: ASSIGN r = 0
	END SWITCH

	RETURN r
END FUNCTION
```