```
FUNCTION search(list_of_integers)
    SET counts TO array_filled_with_value(0, length_of(array_from(map(lambda x: x, list_of_integers))) + 1)
    DEFINE increment_frequency(position, arr) =
        arr[position] <- arr[position] + 1
    FOR element IN list_of_integers DO
        increment_frequency(element, counts)
    END FOR
    SET result TO -1
    SET idx TO 1
    WHILE idx < length_of(counts) DO
        IF NOT (counts[idx] < idx) THEN
            result <- idx
        END IF
        idx <- idx + 1
    END WHILE
    RETURN result
END FUNCTION
```