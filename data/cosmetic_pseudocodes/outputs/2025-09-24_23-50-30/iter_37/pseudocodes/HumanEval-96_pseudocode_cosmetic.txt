```
FUNCTION count_up_to(p)
    SET result TO []
    SET k TO 2
    WHILE k < p
        SET prime_flag TO true
        SET m TO 2
        WHILE m < k AND prime_flag
            IF (k MOD m) = 0 THEN
                SET prime_flag TO false
            ELSE
                SET m TO m + 1
            END IF
        END WHILE
        IF prime_flag = true THEN
            APPEND k TO result
        END IF
        SET k TO k + 1
    END WHILE
    RETURN result
END FUNCTION
```