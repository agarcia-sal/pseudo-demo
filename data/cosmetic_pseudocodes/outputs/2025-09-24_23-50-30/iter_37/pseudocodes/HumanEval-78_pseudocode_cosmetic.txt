```
FUNCTION hex_key(string_num)
    SET prime_chars TO ['2', '3', '5', '7', 'B', 'D']
    SET count_to RETURN 0
    DEFINE FUNCTION count_primes_at(pos)
        RETURN (pos >= LENGTH(string_num)) 
            ? 0 
            : (string_num[pos] IN prime_chars ? 1 : 0) + count_primes_at(pos + 1)
    END FUNCTION
    RETURN count_primes_at(0)
END FUNCTION
```