```
FUNCTION parse_music(music_string)
    LET index_map BE MAP FROM ['o', 'o|', '.|'] TO [4, 2, 1]
    LET tokens BE FILTERED LIST BY (y -> LENGTH(y) > 0) OF SPLIT music_string BY " "
    LET result_list BE []
    FOR EACH x IN tokens DO
        APPEND index_map[x] TO result_list
    END FOR
    RETURN result_list
END FUNCTION
```