```
FUNCTION separate_paren_groups(string_of_parentheses)
    SET collected_segments TO []
    SET segment_accumulator TO []
    SET depth_counter TO 0

    SET index_tracker TO 0
    WHILE index_tracker < LENGTH(string_of_parentheses) DO
        SET current_element TO string_of_parentheses[index_tracker]

        SWITCH current_element
            CASE '('
                SET depth_counter TO depth_counter + 1
                APPEND current_element TO segment_accumulator
            CASE ')'
                SET depth_counter TO depth_counter - 1
                APPEND current_element TO segment_accumulator

                IF depth_counter == 0 THEN
                    SET joined_segment TO ""
                    FOR iterator FROM 0 TO LENGTH(segment_accumulator) - 1 DO
                        SET joined_segment TO joined_segment + segment_accumulator[iterator]
                    END FOR
                    APPEND joined_segment TO collected_segments
                    SET segment_accumulator TO []
                END IF
            DEFAULT
                NOOP
        END SWITCH

        SET index_tracker TO index_tracker + 1
    END WHILE

    RETURN collected_segments
END FUNCTION
```