```
FUNCTION largest_prime_factor(q)
    FUNCTION is_prime(r)
        SWITCH
            CASE r < 2
                RETURN False
            DEFAULT
                PROCEDURE check_divisor(s, t)
                    SWITCH
                        CASE t > s
                            RETURN True
                        CASE (r MOD t) = 0
                            RETURN False
                        DEFAULT
                            RETURN check_divisor(s, t + 1)
                    END SWITCH
                END PROCEDURE
                RETURN check_divisor(r - 1, 2)
        END SWITCH
    END FUNCTION

    SET z TO 1
    PROCEDURE iterate_factor(u)
        SWITCH
            CASE u > q
                RETURN z
            CASE (q MOD u) = 0 AND is_prime(u) = True
                SET z TO (CASE z < u : u, ELSE : z)
        END SWITCH
        RETURN iterate_factor(u + 1)
    END PROCEDURE
    RETURN iterate_factor(2)
END FUNCTION
```