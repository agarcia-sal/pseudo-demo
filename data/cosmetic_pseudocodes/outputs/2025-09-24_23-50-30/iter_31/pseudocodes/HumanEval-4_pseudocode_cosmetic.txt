```
FUNCTION mean_absolute_deviation(omega)
    SET alpha TO LENGTH OF omega
    SET rho TO (REDUCE (lambda phi, psi: phi + psi) OVER omega) DIVIDED BY alpha
    DEFINE flatten(theta, i):
        RETURN theta + ABS(i - rho)
    SET sigma TO (REDUCE flatten OVER omega WITH INITIAL 0) DIVIDED BY alpha
    RETURN sigma
END FUNCTION
```