```
FUNCTION fib4(integer_n)
  DECLARE values AS LIST = [0,0,2,0]

  WHEN
    integer_n < 4 -> RETURN values[integer_n]
    OTHERWISE   -> DO
      DEFINE PROCEDURE loop(counter)
        IF counter > integer_n THEN
          RETURN
        ELSE
          LET new_element = values[3] + values[2] + values[1] + values[0]
          REMOVE values[0]
          APPEND new_element TO values
          CALL loop(counter + 1)
        END IF
      END PROCEDURE

      CALL loop(4)
      RETURN values[3]
    END
END FUNCTION
```