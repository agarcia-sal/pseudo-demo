```
FUNCTION parse_music(music_string)
  SET duration_dict TO MAP
  INSERT KEY 'o' WITH VALUE 4 INTO duration_dict
  INSERT KEY 'o|' WITH VALUE 2 INTO duration_dict
  INSERT KEY '.|' WITH VALUE 1 INTO duration_dict

  SET segments TO []
  FOR each_token IN SPLIT(music_string, " ")
    IF LENGTH(each_token) > 0 THEN
      ADD duration_dict[each_token] TO segments
    END IF
  END FOR

  RETURN segments
END FUNCTION
```