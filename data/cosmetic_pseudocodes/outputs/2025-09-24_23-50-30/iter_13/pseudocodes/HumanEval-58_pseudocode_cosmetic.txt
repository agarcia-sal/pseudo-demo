```
FUNCTION common(list1, list2)
    DECLARE collected_elements AS map WITH default false
    DECLARE intersected AS list INIT empty
    FOR index_a FROM 0 TO LENGTH(list1) - 1 DO
        DECLARE item_a AS list1[index_a]
        FOR index_b FROM 0 TO LENGTH(list2) - 1 DO
            IF NOT collected_elements[item_a] THEN
                IF item_a = list2[index_b] THEN
                    collected_elements[item_a] := true
                    APPEND item_a TO intersected
                END IF
            END IF
        END FOR
    END FOR
    RETURN sorted(intersected)
END FUNCTION
```