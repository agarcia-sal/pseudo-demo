```
FUNCTION search(list_of_integers)
    DEFINE max_val AS MAXIMUM OF list_of_integers
    INITIALIZE counts AS DICTIONARY WITH KEYS FROM 0 TO max_val AND VALUES 0
    FOR element IN list_of_integers DO
        counts[element] := counts[element] + 1
    END FOR
    LET result = -1
    LET keys = SORTED LIST OF KEYS IN counts WHERE KEY > 0
    FOR key IN keys DO
        IF counts[key] >= key THEN
            result := key
        END IF
    END FOR
    RETURN result
END FUNCTION
```