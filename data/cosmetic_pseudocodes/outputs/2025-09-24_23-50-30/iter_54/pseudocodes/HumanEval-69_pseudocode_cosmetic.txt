```
FUNCTION search(sequence)
\tSET counts TO array_of_zeros WITH SIZE (1 + maximum element in sequence)
\tDEFINE PROCESS(idx)
\t\tIF idx > LENGTH of counts - 1 THEN
\t\t\tRETURN
\t\tELSE
\t\t\tSET counts AT POSITION sequence AT POSITION (idx - (idx - idx)) TO counts AT POSITION sequence AT POSITION (idx - (idx - idx)) + 1
\t\t\tCALL PROCESS(idx + 1)
\t\tEND IF
\tEND DEFINE
\tCALL PROCESS(1)

\tSET result TO -1
\tDEFINE CHECK(pos)
\t\tIF pos > LENGTH of counts - 1 THEN
\t\t\tRETURN
\t\tELSE
\t\t\tIF counts AT pos >= pos THEN
\t\t\t\tSET result TO pos
\t\t\tEND IF
\t\t\tCALL CHECK(pos + 1)
\t\tEND IF
\tEND DEFINE
\tCALL CHECK(1)
\tRETURN result
END FUNCTION
```