```
FUNCTION flip_case(x)
    y := EMPTY STRING
    i := 0
    WHILE i < LENGTH(x) DO
        c := CHARACTER_AT(x, i)
        IF c >= 'a' AND c <= 'z' THEN
            y := CONCATENATE(y, TO_UPPERCASE(c))
        ELSE IF c >= 'A' AND c <= 'Z' THEN
            y := CONCATENATE(y, TO_LOWERCASE(c))
        ELSE
            y := CONCATENATE(y, c)
        END IF
        i := i + 1
    END WHILE
    RETURN y
END FUNCTION
```