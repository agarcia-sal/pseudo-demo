```
FUNCTION encode(inputMessage)
  SET vowelSet TO "AEIOUaeiou"
  SET substitutionMap TO EMPTY DICTIONARY
  FOR EACH character IN vowelSet
    SET substitutionMap[character] TO CHARACTER WITH ASCII VALUE (ASCII VALUE OF character + 2)
  END FOR

  SET swappedCaseMessage TO EMPTY STRING
  FOR EACH symbol IN inputMessage
    IF symbol IS UPPERCASE LETTER
      SET swappedCaseMessage TO swappedCaseMessage + TO LOWERCASE(symbol)
    ELSE IF symbol IS LOWERCASE LETTER
      SET swappedCaseMessage TO swappedCaseMessage + TO UPPERCASE(symbol)
    ELSE
      SET swappedCaseMessage TO swappedCaseMessage + symbol
    END IF
  END FOR

  SET finalCharacters TO EMPTY LIST
  FOR EACH elem IN swappedCaseMessage
    IF elem IS IN vowelSet
      APPEND substitutionMap[elem] TO finalCharacters
    ELSE
      APPEND elem TO finalCharacters
    END IF
  END FOR

  RETURN CONCATENATE(finalCharacters)
END FUNCTION
```