```
FUNCTION separate_paren_groups(string_of_parentheses)
    SET results TO []
    SET buffer TO []
    SET depth_counter TO 0

    DEFINE PROCESS(index)
        IF index >= LENGTH(string_of_parentheses) THEN
            RETURN
        END IF

        LET ch = string_of_parentheses[index]
        IF ch = '(' THEN
            depth_counter = depth_counter + 1
            APPEND ch TO buffer
            PROCESS(index + 1)
        ELSE IF ch = ')' THEN
            depth_counter = depth_counter - 1
            APPEND ch TO buffer
            IF depth_counter = 0 THEN
                APPEND CONCAT(buffer) TO results
                buffer = []
                PROCESS(index + 1)
            ELSE
                PROCESS(index + 1)
            END IF
        ELSE
            PROCESS(index + 1)
        END IF
    END DEFINE

    PROCESS(0)
    RETURN results
END FUNCTION
```