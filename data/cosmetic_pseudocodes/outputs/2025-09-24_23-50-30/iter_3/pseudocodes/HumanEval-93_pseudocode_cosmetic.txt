```
FUNCTION encode(message)
    DECLARE vowels_str = "aeiouAEIOU"
    DECLARE transformed_map = EMPTY DICTIONARY
    FOR idx FROM 1 TO LENGTH(vowels_str) DO
        LET ch = vowels_str[idx]
        LET transformed_map[ch] = CHAR(ASCII(ch) + 2)
    END FOR
    LET toggled = ""
    FOR ch IN message DO
        IF ch IS UPPERCASE THEN
            toggled = toggled + TO_LOWERCASE(ch)
        ELSE
            toggled = toggled + TO_UPPERCASE(ch)
        END IF
    END FOR
    DECLARE result = ""
    FOR character_index FROM 1 TO LENGTH(toggled) DO
        LET current_char = toggled[character_index]
        IF current_char IN transformed_map THEN
            result = result + transformed_map[current_char]
        ELSE
            result = result + current_char
        END IF
    END FOR
    RETURN result
END FUNCTION
```