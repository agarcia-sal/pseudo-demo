```
FUNCTION search(list_of_integers)
    LET max_num = 0
    FOR i FROM 0 TO LENGTH(list_of_integers) - 1
        IF list_of_integers[i] > max_num THEN max_num = list_of_integers[i]
    LET freq = ARRAY OF SIZE (max_num + 1) FILLED WITH 0
    FOR val IN list_of_integers
        freq[val] = freq[val] + 1
    LET result = -1
    FOR position = LENGTH(freq) - 1 DOWNTO 1
        IF freq[position] >= position THEN
            result = position
            BREAK
    RETURN result
END FUNCTION
```