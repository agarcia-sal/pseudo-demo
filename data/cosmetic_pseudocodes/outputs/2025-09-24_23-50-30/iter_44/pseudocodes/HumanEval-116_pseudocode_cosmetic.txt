```
FUNCTION sort_array(collection_of_ints)
    FUNCTION count_ones(bitstring, index, acc)
        IF index >= LENGTH(bitstring) THEN
            RETURN acc
        ELSE
            RETURN count_ones(bitstring, index + 1, acc + IF bitstring[index] == '1' THEN 1 ELSE 0)
        END IF
    END FUNCTION

    FUNCTION ones_in_binary(number)
        DECLARE bin_repr = STRING(number, base=2)
        RETURN count_ones(bin_repr, 2, 0)
    END FUNCTION

    DECLARE intermediate_sorted = SORT(collection_of_ints, BY element -> element)
    DECLARE result_array = SORT(intermediate_sorted, BY element -> ones_in_binary(element))
    RETURN result_array
END FUNCTION
```