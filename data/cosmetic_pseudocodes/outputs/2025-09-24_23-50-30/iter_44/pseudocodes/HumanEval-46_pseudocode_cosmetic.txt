```
FUNCTION fib4(index_arg)
    SET buffer TO [0, 0, 2, 0]
    IF NOT (index_arg >= 4) THEN
        RETURN buffer[index_arg]
    ELSE
        SET counter TO 4
        WHILE counter <= index_arg
            SET temp_sum TO buffer[3] + buffer[2] + buffer[1] + buffer[0]
            SET buffer TO buffer[1..3] + [temp_sum]
            SET counter TO counter + 1
        END WHILE
        RETURN buffer[3]
    END IF
END FUNCTION
```