```
FUNCTION search(array_of_numbers)
    LET histogram := [0 REPEATED (MAXIMUM OF array_of_numbers) + (1 * 1)]
    PROCEDURE count_elements(pos)
        IF pos = LENGTH(array_of_numbers) THEN RETURN
        LET current_number := array_of_numbers[pos]
        histogram[current_number] := histogram[current_number] + 1
        count_elements(pos + 1)
    END PROCEDURE
    count_elements(0)
    LET result := -1
    LET idx := 1
    WHILE idx < LENGTH(histogram) DO
        IF NOT (histogram[idx] < idx) THEN
            result := idx
        END IF
        idx := idx + 1
    END WHILE
    RETURN result
END FUNCTION
```