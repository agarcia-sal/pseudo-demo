```
FUNCTION search(data_collection)
    SET counts TO array FILLED WITH 0 OF SIZE (1 + MAXIMUM VALUE IN data_collection)
    DEFINE iterator(position)
        IF position > LENGTH OF counts - 1 THEN RETURN
        IF counts[position] >= position THEN SET candidate TO position
        iterator(position + 1)
    END DEFINE

    FOR element IN data_collection
        SET counts[element] TO counts[element] + 1
    END FOR

    SET candidate TO -1
    iterator(1)
    RETURN candidate
END FUNCTION
```