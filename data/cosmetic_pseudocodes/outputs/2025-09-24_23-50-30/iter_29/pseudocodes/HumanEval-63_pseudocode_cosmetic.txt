```
FUNCTION fibfib(scalar_p)
    SWITCH scalar_p
        CASE 0:
        CASE 1:
            RETURN 0
        CASE 2:
            RETURN 1
    END SWITCH

    FUNCTION inner_loop(accu_x, accu_y, accu_z, counter_q)
        IF counter_q EQUALS scalar_p
            RETURN accu_z
        END IF
        RETURN inner_loop(accu_y, accu_z, accu_x + accu_y + accu_z, counter_q + 1)
    END FUNCTION

    RETURN inner_loop(0, 0, 1, 2)
END FUNCTION
```