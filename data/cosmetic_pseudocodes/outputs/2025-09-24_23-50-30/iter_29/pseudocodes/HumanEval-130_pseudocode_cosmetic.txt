```
FUNCTION tri(x)
    MATCH x
        CASE 0:
            RETURN [1]
        DEFAULT:
            LET p = [1, 3]
            LET f = (i, arr) ->
                IF i > x THEN arr
                ELSE
                    LET val = (i % 2 == 0)
                        ? (i / 2 + 1)
                        : (arr[i - 1] + arr[i - 2] + ((i + 3) / 2))
                    f(i + 1, arr + [val])
            RETURN f(2, p)
END FUNCTION
```