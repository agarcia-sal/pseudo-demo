```
FUNCTION search(arr)
      LET freq = [0] * (MAXIMUM(arr) + 1)
      LET res = -1
      FOR i IN RANGE 0 TO LENGTH(arr) - 1 DO
          LET x = arr[i]
          freq[x] = freq[x] + 1
      END FOR
      FOR j IN RANGE 1 TO LENGTH(freq) - 1 DO
            IF NOT (freq[j] < j) THEN res = j END IF
      END FOR
      RETURN res
END FUNCTION
```