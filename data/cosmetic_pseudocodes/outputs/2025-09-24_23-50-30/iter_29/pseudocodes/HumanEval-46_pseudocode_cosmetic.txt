```
FUNCTION fib4(x)
    INITIALIZE seq AS LIST WITH ELEMENTS [0, 0, 2, 0]

    CASE 
        WHEN NOT (x >= 4)  
            RETURN seq[x]
    END CASE

    DEFINE PROCEDURE loop(i)
        IF i > x THEN RETURN seq[-1]
        ELSE
            LET new_val = seq[-1] + seq[-2] + seq[-3] + seq[-4]
            seq.APPEND(new_val)
            seq.REMOVE_AT(0)
            RETURN loop(i + 1)
        END IF
    END PROCEDURE

    RETURN loop(4)
END FUNCTION
```