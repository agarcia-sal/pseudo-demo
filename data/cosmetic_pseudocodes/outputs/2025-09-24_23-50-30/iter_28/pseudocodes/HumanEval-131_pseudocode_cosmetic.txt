```
FUNCTION digits(n)
    FUNCTION accumulate_digits(seq, idx, prod_acc, count_acc)
        IF idx >= LENGTH(seq)
            RETURN (prod_acc, count_acc)
        ELSE
            SET curr_char TO seq[idx]
            SET curr_num TO INTEGER VALUE OF curr_char
            SET is_odd TO (curr_num MOD 2) == 1
            SET new_prod TO (is_odd) ? (prod_acc * curr_num) : prod_acc
            SET new_count TO (is_odd) ? (count_acc + 1) : count_acc
            RETURN accumulate_digits(seq, idx + 1, new_prod, new_count)
        END IF
    END FUNCTION

    SET str_digits TO CONCATENATE("") OVER [c FOR c IN STRING REPRESENTATION OF n]
    SET (final_product, total_odds) TO accumulate_digits(str_digits, 0, 1, 0)

    SWITCH (total_odds == 0)
        CASE TRUE:
            RETURN 0
        DEFAULT:
            RETURN final_product
    END SWITCH
END FUNCTION
```