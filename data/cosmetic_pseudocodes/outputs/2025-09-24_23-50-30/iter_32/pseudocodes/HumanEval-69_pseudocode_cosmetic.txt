```
FUNCTION search(array_of_numbers)
    SET counts TO array_filled_with_0 OF size (1 + max_element_in array_of_numbers)
    DEFINE procedure accumulate(index)
        IF index > length_of array_of_numbers THEN RETURN
        counts[array_of_numbers[index]] ← counts[array_of_numbers[index]] + 1
        accumulate(index + 1)
    END procedure
    accumulate(1)
    SET result TO -1
    FOR position FROM 1 TO (length_of counts) - 1 DO
        IF NOT (counts[position] < position) THEN
            result ← position
        END IF
    END FOR
    RETURN result
END FUNCTION
```