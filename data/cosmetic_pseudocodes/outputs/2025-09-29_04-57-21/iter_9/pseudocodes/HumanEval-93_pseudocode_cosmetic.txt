```
FUNCTION encode(message)
    LET swapVowels BE "aeiouAEIOU"
    LET shiftedChars BE EMPTY MAP
    FOR EACH letter IN swapVowels DO
        SET shiftedChars[letter] TO CHARACTER(UNICODE(letter) + 2)
    END FOR

    LET transformedMessage BE EMPTY STRING
    FOR EACH char IN message DO
        IF char IS UPPERCASE THEN
            APPEND TO transformedMessage LOWERCASE(char)
        ELSE IF char IS LOWERCASE THEN
            APPEND TO transformedMessage UPPERCASE(char)
        ELSE
            APPEND TO transformedMessage char
        END IF
    END FOR

    LET outputString BE EMPTY STRING
    LET iterator BE 0
    WHILE iterator < LENGTH(transformedMessage) DO
        LET currentChar BE transformedMessage[iterator]
        IF currentChar IS IN swapVowels THEN
            APPEND TO outputString shiftedChars[currentChar]
        ELSE
            APPEND TO outputString currentChar
        END IF
        SET iterator TO iterator + 1
    END WHILE

    RETURN outputString
END FUNCTION
```