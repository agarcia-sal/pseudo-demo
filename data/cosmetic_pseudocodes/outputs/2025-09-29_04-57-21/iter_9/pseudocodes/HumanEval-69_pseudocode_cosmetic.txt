```
FUNCTION search(list_of_integers)
    SET max_val TO 0
    FOR each element IN list_of_integers
        IF element > max_val THEN
            SET max_val TO element
    CREATE count_array AS list_of_zeros WITH LENGTH max_val + 1

    SET iterator TO 0
    WHILE iterator < LENGTH(list_of_integers)
        SET num TO list_of_integers[iterator]
        SET count_array[num] TO count_array[num] + 1
        SET iterator TO iterator + 1

    SET result TO -1
    SET position TO 1
    WHILE position < LENGTH(count_array)
        IF NOT(count_array[position] < position)
            SET result TO position
        SET position TO position + 1

    RETURN result
END FUNCTION
```