```
FUNCTION parse_music(music_string)
    DECLARE lengths_for_notes AS MAP FROM STRING TO INTEGER WITH ENTRIES ('o' -> 4, 'o|' -> 2, '.|' -> 1)
    INITIALIZE results AS EMPTY LIST
    INITIALIZE tokens_iterator TO SPLIT(music_string, " ") ITERATOR

    LOOP INDIVIDUALLY WHILE tokens_iterator HAS MORE ELEMENTS
        LET current_token = NEXT(tokens_iterator)
        IF current_token != "" THEN
            APPEND lengths_for_notes[current_token] TO results
        END IF
    END LOOP

    RETURN results
END FUNCTION
```