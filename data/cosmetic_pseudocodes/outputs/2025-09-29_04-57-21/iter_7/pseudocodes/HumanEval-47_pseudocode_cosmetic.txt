```
FUNCTION median(elements)
    LET ordered_elements = MAKE_SORTED_COPY(elements)
    LET size = LENGTH(ordered_elements)

    IF (size MOD 2) <> 0 THEN
        LET middle = size // 2
        RETURN ordered_elements[middle]
    END IF

    LET upper_mid = size // 2
    LET lower_mid = upper_mid - 1
    LET sum_mid = ordered_elements[lower_mid] + ordered_elements[upper_mid]
    RETURN sum_mid / 2.0
END FUNCTION
```