```
FUNCTION search(list_of_integers)
    SET counts TO array_filled_with_zeroes_of_size (maximum_element_in list_of_integers + 1)
    SET iterator TO 0
    WHILE iterator < LENGTH(list_of_integers)
        SET current_value TO list_of_integers[iterator]
        counts[current_value] = counts[current_value] + 1
        iterator = iterator + 1
    SET result TO -1
    SET position TO 1
    WHILE position < LENGTH(counts)
        IF NOT (counts[position] < position)
            result = position
        position = position + 1
    RETURN result
END FUNCTION
```