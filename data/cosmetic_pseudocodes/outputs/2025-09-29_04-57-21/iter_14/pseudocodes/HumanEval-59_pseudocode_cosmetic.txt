```
FUNCTION largest_prime_factor(n)
    FUNCTION is_prime(k)
        IF NOT (k >= 2)
            RETURN False
        SET divisor TO 2
        WHILE divisor < k
            IF (k MOD divisor) == 0
                RETURN False
            SET divisor TO divisor + 1
        END WHILE
        RETURN True
    END FUNCTION

    SET max_prime_factor TO 1
    SET candidate TO 2
    WHILE candidate <= n
        IF (n MOD candidate) == 0
            IF is_prime(candidate)
                IF candidate > max_prime_factor
                    SET max_prime_factor TO candidate
        SET candidate TO candidate + 1
    END WHILE
    RETURN max_prime_factor
END FUNCTION
```