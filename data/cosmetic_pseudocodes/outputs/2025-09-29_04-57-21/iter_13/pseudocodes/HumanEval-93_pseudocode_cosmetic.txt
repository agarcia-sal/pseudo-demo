```
FUNCTION encode(message)
    LET vowelChars = "aeiouAEIOU"
    LET substitutionMap = EMPTY DICTIONARY
    FOR EACH letter IN vowelChars DO
        substitutionMap[letter] = CHAR(ASCII_CODE(letter) + 2)
    END FOR

    LET toggledMessage = ""
    FOR EACH ch IN message DO
        IF ch IS UPPERCASE LETTER THEN
            toggledMessage = toggledMessage + TO_LOWERCASE(ch)
        ELSE IF ch IS LOWERCASE LETTER THEN
            toggledMessage = toggledMessage + TO_UPPERCASE(ch)
        ELSE
            toggledMessage = toggledMessage + ch
        END IF
    END FOR

    LET result = ""
    INITIALIZE iterator over toggledMessage
    WHILE iterator has next
        LET currentChar = NEXT character from iterator
        IF currentChar IN vowelChars THEN
            result = result + substitutionMap[currentChar]
            CONTINUE
        END IF
        result = result + currentChar
    END WHILE

    RETURN result
END FUNCTION
```