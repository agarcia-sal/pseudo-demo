```
FUNCTION parse_music(music_string)
    DECLARE duration_lookup AS DICTIONARY
    duration_lookup['o']  <- 4
    duration_lookup['o|'] <- 2
    duration_lookup['.|'] <- 1

    DECLARE result_list AS LIST
    SET result_list TO EMPTY LIST

    DECLARE tokens AS LIST
    tokens <- SPLIT music_string BY ' '

    FUNCTION accumulate(index)
        IF index >= LENGTH(tokens) THEN
            RETURN
        END IF

        DECLARE current_token AS STRING
        current_token <- tokens[index]

        IF current_token != '' THEN
            APPEND duration_lookup[current_token] TO result_list
        END IF

        CALL accumulate(index + 1)
    END FUNCTION

    CALL accumulate(0)
    RETURN result_list
END FUNCTION
```