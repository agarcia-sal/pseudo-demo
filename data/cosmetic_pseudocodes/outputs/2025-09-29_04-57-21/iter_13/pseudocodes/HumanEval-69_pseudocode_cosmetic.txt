```
FUNCTION search(list_of_integers)
    INITIALIZE count_array AS array of zeros WITH SIZE (1 + maximum_element(list_of_integers))

    DEFINE FUNCTION increment_counts(items, idx)
        IF idx EQUALS LENGTH(items) THEN RETURN
        INCREMENT count_array AT items[idx] BY 1
        CALL increment_counts(items, idx + 1)
    END FUNCTION

    CALL increment_counts(list_of_integers, 0)

    SET result TO -1

    FOR candidate_value IN 1 TO LENGTH(count_array) - 1
        IF NOT (count_array[candidate_value] < candidate_value)
            SET result TO candidate_value
        END IF
    END FOR

    RETURN result
END FUNCTION
```