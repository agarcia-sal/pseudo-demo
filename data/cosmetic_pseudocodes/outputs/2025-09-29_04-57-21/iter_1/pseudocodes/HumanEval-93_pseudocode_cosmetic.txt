```
FUNCTION encode(message)
    DECLARE vowels AS "aeiouAEIOU"
    DECLARE shift_map AS EMPTY DICTIONARY
    FOR EACH letter IN vowels DO
        shift_map[letter] = CHARACTER WITH ASCII CODE (ASCII_CODE(letter) + 2)
    END FOR
    SET toggled_message TO EMPTY STRING
    FOR EACH ch IN message DO
        IF ch IS LOWERCASE THEN
            toggled_message = toggled_message + TO_UPPER(ch)
        ELSE IF ch IS UPPERCASE THEN
            toggled_message = toggled_message + TO_LOWER(ch)
        ELSE
            toggled_message = toggled_message + ch
        END IF
    END FOR
    DECLARE result AS EMPTY STRING
    FOR EACH char IN toggled_message DO
        IF char IN shift_map KEYS THEN
            result = result + shift_map[char]
        ELSE
            result = result + char
        END IF
    END FOR
    RETURN result
END FUNCTION
```