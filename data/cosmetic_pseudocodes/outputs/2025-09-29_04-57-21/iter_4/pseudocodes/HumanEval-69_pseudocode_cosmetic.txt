```
FUNCTION search(array_of_numbers)
    DECLARE counts AS ARRAY FILLED WITH 0s OF SIZE (MAXIMUM VALUE IN array_of_numbers) + 1
    DECLARE pos AS 0
    WHILE pos < LENGTH OF array_of_numbers
        SET current_num TO array_of_numbers[pos]
        counts[current_num] ← counts[current_num] + 1
        pos ← pos + 1
    END WHILE

    SET result TO -1
    DECLARE idx AS 1
    WHILE idx <= LENGTH OF counts - 1
        IF NOT (counts[idx] < idx)
            result ← idx
        idx ← idx + 1
    END WHILE

    RETURN result
END FUNCTION
```