```
FUNCTION search(list_of_integers)
    SET max_val TO -1
    FOR idx FROM 0 TO LENGTH of list_of_integers MINUS 1
        IF list_of_integers[idx] GREATER THAN max_val
            SET max_val TO list_of_integers[idx]

    SET count_array TO array_of_zeros WITH SIZE max_val PLUS 1

    SET pos TO 0
    WHILE pos LESS THAN LENGTH of list_of_integers
        SET element TO list_of_integers[pos]
        count_array[element] = count_array[element] + 1
        pos = pos + 1

    SET result TO -1
    SET pointer TO 1
    WHILE pointer LESS THAN LENGTH of count_array
        IF NOT (count_array[pointer] LESS THAN pointer)
            SET result TO pointer
        pointer = pointer + 1

    RETURN result
END FUNCTION
```