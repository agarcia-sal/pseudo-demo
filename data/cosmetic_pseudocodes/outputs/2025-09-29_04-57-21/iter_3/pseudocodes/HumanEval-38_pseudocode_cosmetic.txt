```
FUNCTION encode_cyclic(input_string)
    SET segments TO []
    SET total_groups TO ( LENGTH(input_string) + 2 ) DIV 3
    SET idx TO 0
    WHILE idx < total_groups
        SET start_pos TO idx * 3
        SET end_pos TO start_pos + 3
        IF end_pos > LENGTH(input_string)
            SET end_pos TO LENGTH(input_string)
        ENDIF
        APPEND SUBSTRING(input_string, start_pos, end_pos) TO segments
        SET idx TO idx + 1
    ENDWHILE

    SET transformed TO []
    FOR EACH segment IN segments
        IF LENGTH(segment) == 3 THEN
            SET rotated TO CONCAT(SUBSTRING(segment, 1, 3), SUBSTRING(segment, 0, 1))
            APPEND rotated TO transformed
        ELSE
            APPEND segment TO transformed
        ENDIF
    ENDFOR

    RETURN JOIN("", transformed)
END FUNCTION

FUNCTION decode_cyclic(input_string)
    RETURN encode_cyclic(encode_cyclic(input_string))
END FUNCTION
```