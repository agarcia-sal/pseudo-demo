```
FUNCTION encode(message)
    vowelsCollection := "aeiouAEIOU"

    FUNCTION shiftChar(c)
        RETURN CHAR(ASCII(c) + 2)
    END FUNCTION

    vowelReplacements := EMPTY_DICTIONARY
    FOR EACH vowelChar IN vowelsCollection
        vowelReplacements[vowelChar] = shiftChar(vowelChar)
    END FOR

    toggledMessage := EMPTY_STRING
    FOR EACH ch IN message
        IF ch IS LOWERCASE
            toggledMessage = CONCAT(toggledMessage, TO_UPPER(ch))
        ELSE IF ch IS UPPERCASE
            toggledMessage = CONCAT(toggledMessage, TO_LOWER(ch))
        ELSE
            toggledMessage = CONCAT(toggledMessage, ch)
        END IF
    END FOR

    output := EMPTY_STRING
    FOREACH letter IN toggledMessage
        IF vowelReplacements CONTAINS letter THEN
            output = output + vowelReplacements[letter]
        ELSE
            output = output + letter
        END IF
    END FOREACH

    RETURN output
END FUNCTION
```