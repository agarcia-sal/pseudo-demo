```
FUNCTION search(list_of_integers)
    LET max_val = 0
    FOR number IN list_of_integers
        IF number > max_val THEN
            max_val = number
    LET counts = ARRAY OF ZEROS WITH LENGTH max_val + 1
    FOR element IN list_of_integers
        LET current_count = counts[element]
        counts[element] = current_count + 1
    LET result = -1
    FOR idx = 1 TO (LENGTH counts) - 1
        IF NOT (counts[idx] < idx) THEN
            result = idx
    RETURN result
END FUNCTION
```