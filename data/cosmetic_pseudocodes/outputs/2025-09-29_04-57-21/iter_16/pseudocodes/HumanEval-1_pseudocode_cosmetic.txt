```
FUNCTION separate_paren_groups(string_of_parentheses)
  SET results TO empty list
  SET current_fragment TO empty list
  SET depth_counter TO 0

  SET idx TO 0
  WHILE idx LESS THAN length of string_of_parentheses
    SET curr_char TO string_of_parentheses[idx]

    IF curr_char EQUALS '(' THEN
      SET depth_counter TO depth_counter + 1
      APPEND curr_char TO current_fragment

    ELSE IF curr_char EQUALS ')' THEN
      SET depth_counter TO depth_counter - 1
      APPEND curr_char TO current_fragment

      IF NOT (depth_counter NOT EQUAL 0) THEN
        APPEND concatenation of current_fragment TO results
        CLEAR current_fragment
      END IF
    END IF

    SET idx TO idx + 1
  END WHILE

  RETURN results
END FUNCTION
```