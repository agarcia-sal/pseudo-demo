```
FUNCTION encode(message)
    DECLARE letterSwap AS "aeiouAEIOU"
    DECLARE shiftedChars AS EMPTY DICTIONARY
    FOR EACH char IN letterSwap
        SET shiftedChars[char] = CHARACTER(ASCII_CODE(char) + 2)
    END FOR

    SET invertedMessage TO EMPTY STRING
    FOR EACH ch IN message
        IF ch IS UPPERCASE
            SET invertedMessage = invertedMessage + TO_LOWERCASE(ch)
        ELSE IF ch IS LOWERCASE
            SET invertedMessage = invertedMessage + TO_UPPERCASE(ch)
        ELSE
            SET invertedMessage = invertedMessage + ch
        END IF
    END FOR

    DECLARE result AS EMPTY STRING
    FOR index FROM 0 TO LENGTH(invertedMessage) - 1
        SET currentChar = invertedMessage[index]
        IF currentChar IN letterSwap
            SET result = result + shiftedChars[currentChar]
        ELSE
            SET result = result + currentChar
        END IF
    END FOR

    RETURN result
END FUNCTION
```