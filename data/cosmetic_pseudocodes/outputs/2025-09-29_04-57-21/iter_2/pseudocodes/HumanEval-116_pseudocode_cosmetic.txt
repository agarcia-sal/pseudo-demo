```
FUNCTION sort_array(array_of_integers)
  DECLARE intermediate_sorted AS array_of_integers SORTED BY (a, b) => WHEN a < b RETURN -1 ELSE IF a > b RETURN 1 ELSE RETURN 0
  DECLARE result_arr
  SET result_arr TO EMPTY LIST
  DECLARE counts_map
  FOR each_val IN intermediate_sorted DO
    DECLARE binary_str AS TO_BINARY_STRING(each_val)
    DECLARE ones_count AS LENGTH(FILTER CHAR IN binary_str WHERE CHAR = '1')
    APPEND (each_val, ones_count) TO counts_map
  END FOR
  SET counts_map TO SORTED counts_map BY SECOND ELEMENT IN ASCENDING ORDER
  FOR item IN counts_map DO
    APPEND item[0] TO result_arr
  END FOR
  RETURN result_arr
END FUNCTION
```