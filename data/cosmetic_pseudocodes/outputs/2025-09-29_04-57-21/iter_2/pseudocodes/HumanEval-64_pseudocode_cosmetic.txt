```
FUNCTION vowels_count(text)
  LET permitted_chars BE "AEIOUaeiou"
  LET tally BE 0
  FOR index FROM 0 TO LENGTH(text) - 1 DO
    LET current_char BE text[index]
    IF permitted_chars CONTAINS current_char THEN
      SET tally TO tally + 1
    END IF
  END FOR
  LET terminator BE text[LENGTH(text) - 1]
  IF terminator = 'y' OR terminator = 'Y' THEN
    SET tally TO 1 + tally
  END IF
  RETURN tally
END FUNCTION
```