```
FUNCTION max_fill(grid, capacity)
  IMPORT math
  LET total_fill = 0
  FOR row_item IN grid
    LET accumulated = 0
    LET index = 0
    WHILE index < LENGTH(row_item)
      SET accumulated = accumulated + row_item[index]
      SET index = index + 1
    END WHILE

    LET division_result = accumulated / capacity
    LET rounded_value = math.ceil(division_result)
    SET total_fill = total_fill + rounded_value
  END FOR
  RETURN total_fill
END FUNCTION
```