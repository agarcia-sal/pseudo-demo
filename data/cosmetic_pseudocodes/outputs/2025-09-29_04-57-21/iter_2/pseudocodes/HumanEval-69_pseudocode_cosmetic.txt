```
FUNCTION search(list_of_integers)
  SET counts TO ARRAY FILLED WITH 0, LENGTH (MAXIMUM VALUE IN list_of_integers) + 1
  FOR i FROM 0 TO LENGTH(list_of_integers) - 1
    LET current_val = list_of_integers[i]
    LET current_count = counts[current_val]
    LET updated_count = 1 + current_count
    SET counts[current_val] TO updated_count
  LET result = -1
  LET position = LENGTH(counts) - 1
  WHILE position >= 1
    LET freq = counts[position]
    IF freq >= position THEN
      SET result TO position
    DECREMENT position BY 1
  END WHILE
  RETURN result
END FUNCTION
```