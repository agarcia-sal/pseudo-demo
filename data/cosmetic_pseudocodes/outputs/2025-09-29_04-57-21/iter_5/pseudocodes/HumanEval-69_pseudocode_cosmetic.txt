```
FUNCTION search(list_of_integers)
    DEFINE counts ARRAY filled with 0s sized (maximum element of list_of_integers) + 1
    PROCEDURE count_elements(pos)
        IF pos > LENGTH(list_of_integers) THEN RETURN
        counts[list_of_integers[pos]] = counts[list_of_integers[pos]] + 1
        count_elements(pos + 1)
    END PROCEDURE
    count_elements(1)

    VARIABLE result ASSIGN -1

    VARIABLE pointer ASSIGN 1
    WHILE pointer < LENGTH(counts)
        IF NOT (counts[pointer] < pointer) THEN
            result = pointer
        END IF
        pointer = pointer + 1
    END WHILE

    RETURN result
END FUNCTION
```