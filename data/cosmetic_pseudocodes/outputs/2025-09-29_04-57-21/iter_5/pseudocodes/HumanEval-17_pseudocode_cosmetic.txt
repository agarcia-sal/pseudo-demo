```
FUNCTION parse_music(music_string)
  DEFINE length_for_note AS MAPPING FROM 'o' TO 4, 'o|' TO 2, '.|' TO 1
  INITIALIZE result_collection TO EMPTY LIST
  FOR EACH token IN SPLIT music_string BY ' '
    IF NOT (token EQUALS '')
      APPEND length_for_note[token] TO result_collection
    END IF
  END FOR
  RETURN result_collection
END FUNCTION
```